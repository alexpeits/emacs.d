<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-06-13 Sat 21:31 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Alex Peitsinis" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link href="/htmlize.css" rel="stylesheet">
<link href="/readtheorg.css" rel="stylesheet">
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org1ecfee2">1. Variables and PATH</a></li>
<li><a href="#org2b3a12a">2. Package management</a></li>
<li><a href="#org20b70b4">3. Various utility functions</a></li>
<li><a href="#org3373004">4. Various configurations</a>
<ul>
<li><a href="#org30902b8">basic editing</a></li>
<li><a href="#org70270a2">auth</a></li>
<li><a href="#org63f0af3">server</a></li>
<li><a href="#org3573153">advise raise-frame with wmctrl</a></li>
<li><a href="#org6bfb4cd">compilation</a></li>
<li><a href="#org718ed15">Smartparens</a></li>
<li><a href="#org1e0cf40">Documentation &amp; help</a></li>
<li><a href="#org6a1b28e">abbrev etc</a></li>
<li><a href="#org78a4fca">engine-mode</a></li>
<li><a href="#org061bc09">browser</a></li>
<li><a href="#org4be30a7">math input</a></li>
<li><a href="#org118318a">prettify symbols</a></li>
<li><a href="#org4828b95">recentf</a></li>
<li><a href="#org04b98c7">hi-lock &amp; symbol overlay</a></li>
<li><a href="#orgba7af52">highlight keywords in some modes</a></li>
<li><a href="#orgfd1409a">alignment</a></li>
<li><a href="#orgffcfa56">temp project roots</a></li>
<li><a href="#orgf5ca004">edit-indirect</a></li>
<li><a href="#orgce72776">use <code>pulse</code> to flash cursor position</a></li>
</ul>
</li>
<li><a href="#orgedfcbfc">5. term, eshell and comint-mode</a>
<ul>
<li><a href="#orgbf8d8b7">terms</a></li>
<li><a href="#orgb50a782">eshell</a></li>
</ul>
</li>
<li><a href="#org336d685">6. UI</a>
<ul>
<li><a href="#orge18972a">highlight trailing whitespace</a></li>
</ul>
</li>
<li><a href="#orgc6e877c">7. Theme</a>
<ul>
<li><a href="#org6f47688">theme loading</a></li>
<li><a href="#orgd2e66fe">modus themes</a></li>
</ul>
</li>
<li><a href="#orgdc4b749">8. Font</a></li>
<li><a href="#orga9bd889">9. VCS</a>
<ul>
<li><a href="#orge80c26f">vc</a></li>
<li><a href="#org711801c">magit</a></li>
<li><a href="#orgf42710e">git-timemachine</a></li>
<li><a href="#org55473e2">diff-hl &amp; git-gutter+</a></li>
<li><a href="#orge011f9d">Helpers</a></li>
</ul>
</li>
<li><a href="#orga053c83">10. keybindings</a>
<ul>
<li><a href="#org66231cc">keybind to command mapping</a></li>
<li><a href="#org454ada4">setup keybindings</a></li>
</ul>
</li>
<li><a href="#org44f1f84">11. evil-mode</a>
<ul>
<li><a href="#orga43976d">evil-mode setup</a></li>
<li><a href="#org960ae12">evil packages that can be used without evil-mode</a></li>
</ul>
</li>
<li><a href="#org8bcd7c3">12. Hybrid input mode</a></li>
<li><a href="#org4cbfde2">13. Spell checking</a></li>
<li><a href="#org8f722da">14. Buffer &amp; window management</a>
<ul>
<li><a href="#orge3151f2">ibuffer</a></li>
<li><a href="#orgcbd6650">avy</a></li>
<li><a href="#orgcbf5567">ace-window</a></li>
<li><a href="#org0c2c3b4">buffer-move</a></li>
<li><a href="#org5613350">zoom</a></li>
</ul>
</li>
<li><a href="#org99240be">15. eww</a></li>
<li><a href="#org1249ddd">16. dired</a></li>
<li><a href="#orgcbf0d25">17. regex replace</a>
<ul>
<li><a href="#orgf902a6a">re-builder (useful for debugging)</a></li>
<li><a href="#org7acd4a2">visual-regexp-steroids</a></li>
</ul>
</li>
<li><a href="#orgb0c1ee0">18. nix</a></li>
<li><a href="#orgd568fe7">19. direnv</a></li>
<li><a href="#org7ef031b">20. haskell</a></li>
<li><a href="#orgff5867b">21. purescript</a></li>
<li><a href="#orgb7412d3">22. python</a></li>
<li><a href="#orga22aa39">23. js/ts/html/css</a></li>
<li><a href="#orgcd04245">24. Lisps</a>
<ul>
<li><a href="#org09c73d7">all lisps</a></li>
<li><a href="#org2911652">emacs lisp</a></li>
</ul>
</li>
<li><a href="#org0e32b46">25. coq (proof-general)</a></li>
<li><a href="#orgb77cd53">26. agda</a></li>
<li><a href="#orgca1ed75">27. markdown</a></li>
<li><a href="#org7c93cbd">28. LaTeX</a></li>
<li><a href="#org8383392">29. Other prog modes</a>
<ul>
<li><a href="#org49fd772">idris</a></li>
<li><a href="#org399a361">c/c++</a></li>
<li><a href="#org75c1fea">dhall</a></li>
<li><a href="#org275ddde">bazel</a></li>
<li><a href="#org5ec479b">nginx</a></li>
<li><a href="#org1370765">terraform</a></li>
<li><a href="#orgd7fc31b">docker</a></li>
<li><a href="#orgd7df377">elasticsearch</a></li>
<li><a href="#org12c3cff">json</a></li>
<li><a href="#orgf65235b">yaml</a></li>
<li><a href="#org1294968">conf</a></li>
<li><a href="#org3160c57">reStructuredText</a></li>
<li><a href="#org0fa73ab">asciidoc</a></li>
</ul>
</li>
<li><a href="#orgfce3d00">30. Other major modes</a>
<ul>
<li><a href="#orgad3482a">elfeed</a></li>
<li><a href="#org22f0332">pdf tools</a></li>
<li><a href="#org12e1dfb">erc</a></li>
<li><a href="#orgba2c446">lilypond</a></li>
</ul>
</li>
<li><a href="#org2c95195">31. Searching &amp; jumping</a>
<ul>
<li><a href="#org151ab10">isearch</a></li>
<li><a href="#org9c6fad7">rg</a></li>
<li><a href="#orgd67fed4">imenu-list</a></li>
<li><a href="#org35321e0">mark</a></li>
<li><a href="#orgcade917">anzu</a></li>
</ul>
</li>
<li><a href="#orgf4b7152">32. company</a></li>
<li><a href="#org210e6f6">33. flycheck</a></li>
<li><a href="#org51c94c0">34. projectile</a></li>
<li><a href="#orgc7dc75d">35. ivy/counsel/swiper</a></li>
<li><a href="#org2e6df1e">36. yasnippet</a></li>
<li><a href="#org19cd964">37. org-mode</a></li>
<li><a href="#orgbcdc09a">38. org-roam</a></li>
<li><a href="#org50e300d">39. org-download</a></li>
<li><a href="#orgb839e61">40. org-ref, org-noter &amp; bibtex</a></li>
<li><a href="#org7b3e7f6">41. deft</a></li>
<li><a href="#orgf19ffb0">42. modeline</a>
<ul>
<li><a href="#org586a3c4">Selected window &amp; focused frame</a></li>
<li><a href="#org43ae287">Regular modeline</a></li>
<li><a href="#org2914cb2">Experimental new modeline</a></li>
<li><a href="#org7d269be">Powerline</a></li>
</ul>
</li>
<li><a href="#org7f17255">43. Setup</a>
<ul>
<li><a href="#orgc3af7cb">Per-workstation setup</a></li>
<li><a href="#orgb40f7b1">Performance</a></li>
<li><a href="#orgc39d758">Global setup</a></li>
<li><a href="#org86933b2">custom</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org1ecfee2" class="outline-2">
<h2 id="org1ecfee2"><span class="section-number-2">1</span> Variables and PATH</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'load-path <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-string">"lisp"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'custom-theme-load-path
             <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-string">"custom-themes/"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> user-full-name <span class="org-string">"Alex Peitsinis"</span>
      user-mail-address <span class="org-string">"alexpeitsinis@gmail.com"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-2">(</span>pth '<span class="org-rainbow-delimiters-depth-3">(</span>
               <span class="org-string">"/usr/local/bin"</span>
               <span class="org-string">"~/bin"</span>
               <span class="org-string">"~/.local/bin"</span>
               <span class="org-string">"~/.ghcup/bin"</span>
               <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

<span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'exec-path <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name pth<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setenv <span class="org-string">"PATH"</span> <span class="org-rainbow-delimiters-depth-3">(</span>concat <span class="org-rainbow-delimiters-depth-4">(</span>expand-file-name pth<span class="org-rainbow-delimiters-depth-4">)</span>
                         path-separator
                         <span class="org-rainbow-delimiters-depth-4">(</span>getenv <span class="org-string">"PATH"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/dropbox-dir</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"~/Dropbox/"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Private directory synced with dropbox"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/dropbox-emacs-dir</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"emacs/"</span> my/dropbox-dir<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Private directory synced with dropbox"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/org-directory</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"org/"</span> my/dropbox-emacs-dir<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Org directory"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">is-mac</span> <span class="org-rainbow-delimiters-depth-2">(</span>eq system-type 'darwin<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Whether emacs is running in mac or not"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">is-gui</span> <span class="org-rainbow-delimiters-depth-2">(</span>display-graphic-p<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Whether emacs is running in gui mode or not"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">is-term</span> <span class="org-rainbow-delimiters-depth-2">(</span>not is-gui<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Whether emacs is running in a terminal or not"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/xmonad-emacs-sp-name</span> <span class="org-string">"emacs-sp"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2b3a12a" class="outline-2">
<h2 id="org2b3a12a"><span class="section-number-2">2</span> Package management</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">package</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'package-archives
             '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"melpa"</span> . <span class="org-string">"https://melpa.org/packages/"</span><span class="org-rainbow-delimiters-depth-2">)</span>
             <span class="org-comment-delimiter">;; </span><span class="org-comment">'("MELPA Stable" . "https://stable.melpa.org/packages/")</span>
             <span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>&lt; emacs-major-version <span class="org-highlight-numbers-number">24</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">For important compatibility libraries like cl-lib</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'package-archives '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gnu"</span> . <span class="org-string">"https://elpa.gnu.org/packages/"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Some sort of emacs bug workaround</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>= emacs-major-version <span class="org-highlight-numbers-number">26</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> gnutls-algorithm-priority <span class="org-string">"NORMAL:-VERS-TLS1.3"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">bound-and-true-p</span> package--initialized<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>package-initialize<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> package-enable-at-startup nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-2">(</span>package-installed-p 'use-package<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>package-refresh-contents<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>package-install 'use-package<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Can be used to debug slow packages</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(setq use-package-minimum-reported-time 0.05</span>
<span class="org-comment-delimiter">;;       </span><span class="org-comment">use-package-verbose t)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">eval-when-compile</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">require</span> '<span class="org-constant">use-package</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>&lt; emacs-major-version <span class="org-highlight-numbers-number">27</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">require</span> '<span class="org-constant">cl</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">diminish</span> <span class="org-builtin">:ensure</span> t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-comment"><span class="org-constant">dash</span></span><span class="org-comment">' is used in various places</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dash</span> <span class="org-builtin">:ensure</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org20b70b4" class="outline-2">
<h2 id="org20b70b4"><span class="section-number-2">3</span> Various utility functions</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defmacro</span> <span class="org-function-name">my/add-hooks</span> <span class="org-rainbow-delimiters-depth-2">(</span>hooks <span class="org-type">&amp;rest</span> body<span class="org-rainbow-delimiters-depth-2">)</span>
  `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>hook ,hooks<span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span>add-hook hook <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">()</span> ,@body<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defmacro</span> <span class="org-function-name">my/execute-f-with-hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>f winf<span class="org-rainbow-delimiters-depth-2">)</span>
  `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">&amp;rest</span> args<span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span>,winf<span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span>apply <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">quote</span> ,f<span class="org-rainbow-delimiters-depth-4">)</span> args<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defmacro</span> <span class="org-function-name">my/control-function-window-split</span> <span class="org-rainbow-delimiters-depth-2">(</span>f height width<span class="org-rainbow-delimiters-depth-2">)</span>
  `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">&amp;rest</span> args<span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
     <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>split-height-threshold ,height<span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>split-width-threshold ,width<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
       <span class="org-rainbow-delimiters-depth-4">(</span>apply <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">quote</span> ,f<span class="org-rainbow-delimiters-depth-5">)</span> args<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">what it says</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/revert-all-buffers</span> <span class="org-rainbow-delimiters-depth-2">(</span>also-git<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Refresh all open file buffers without confirmation.</span>

<span class="org-doc">Buffers in modified </span><span class="org-doc"><span class="org-warning">\</span></span><span class="org-doc">(not yet saved) state in EMACS will not be reverted. They</span>
<span class="org-doc">will be reverted though if they were modified outside EMACS. Buffers visiting</span>
<span class="org-doc">files which do not exist any more or are no longer readable will be killed.</span>

<span class="org-doc">With prefix argument ALSO-GIT, refresh the git state as well </span><span class="org-doc"><span class="org-warning">\</span></span><span class="org-doc">(branch status on</span>
<span class="org-doc">modeline)."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>buf <span class="org-rainbow-delimiters-depth-4">(</span>buffer-list<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>filename <span class="org-rainbow-delimiters-depth-6">(</span>buffer-file-name buf<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">Revert only buffers containing files, which are not modified;</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">do not try to revert non-file buffers like *Messages*.</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">and</span> filename
                 <span class="org-rainbow-delimiters-depth-6">(</span>not <span class="org-rainbow-delimiters-depth-7">(</span>buffer-modified-p buf<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>file-readable-p filename<span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-comment-delimiter">;; </span><span class="org-comment">If the file exists and is readable, revert the buffer.</span>
            <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">with-current-buffer</span> buf
              <span class="org-rainbow-delimiters-depth-7">(</span>revert-buffer <span class="org-builtin">:ignore-auto</span> <span class="org-builtin">:noconfirm</span> <span class="org-builtin">:preserve-modes</span><span class="org-rainbow-delimiters-depth-7">)</span>
              <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">when</span> also-git <span class="org-rainbow-delimiters-depth-8">(</span>vc-refresh-state<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-comment-delimiter">;; </span><span class="org-comment">Otherwise, kill the buffer.</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-7">(</span>kill-buffer-query-functions<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">No query done when killing buffer</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>kill-buffer buf<span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-rainbow-delimiters-depth-7">(</span>message <span class="org-string">"Killed non-existing/unreadable file buffer: %s"</span> filename<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>msg-end <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> also-git <span class="org-string">", and their git state."</span> <span class="org-string">"."</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>message
     <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"Finished reverting buffers containing unmodified files%s"</span> msg-end<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">rb</span>  'revert-buffer<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">rab</span> 'my/revert-all-buffers<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/indent-region-or-buffer</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Indent a region if selected, otherwise the whole buffer."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>region-active-p<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>indent-region <span class="org-rainbow-delimiters-depth-6">(</span>region-beginning<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>region-end<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>message <span class="org-string">"Indented selected region."</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>indent-region <span class="org-rainbow-delimiters-depth-6">(</span>point-min<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>point-max<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>message <span class="org-string">"Indented buffer."</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-M-\\"</span><span class="org-rainbow-delimiters-depth-2">)</span> #'my/indent-region-or-buffer<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/line-length</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Length of the Nth line."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>ln <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> line line <span class="org-rainbow-delimiters-depth-6">(</span>line-number-at-pos<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>zerop <span class="org-rainbow-delimiters-depth-6">(</span>forward-line <span class="org-rainbow-delimiters-depth-7">(</span>1- ln<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>- <span class="org-rainbow-delimiters-depth-6">(</span>line-end-position<span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span>line-beginning-position<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/format-region-or-buffer</span> <span class="org-rainbow-delimiters-depth-2">(</span>cmd <span class="org-type">&amp;rest</span> args<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>buf <span class="org-rainbow-delimiters-depth-5">(</span>current-buffer<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>cur-point <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>cur-line <span class="org-rainbow-delimiters-depth-5">(</span>line-number-at-pos<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>cur-col <span class="org-rainbow-delimiters-depth-5">(</span>current-column<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>cur-rel-line <span class="org-rainbow-delimiters-depth-5">(</span>- <span class="org-rainbow-delimiters-depth-6">(</span>line-number-at-pos<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>line-number-at-pos <span class="org-rainbow-delimiters-depth-7">(</span>window-start<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-4">(</span>get-buffer-create <span class="org-string">"*codefmt*"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>erase-buffer<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert-buffer-substring buf<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>zerop <span class="org-rainbow-delimiters-depth-6">(</span>apply 'call-process-region `<span class="org-rainbow-delimiters-depth-7">(</span>,<span class="org-rainbow-delimiters-depth-8">(</span>point-min<span class="org-rainbow-delimiters-depth-8">)</span> ,<span class="org-rainbow-delimiters-depth-8">(</span>point-max<span class="org-rainbow-delimiters-depth-8">)</span> ,cmd t <span class="org-rainbow-delimiters-depth-8">(</span>t nil<span class="org-rainbow-delimiters-depth-8">)</span> nil ,@args<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">progn</span>
            <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>not <span class="org-rainbow-delimiters-depth-8">(</span>string= <span class="org-rainbow-delimiters-depth-9">(</span>buffer-string<span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">with-current-buffer</span> buf <span class="org-rainbow-delimiters-depth-1">(</span>buffer-string<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-rainbow-delimiters-depth-7">(</span>copy-to-buffer buf <span class="org-rainbow-delimiters-depth-8">(</span>point-min<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>point-max<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>kill-buffer<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-warning">error</span> <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"%s failed, see *codefmt* for details"</span> cmd<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-line cur-line<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>&lt; cur-col <span class="org-rainbow-delimiters-depth-5">(</span>my/line-length cur-line<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>forward-char cur-col<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>recenter cur-rel-line<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>message <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"Formatted with %s"</span> cmd<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/format-and-save</span> <span class="org-rainbow-delimiters-depth-2">(</span>cmd <span class="org-type">&amp;rest</span> args<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>apply 'my/format-region-or-buffer `<span class="org-rainbow-delimiters-depth-3">(</span>,cmd ,@args<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>save-buffer<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/select-a-major-mode-last-selected</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/select-a-major-mode</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Interactively select a major mode and return it as a string."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>def <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span>
               my/select-a-major-mode-last-selected
               <span class="org-rainbow-delimiters-depth-6">(</span>symbol-name initial-major-mode<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>choice <span class="org-rainbow-delimiters-depth-5">(</span>completing-read <span class="org-string">"major mode: "</span>
                                  <span class="org-rainbow-delimiters-depth-6">(</span>apropos-internal <span class="org-string">"-mode$"</span><span class="org-rainbow-delimiters-depth-6">)</span>
                                  nil nil nil nil
                                  def<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> my/select-a-major-mode-last-selected choice<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/create-scratch-buffer-with-mode</span> <span class="org-rainbow-delimiters-depth-2">(</span>other-window<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Create a new scratch buffer and select major mode to use.</span>
<span class="org-doc">With a prefix argument, open the buffer using `</span><span class="org-doc"><span class="org-constant">switch-to-buffer-other-window</span></span><span class="org-doc">'."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>mmode <span class="org-rainbow-delimiters-depth-5">(</span>my/select-a-major-mode<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>buf <span class="org-rainbow-delimiters-depth-5">(</span>generate-new-buffer <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-string">"*scratch"</span> <span class="org-string">"-"</span> mmode <span class="org-string">"*"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>switch-func <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> other-window 'switch-to-buffer-other-window 'switch-to-buffer<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>funcall switch-func buf<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>funcall <span class="org-rainbow-delimiters-depth-4">(</span>intern mmode<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> buffer-offer-save nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">https://www.reddit.com/r/emacs/comments/ac9gsf/question_emacs_way_of_using_windows/</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/window-dedicated</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> window<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Toggle the dedicated flag on a window."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>window <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> window <span class="org-rainbow-delimiters-depth-6">(</span>selected-window<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>dedicated <span class="org-rainbow-delimiters-depth-5">(</span>not <span class="org-rainbow-delimiters-depth-6">(</span>window-dedicated-p window<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>called-interactively-p<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>message <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"%s %sdedicated"</span>
                       <span class="org-rainbow-delimiters-depth-6">(</span>buffer-name <span class="org-rainbow-delimiters-depth-7">(</span>window-buffer window<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                       <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> dedicated <span class="org-string">""</span> <span class="org-string">"un"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>set-window-dedicated-p window dedicated<span class="org-rainbow-delimiters-depth-3">)</span>
    dedicated<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/window-fixed</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> window<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Make a window non-resizable."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>window <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> window <span class="org-rainbow-delimiters-depth-6">(</span>selected-window<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>new-status <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">with-selected-window</span> window <span class="org-rainbow-delimiters-depth-6">(</span>not window-size-fixed<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>called-interactively-p<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>message <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"%s %sfixed"</span>
                       <span class="org-rainbow-delimiters-depth-6">(</span>buffer-name <span class="org-rainbow-delimiters-depth-7">(</span>window-buffer window<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                       <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> new-status <span class="org-string">""</span> <span class="org-string">"un"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-selected-window</span> window
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> window-size-fixed new-status<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    new-status<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/copy-file-path</span> <span class="org-rainbow-delimiters-depth-2">(</span>include-line-number<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>full-fp <span class="org-rainbow-delimiters-depth-5">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>prefix <span class="org-rainbow-delimiters-depth-5">(</span>read-directory-name <span class="org-string">"prefix to strip: "</span> <span class="org-rainbow-delimiters-depth-6">(</span>projectile-project-root<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>suffix <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> include-line-number <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">":%s"</span> <span class="org-rainbow-delimiters-depth-7">(</span>number-to-string <span class="org-rainbow-delimiters-depth-8">(</span>line-number-at-pos<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>fp <span class="org-rainbow-delimiters-depth-5">(</span>concat <span class="org-rainbow-delimiters-depth-6">(</span>string-remove-prefix prefix full-fp<span class="org-rainbow-delimiters-depth-6">)</span> suffix<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>kill-new fp<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>message fp<span class="org-rainbow-delimiters-depth-3">)</span>
    t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/useful-files</span>
  '<span class="org-rainbow-delimiters-depth-2">(</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">nix</span>
    <span class="org-string">"default.nix"</span>
    <span class="org-string">"shell.nix"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">haskell</span>
    <span class="org-string">"package.yaml"</span>
    <span class="org-string">"stack.yaml"</span>
    <span class="org-string">".hlint.yaml"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">python</span>
    <span class="org-string">"requirements.txt"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">docker</span>
    <span class="org-string">"docker-compose.yml"</span>
    <span class="org-string">"Dockerfile"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">bazel</span>
    <span class="org-string">"BUILD.bazel"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">generic</span>
    <span class="org-string">"Makefile"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">github repo</span>
    <span class="org-string">"README.md"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">emacs</span>
    <span class="org-string">".dir-locals.el"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/try-open-dominating-file</span> <span class="org-rainbow-delimiters-depth-2">(</span>other-window<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>cur-file <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-6">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-warning">user-error</span> <span class="org-string">"Not a file"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>paths <span class="org-rainbow-delimiters-depth-5">(</span>seq-filter
                 #'<span class="org-rainbow-delimiters-depth-6">(</span>lambda <span class="org-rainbow-delimiters-depth-7">(</span>pair<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>not <span class="org-rainbow-delimiters-depth-8">(</span>null <span class="org-rainbow-delimiters-depth-9">(</span>cdr pair<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                 <span class="org-rainbow-delimiters-depth-6">(</span>mapcar #'<span class="org-rainbow-delimiters-depth-7">(</span>lambda <span class="org-rainbow-delimiters-depth-8">(</span>fn<span class="org-rainbow-delimiters-depth-8">)</span>
                             <span class="org-rainbow-delimiters-depth-8">(</span>cons fn <span class="org-rainbow-delimiters-depth-9">(</span>locate-dominating-file cur-file fn<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                         my/useful-files<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>file <span class="org-rainbow-delimiters-depth-5">(</span>completing-read <span class="org-string">"File name: "</span>
                                paths
                                nil nil nil nil nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>dir <span class="org-rainbow-delimiters-depth-5">(</span>cdr <span class="org-rainbow-delimiters-depth-6">(</span>assoc file paths<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>find-file-func <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> other-window 'find-file-other-window 'find-file<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>funcall find-file-func <span class="org-rainbow-delimiters-depth-4">(</span>expand-file-name file <span class="org-rainbow-delimiters-depth-5">(</span>file-name-as-directory dir<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">with-eval-after-load</span> 'ivy
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/try-open-dominating-file-display-transformer</span> <span class="org-rainbow-delimiters-depth-3">(</span>fn<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>dir <span class="org-rainbow-delimiters-depth-6">(</span>locate-dominating-file <span class="org-rainbow-delimiters-depth-7">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-7">)</span> fn<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>max-length <span class="org-rainbow-delimiters-depth-6">(</span>apply 'max <span class="org-rainbow-delimiters-depth-7">(</span>mapcar 'length my/useful-files<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"%%-%ds (in %%s)"</span> max-length<span class="org-rainbow-delimiters-depth-5">)</span>
              fn
              <span class="org-rainbow-delimiters-depth-5">(</span>propertize dir 'face 'font-lock-type-face<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ivy-configure 'my/try-open-dominating-file
    <span class="org-builtin">:display-transformer-fn</span> #'my/try-open-dominating-file-display-transformer<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/line-numbers</span> <span class="org-rainbow-delimiters-depth-2">(</span>relative<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>&lt; emacs-major-version <span class="org-highlight-numbers-number">26</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>call-interactively 'linum-mode<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> display-line-numbers
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> display-line-numbers nil<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> relative
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> display-line-numbers 'relative<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> display-line-numbers t<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/shell-command-on-buffer-or-region</span> <span class="org-rainbow-delimiters-depth-2">(</span>cmd<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span>region-active-p<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>mark-whole-buffer<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>shell-command-on-region <span class="org-rainbow-delimiters-depth-4">(</span>region-beginning<span class="org-rainbow-delimiters-depth-4">)</span>
                             <span class="org-rainbow-delimiters-depth-4">(</span>region-end<span class="org-rainbow-delimiters-depth-4">)</span>
                             cmd
                             nil
                             t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3373004" class="outline-2">
<h2 id="org3373004"><span class="section-number-2">4</span> Various configurations</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org30902b8" class="outline-3">
<h3 id="org30902b8">basic editing</h3>
<div class="outline-text-3" id="text-org30902b8">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">remember last position</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">saveplace</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . save-place-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">undo tree</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">undo-tree</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"C-x u"</span> . undo-tree-visualize<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span> undo-tree-mode
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . global-undo-tree-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> undo-tree-visualizer-relative-timestamps t
        undo-tree-visualizer-diff t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">use column width 80 to fill (e.g. with `</span><span class="org-comment"><span class="org-constant">M-q</span></span><span class="org-comment">'/`</span><span class="org-comment"><span class="org-constant">gq</span></span><span class="org-comment">')</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> fill-column <span class="org-highlight-numbers-number">80</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/set-mode-fill-width</span> <span class="org-rainbow-delimiters-depth-2">(</span>mode-hook width<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook mode-hook `<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> fill-column ,width<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">autorevert</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . global-auto-revert-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span> auto-revert-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> auto-revert-verbose nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">eldoc</span> <span class="org-builtin">:diminish</span> eldoc-mode<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">files</span>
  <span class="org-builtin">:init</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">store all backup and autosave files in</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">one dir</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> backup-directory-alist
        `<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".*"</span> . ,temporary-file-directory<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> auto-save-file-name-transforms
        `<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">".*"</span> ,temporary-file-directory t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">only with this set to nil can org-mode export &amp; open too</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">... but it also breaks some stuff so it's disabled</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(setq process-connection-type nil)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">yesss</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">yes-or-no-p</span> #'y-or-n-p<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Always confirm before closing because I'm stupid</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook
 'kill-emacs-query-functions
 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">(</span>y-or-n-p <span class="org-string">"Do you really want to exit Emacs? "</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
 'append<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">use spaces</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> indent-tabs-mode nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">always scroll to the end of compilation buffers</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(setq compilation-scroll-output t)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">vim-like scrolling (emacs=0)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> scroll-conservatively <span class="org-highlight-numbers-number">101</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Supress "ad-handle-definition: x got redefined" warnings</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> ad-redefinition-action 'accept<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">smooth mouse scrolling</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> mouse-wheel-scroll-amount '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>shift<span class="org-rainbow-delimiters-depth-4">)</span> . <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">one line at a time</span>
      mouse-wheel-progressive-speed t <span class="org-comment-delimiter">;; </span><span class="org-comment">don't accelerate scrolling</span>
      mouse-wheel-follow-mouse 't<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">scroll window under mouse</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">turn off because it causes delays in some modes (e.g. coq-mode)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-comment">: not sure if this makes a difference</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> smie-blink-matching-inners nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(setq blink-matching-paren nil)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">who in their right mind ends sentences with 2 spaces?</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> sentence-end-double-space nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Don't autofill when pressing RET</span>
<span class="org-rainbow-delimiters-depth-1">(</span>aset auto-fill-chars ?\n nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">always trim whitespace before saving</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'before-save-hook 'delete-trailing-whitespace)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">dw</span> 'delete-trailing-whitespace<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">some keymaps</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-o"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'other-window<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c j"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'previous-buffer<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c k"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'next-buffer<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">I use that to switch to Greek layout</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-SPC"</span><span class="org-rainbow-delimiters-depth-2">)</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Bind M-\ to just-one-space instead of delete-horizontal-space</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-\\"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'just-one-space<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">proper count-words keybinding</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-="</span><span class="org-rainbow-delimiters-depth-2">)</span> 'count-words<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">commenting </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-comment">: use newcomment</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-;"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'comment-indent<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-:"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'comment-kill<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">DocView</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> doc-view-continuous t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">shr (html rendering)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>make-variable-buffer-local 'shr-width<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">expand-region</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-="</span> . er/expand-region<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-="</span> . er/contract-region<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">misc</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"M-Z"</span> . zap-up-to-char<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">subword</span>
  <span class="org-builtin">:diminish</span> subword-mode
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>subword-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>advice-add 'subword-mode
              <span class="org-builtin">:after</span>
              #'<span class="org-rainbow-delimiters-depth-3">(</span>lambda <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-type">&amp;optional</span> arg<span class="org-rainbow-delimiters-depth-4">)</span>
                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> evil-symbol-word-search subword-mode<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">outline</span>
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> outline-minor-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;tab&gt;"</span> . outline-toggle-children<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span> outline-minor-mode<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">elisp: ;; -*- eval: (outshine-mode) -*-</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">outshine</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> outline
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> outline-minor-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;S-iso-lefttab&gt;"</span> . outshine-cycle-buffer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>outshine-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">rainbow-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>rainbow-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">rainbow-delimiters</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>lisp-mode emacs-lisp-mode<span class="org-rainbow-delimiters-depth-3">)</span> . rainbow-delimiters-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>rainbow-delimiters-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org70270a2" class="outline-3">
<h3 id="org70270a2">auth</h3>
<div class="outline-text-3" id="text-org70270a2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">auth-source</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'auth-sources <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-string">"authinfo.gpg"</span> my/dropbox-dir<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org63f0af3" class="outline-3">
<h3 id="org63f0af3">server</h3>
<div class="outline-text-3" id="text-org63f0af3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">server</span>
  <span class="org-builtin">:init</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">don't kill buffers in server sessions</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> server-kill-new-buffers nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3573153" class="outline-3">
<h3 id="org3573153">advise raise-frame with wmctrl</h3>
<div class="outline-text-3" id="text-org3573153">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/wmctrl-raise-frame</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> frame<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>executable-find <span class="org-string">"wmctrl"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>fr <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">or</span> frame <span class="org-rainbow-delimiters-depth-7">(</span>selected-frame<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>name <span class="org-rainbow-delimiters-depth-6">(</span>frame-parameter fr 'name<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>flag <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>string-equal name my/xmonad-emacs-sp-name<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"-R"</span> <span class="org-string">"-a"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>call-process
       <span class="org-string">"wmctrl"</span> nil nil nil <span class="org-string">"-i"</span> flag
       <span class="org-rainbow-delimiters-depth-5">(</span>frame-parameter fr 'outer-window-id<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>advice-add 'raise-frame <span class="org-builtin">:after</span> 'my/wmctrl-raise-frame<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6bfb4cd" class="outline-3">
<h3 id="org6bfb4cd">compilation</h3>
<div class="outline-text-3" id="text-org6bfb4cd">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/fast-recompile-mode-map</span> <span class="org-rainbow-delimiters-depth-2">(</span>make-sparse-keymap<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define-minor-mode</span> <span class="org-function-name">my/fast-recompile-mode</span>
  <span class="org-doc">"Minor mode for fast recompilation using C-c C-c"</span>
  <span class="org-builtin">:lighter</span> <span class="org-string">" rc"</span>
  <span class="org-builtin">:global</span> t
  <span class="org-builtin">:keymap</span> my/fast-recompile-mode-map
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> my/fast-recompile-mode
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>put 'my/-old-compilation-ask-about-save 'state compilation-ask-about-save<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> compilation-ask-about-save nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> compilation-ask-about-save <span class="org-rainbow-delimiters-depth-4">(</span>get 'my/-old-compilation-ask-about-save 'state<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key my/fast-recompile-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c C-c"</span><span class="org-rainbow-delimiters-depth-2">)</span> #'recompile<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/compile-in-dir</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>default-directory <span class="org-rainbow-delimiters-depth-5">(</span>read-directory-name <span class="org-string">"Run command in: "</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>call-interactively 'compile<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> compilation-scroll-output 'first-error<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org718ed15" class="outline-3">
<h3 id="org718ed15">Smartparens</h3>
<div class="outline-text-3" id="text-org718ed15">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">smartparens-config</span>
  <span class="org-builtin">:after</span> smartparens
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">don't create a pair with single quote in minibuffer</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sp-local-pair 'minibuffer-inactive-mode <span class="org-string">"'"</span> nil <span class="org-builtin">:actions</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">because DataKinds</span>
  <span class="org-comment-delimiter">;;</span><span class="org-comment">(with-eval-after-load 'haskell-mode</span>
  <span class="org-comment-delimiter">;;  </span><span class="org-comment">(sp-local-pair 'haskell-mode "'" nil :actions nil))</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">indent after inserting any kinds of parens</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/smartparens-pair-newline-and-indent</span> <span class="org-rainbow-delimiters-depth-3">(</span>id action context<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>newline<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>indent-according-to-mode<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>indent-according-to-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sp-pair <span class="org-string">"("</span> nil <span class="org-builtin">:post-handlers</span>
           '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:add</span> <span class="org-rainbow-delimiters-depth-4">(</span>my/smartparens-pair-newline-and-indent <span class="org-string">"RET"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sp-pair <span class="org-string">"{"</span> nil <span class="org-builtin">:post-handlers</span>
           '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:add</span> <span class="org-rainbow-delimiters-depth-4">(</span>my/smartparens-pair-newline-and-indent <span class="org-string">"RET"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sp-pair <span class="org-string">"["</span> nil <span class="org-builtin">:post-handlers</span>
           '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:add</span> <span class="org-rainbow-delimiters-depth-4">(</span>my/smartparens-pair-newline-and-indent <span class="org-string">"RET"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">smartparens</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . show-smartparens-global-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> smartparens-mode-map
              <span class="org-comment-delimiter">;; </span><span class="org-comment">paredit bindings</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-f"</span> . sp-forward-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-b"</span> . sp-backward-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-u"</span> . sp-backward-up-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-d"</span> . sp-down-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-p"</span> . sp-backward-down-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-n"</span> . sp-up-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-s"</span> . sp-splice-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-&lt;up&gt;"</span> . sp-splice-sexp-killing-backward<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-&lt;down&gt;"</span> . sp-splice-sexp-killing-forward<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-r"</span> . sp-splice-sexp-killing-around<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-("</span> . sp-wrap-round<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-)"</span> . sp-forward-slurp-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-&lt;right&gt;"</span> . sp-forward-slurp-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-}"</span> . sp-forward-barf-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-&lt;left&gt;"</span> . sp-forward-barf-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-("</span> . sp-backward-slurp-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-&lt;left&gt;"</span> . sp-backward-slurp-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-{"</span> . sp-backward-barf-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-&lt;right&gt;"</span> . sp-backward-barf-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-S"</span> . sp-split-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-comment-delimiter">;; </span><span class="org-comment">mine</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-k"</span> . sp-kill-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-w"</span> . sp-copy-sexp<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span> smartparens-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> sp-show-pair-delay <span class="org-highlight-numbers-number">0.2</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">avoid slowness when editing inside a comment for modes with</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">parenthesized comments (e.g. coq)</span>
        sp-show-pair-from-inside nil
        sp-cancel-autoskip-on-backward-movement nil
        sp-highlight-pair-overlay nil
        sp-highlight-wrap-overlay nil
        sp-highlight-wrap-tag-overlay nil<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span> '<span class="org-rainbow-delimiters-depth-3">(</span>emacs-lisp-mode-hook clojure-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
                <span class="org-rainbow-delimiters-depth-3">(</span>smartparens-strict-mode<span class="org-rainbow-delimiters-depth-3">)</span>
                <span class="org-rainbow-delimiters-depth-3">(</span>evil-smartparens-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span> '<span class="org-rainbow-delimiters-depth-3">(</span>prog-mode-hook coq-mode-hook comint-mode-hook css-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
                <span class="org-rainbow-delimiters-depth-3">(</span>smartparens-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">evil-smartparens</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> smartparens
  <span class="org-builtin">:diminish</span> evil-smartparens-mode<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e0cf40" class="outline-3">
<h3 id="org1e0cf40">Documentation &amp; help</h3>
<div class="outline-text-3" id="text-org1e0cf40">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">which-key</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . which-key-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span> which-key-mode<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6a1b28e" class="outline-3">
<h3 id="org6a1b28e">abbrev etc</h3>
<div class="outline-text-3" id="text-org6a1b28e">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dabbrev</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>dabbrev-expand<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't consider punctuation part of word for completion, helps complete</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">qualified symbols</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>prog-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> dabbrev-abbrev-char-regexp <span class="org-string">"\\sw</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\s_</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\sw\\s."</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Testing it out</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">hippie-exp</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-/"</span> . hippie-expand<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> hippie-expand-verbose nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> hippie-expand-try-functions-list
        '<span class="org-rainbow-delimiters-depth-3">(</span>try-expand-dabbrev
          try-expand-dabbrev-all-buffers
          try-expand-dabbrev-from-kill
          try-complete-file-name-partially
          try-complete-file-name
          try-expand-all-abbrevs
          try-expand-list
          try-expand-line
          try-complete-lisp-symbol-partially
          try-complete-lisp-symbol<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org78a4fca" class="outline-3">
<h3 id="org78a4fca">engine-mode</h3>
<div class="outline-text-3" id="text-org78a4fca">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">engine-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . engine-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind-keymap</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"C-x /"</span> . engine-mode-map<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> google
    <span class="org-string">"http://www.google.com/search?ie=utf-8&amp;oe=utf-8&amp;q=%s"</span>
    <span class="org-builtin">:keybinding</span> <span class="org-string">"g"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> google-images
    <span class="org-string">"http://www.google.com/images?hl=en&amp;source=hp&amp;biw=1440&amp;bih=795&amp;gbv=2&amp;aq=f&amp;aqi=&amp;aql=&amp;oq=&amp;q=%s"</span>
    <span class="org-builtin">:keybinding</span> <span class="org-string">"i"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> google-maps
    <span class="org-string">"http://maps.google.com/maps?q=%s"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> wikipedia
    <span class="org-string">"http://www.wikipedia.org/search-redirect.php?language=en&amp;go=Go&amp;search=%s"</span>
    <span class="org-builtin">:keybinding</span> <span class="org-string">"w"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> wiktionary
    <span class="org-string">"https://www.wikipedia.org/search-redirect.php?family=wiktionary&amp;language=en&amp;go=Go&amp;search=%s"</span>
    <span class="org-builtin">:keybinding</span> <span class="org-string">"d"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> wolfram-alpha
    <span class="org-string">"http://www.wolframalpha.com/input/?i=%s"</span>
    <span class="org-builtin">:keybinding</span> <span class="org-string">"m"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> youtube
    <span class="org-string">"http://www.youtube.com/results?aq=f&amp;oq=&amp;search_query=%s"</span>
    <span class="org-builtin">:keybinding</span> <span class="org-string">"v"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> hoogle
    <span class="org-string">"https://hoogle.haskell.org/?hoogle=%s"</span>
    <span class="org-builtin">:keybinding</span> <span class="org-string">"h"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> stackage
    <span class="org-string">"https://www.stackage.org/lts/hoogle?q=%s"</span>
    <span class="org-builtin">:keybinding</span> <span class="org-string">"s"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> haskell-language-extensions
    <span class="org-string">"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-%s"</span>
    <span class="org-builtin">:keybinding</span> <span class="org-string">"#"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> pursuit
    <span class="org-string">"https://pursuit.purescript.org/search?q=%s"</span>
    <span class="org-builtin">:keybinding</span> <span class="org-string">"p"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defengine</span> coq-tactics
    <span class="org-string">"https://coq.inria.fr/refman/proof-engine/tactics.html#coq:tacn.%s"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org061bc09" class="outline-3">
<h3 id="org061bc09">browser</h3>
<div class="outline-text-3" id="text-org061bc09">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">browse-url</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span>
   browse-url-browser-function
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">cond</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-6">(</span>executable-find <span class="org-string">"google-chrome-stable"</span><span class="org-rainbow-delimiters-depth-6">)</span>
              <span class="org-rainbow-delimiters-depth-6">(</span>executable-find <span class="org-string">"google-chrome"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-warning">'browse-url-chrome</span><span class="org-warning"><span class="org-rainbow-delimiters-depth-4">)</span></span>
         <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>executable-find <span class="org-string">"firefox"</span><span class="org-rainbow-delimiters-depth-5">)</span> 'browse-url-firefox<span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>t 'browse-url-default-browser<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4be30a7" class="outline-3">
<h3 id="org4be30a7">math input</h3>
<div class="outline-text-3" id="text-org4be30a7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">xah-math-input</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . global-xah-math-input-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>xah-math-input-change-to-symbol<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span> xah-math-input-mode
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key xah-math-input-keymap <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"S-SPC"</span> <span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key xah-math-input-keymap <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"S-C-SPC"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'xah-math-input-change-to-symbol<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>puthash <span class="org-string">"::"</span> <span class="org-string">"&#8759;"</span> xah-math-input-abrvs<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>puthash <span class="org-string">"bottom"</span> <span class="org-string">"&#8869;"</span> xah-math-input-abrvs<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org118318a" class="outline-3">
<h3 id="org118318a">prettify symbols</h3>
<div class="outline-text-3" id="text-org118318a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">show original symbol when cursor is on it, or right next to it</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> prettify-symbols-unprettify-at-point 'right-edge<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4828b95" class="outline-3">
<h3 id="org4828b95">recentf</h3>
<div class="outline-text-3" id="text-org4828b95">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">recentf</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . recentf-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> recentf-max-saved-items <span class="org-highlight-numbers-number">100</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org04b98c7" class="outline-3">
<h3 id="org04b98c7">hi-lock &amp; symbol overlay</h3>
<div class="outline-text-3" id="text-org04b98c7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">hi-lock</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . global-hi-lock-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> hi-lock-face-defaults
        '<span class="org-rainbow-delimiters-depth-3">(</span>
          <span class="org-string">"hi-black-b"</span>
          <span class="org-string">"hi-red-b"</span>
          <span class="org-string">"hi-green-b"</span>
          <span class="org-string">"hi-blue-b"</span>
          <span class="org-string">"hi-green"</span>
          <span class="org-string">"hi-blue"</span>
          <span class="org-string">"hi-pink"</span>
          <span class="org-string">"hi-yellow"</span>
          <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> hi-lock-auto-select-face t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key hi-lock-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"M-H"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>lookup-key hi-lock-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-x w"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-comment">: find out why I can't just `</span><span class="org-comment"><span class="org-constant">define-key</span></span><span class="org-comment">'</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>substitute-key-definition
   'highlight-regexp 'my/highlight-regexp hi-lock-map<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/highlight-regexp</span> <span class="org-rainbow-delimiters-depth-3">(</span>regexp <span class="org-type">&amp;optional</span> face<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>list
      <span class="org-rainbow-delimiters-depth-5">(</span>hi-lock-regexp-okay
       <span class="org-rainbow-delimiters-depth-6">(</span>read-regexp <span class="org-string">"Regexp to highlight"</span> 'regexp-history-last<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>hi-lock-read-face-name<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-4">(</span>facep face<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> face 'hi-yellow<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> hi-lock-mode <span class="org-rainbow-delimiters-depth-4">(</span>hi-lock-mode <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>hi-lock-set-pattern regexp face nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">symbol-overlay</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>symbol-overlay-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba7af52" class="outline-3">
<h3 id="orgba7af52">highlight keywords in some modes</h3>
<div class="outline-text-3" id="text-orgba7af52">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">my/special-keyword-face</span>
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:inherit</span> font-lock-keyword-face<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Face for highlighting special keywords"</span>
  <span class="org-builtin">:group</span> 'my/faces<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">my/special-comment-keyword-face</span>
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>t <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:inherit</span> font-lock-preprocessor-face<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Face for highlighting special keywords in comments"</span>
  <span class="org-builtin">:group</span> 'my/faces<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/highlight-keyword-in-mode</span> <span class="org-rainbow-delimiters-depth-2">(</span>mode kw <span class="org-type">&amp;optional</span> in-comment face<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>fc <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> face <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> in-comment 'my/special-comment-keyword-face 'my/special-keyword-face<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>str <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"\\&lt;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">%s</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\&gt;"</span> kw<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>font-lock-add-keywords
     mode
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> in-comment
         `<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>,str <span class="org-highlight-numbers-number">1</span> ,`<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">quote</span> ,fc<span class="org-rainbow-delimiters-depth-7">)</span> prepend<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
       `<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>,str . ,`<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">quote</span> ,fc<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/comment-keywords</span>
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"</span><span class="org-string"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-myXspecial-comment-keyword">NOTE</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-myXspecial-comment-keyword">FIXME</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-myXspecial-comment-keyword">WARNING</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-myXspecial-comment-keyword">HACK</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-myXspecial-comment-keyword">XXX</span></span><span class="org-string">"</span> <span class="org-string">"</span><span class="org-string"><span class="org-myXspecial-comment-keyword">DONE</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/highlight-comment-keywords</span> <span class="org-rainbow-delimiters-depth-2">(</span>mode <span class="org-type">&amp;optional</span> face<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>kw my/comment-keywords<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>my/highlight-keyword-in-mode mode kw t face<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dolist</span>
    <span class="org-rainbow-delimiters-depth-2">(</span>mode '<span class="org-rainbow-delimiters-depth-3">(</span>haskell-mode
            literate-haskell-mode
            purescript-mode
            js2-mode
            html-mode
            python-mode
            idris-mode
            agda-mode
            rust-mode
            c-mode
            emacs-lisp-mode
            coq-mode
            markdown-mode
            <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/highlight-comment-keywords mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfd1409a" class="outline-3">
<h3 id="orgfd1409a">alignment</h3>
<div class="outline-text-3" id="text-orgfd1409a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">align</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"C-c \\"</span> . align-regexp<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'align-load-hook
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
              <span class="org-rainbow-delimiters-depth-4">(</span>add-to-list 'align-rules-list
                           '<span class="org-rainbow-delimiters-depth-5">(</span>haskell-types
                             <span class="org-rainbow-delimiters-depth-6">(</span>regexp . <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">\\s-+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">::</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">&#8759;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\s-+"</span><span class="org-rainbow-delimiters-depth-6">)</span>
                             <span class="org-rainbow-delimiters-depth-6">(</span>modes quote <span class="org-rainbow-delimiters-depth-7">(</span>haskell-mode purescript-mode literate-haskell-mode<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-4">(</span>add-to-list 'align-rules-list
                           '<span class="org-rainbow-delimiters-depth-5">(</span>haskell-assignment
                             <span class="org-rainbow-delimiters-depth-6">(</span>regexp . <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">\\s-+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">=\\s-+"</span><span class="org-rainbow-delimiters-depth-6">)</span>
                             <span class="org-rainbow-delimiters-depth-6">(</span>modes quote <span class="org-rainbow-delimiters-depth-7">(</span>haskell-mode purescript-mode literate-haskell-mode<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-4">(</span>add-to-list 'align-rules-list
                           '<span class="org-rainbow-delimiters-depth-5">(</span>haskell-arrows
                             <span class="org-rainbow-delimiters-depth-6">(</span>regexp . <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">\\s-+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">-&gt;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">&#8594;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\s-+"</span><span class="org-rainbow-delimiters-depth-6">)</span>
                             <span class="org-rainbow-delimiters-depth-6">(</span>modes quote <span class="org-rainbow-delimiters-depth-7">(</span>haskell-mode purescript-mode literate-haskell-mode<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
              <span class="org-rainbow-delimiters-depth-4">(</span>add-to-list 'align-rules-list
                           '<span class="org-rainbow-delimiters-depth-5">(</span>haskell-left-arrows
                             <span class="org-rainbow-delimiters-depth-6">(</span>regexp . <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">\\s-+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">&lt;-</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">&#8592;</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\s-+"</span><span class="org-rainbow-delimiters-depth-6">)</span>
                             <span class="org-rainbow-delimiters-depth-6">(</span>modes quote <span class="org-rainbow-delimiters-depth-7">(</span>haskell-mode purescript-mode literate-haskell-mode<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgffcfa56" class="outline-3">
<h3 id="orgffcfa56">temp project roots</h3>
<div class="outline-text-3" id="text-orgffcfa56">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/temp-project-root</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/get-or-set-temp-root</span> <span class="org-rainbow-delimiters-depth-2">(</span>reset<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>reset-root <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> reset my/temp-project-root nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>root
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">or</span> reset
                  <span class="org-rainbow-delimiters-depth-7">(</span>null my/temp-project-root<span class="org-rainbow-delimiters-depth-7">)</span>
                  <span class="org-rainbow-delimiters-depth-7">(</span>not <span class="org-rainbow-delimiters-depth-8">(</span>file-directory-p my/temp-project-root<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
              <span class="org-rainbow-delimiters-depth-6">(</span>read-directory-name <span class="org-string">"Temp root dir: "</span> reset-root<span class="org-rainbow-delimiters-depth-6">)</span>
            my/temp-project-root<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> my/temp-project-root root<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf5ca004" class="outline-3">
<h3 id="orgf5ca004">edit-indirect</h3>
<div class="outline-text-3" id="text-orgf5ca004">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">edit-indirect</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>edit-indirect-region<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"C-c C-'"</span> . my/edit-indirect-region<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'edit-indirect-after-creation-hook 'my/edit-indirect-dedent<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'edit-indirect-before-commit-hook 'my/edit-indirect-indent<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/edit-indirect-region</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span>region-active-p<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-warning">user-error</span> <span class="org-string">"No region selected"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>begin <span class="org-rainbow-delimiters-depth-6">(</span>region-beginning<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>end <span class="org-rainbow-delimiters-depth-6">(</span>region-end<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>mode <span class="org-rainbow-delimiters-depth-6">(</span>my/select-a-major-mode<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>edit-indirect-guess-mode-function
            <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>_parent _beg _end<span class="org-rainbow-delimiters-depth-7">)</span>
              <span class="org-rainbow-delimiters-depth-7">(</span>funcall <span class="org-rainbow-delimiters-depth-8">(</span>intern mode<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>edit-indirect-region begin end 'display-buffer<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/get-buffer-min-leading-spaces</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>buf <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> buffer <span class="org-rainbow-delimiters-depth-6">(</span>current-buffer<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>ind nil<span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> ind <span class="org-rainbow-delimiters-depth-5">(</span>org-get-indentation<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span>not <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-7">(</span>evil-eobp<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>eobp<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-6">(</span>string-match-p <span class="org-string">"\\`\\s-*$"</span> <span class="org-rainbow-delimiters-depth-7">(</span>thing-at-point 'line<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">setq</span> ind <span class="org-rainbow-delimiters-depth-7">(</span>min ind <span class="org-rainbow-delimiters-depth-8">(</span>org-get-indentation<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">ignore-errors</span> <span class="org-rainbow-delimiters-depth-6">(</span>next-line<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    ind<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/edit-indirect-dedent</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>amount <span class="org-rainbow-delimiters-depth-5">(</span>my/get-buffer-min-leading-spaces<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq-local</span> my/edit-indirect-dedented-amount amount<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>indent-rigidly <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>point-max<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>- amount<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/edit-indirect-indent</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span>boundp 'my/edit-indirect-dedented-amount<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>indent-rigidly <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>point-max<span class="org-rainbow-delimiters-depth-5">)</span> my/edit-indirect-dedented-amount<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgce72776" class="outline-3">
<h3 id="orgce72776">use <code>pulse</code> to flash cursor position</h3>
<div class="outline-text-3" id="text-orgce72776">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">prot</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">pulse</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>pulse-momentary-highlight-one-line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"M-ESC"</span> . my/pulse-line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/pulse-line</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Temporarily highlight the current line."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>pulse-delay <span class="org-highlight-numbers-number">.06</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>face <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>facep 'modus-theme-intense-red<span class="org-rainbow-delimiters-depth-7">)</span>
                    'modus-theme-intense-red
                  'hi-red-b<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>pulse-momentary-highlight-one-line <span class="org-rainbow-delimiters-depth-5">(</span>point<span class="org-rainbow-delimiters-depth-5">)</span> face<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgedfcbfc" class="outline-2">
<h2 id="orgedfcbfc"><span class="section-number-2">5</span> term, eshell and comint-mode</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgbf8d8b7" class="outline-3">
<h3 id="orgbf8d8b7">terms</h3>
<div class="outline-text-3" id="text-orgbf8d8b7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">term</span>
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>term-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>define-key term-raw-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"M-o"</span><span class="org-rainbow-delimiters-depth-4">)</span> nil<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>define-key term-raw-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"M-+"</span><span class="org-rainbow-delimiters-depth-4">)</span> nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">automatically close term buffers on EOF</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/term-exec-hook</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>buff <span class="org-rainbow-delimiters-depth-6">(</span>current-buffer<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>proc <span class="org-rainbow-delimiters-depth-6">(</span>get-buffer-process buff<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>set-process-sentinel
       proc
       `<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">(</span>process event<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>string= event <span class="org-string">"finished\n"</span><span class="org-rainbow-delimiters-depth-7">)</span>
              <span class="org-rainbow-delimiters-depth-7">(</span>kill-buffer ,buff<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'term-exec-hook 'my/term-exec-hook<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">comint</span>
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> comint-prompt-read-only t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/comint-clear-buffer</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>comint-buffer-maximum-size <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>comint-truncate-buffer<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'comint-mode-hook
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
              <span class="org-rainbow-delimiters-depth-4">(</span>define-key comint-mode-map <span class="org-rainbow-delimiters-depth-5">(</span>kbd <span class="org-string">"C-l"</span><span class="org-rainbow-delimiters-depth-5">)</span> 'my/comint-clear-buffer<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb50a782" class="outline-3">
<h3 id="orgb50a782">eshell</h3>
<div class="outline-text-3" id="text-orgb50a782">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">em-hist</span> <span class="org-builtin">:after</span> eshell<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">eshell</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>eshell<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-!"</span> . my/eshell-maybe-here<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;f2&gt;"</span> . my/eshell-maybe-here<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-builtin">:map</span> eshell-mode-map
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-l"</span> . my/eshell-clear<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c o"</span> . my/eshell-put-last-output-to-buffer<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c h"</span> . my/eshell-narrow-output-highlight-regexp<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">eshell/clear doesn't work anymore because eshell has its own clear function</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/eshell-clear</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-string">"Clear the eshell buffer."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>eshell-buffer-maximum-lines <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>eshell-truncate-buffer<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">eshell/x</span> 'eshell/exit<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">eshell/e</span> 'find-file<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">eshell/ff</span> 'find-file<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> eshell-destroy-buffer-when-process-dies t
        eshell-history-size <span class="org-highlight-numbers-number">1024</span>
        eshell-prompt-regexp <span class="org-string">"^[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">#$]* [#$] "</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> eshell-prompt-function
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>concat
           <span class="org-rainbow-delimiters-depth-5">(</span>propertize
            <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-8">(</span>p-lst<span class="org-rainbow-delimiters-depth-8">)</span>
               <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-9">(</span>&gt; <span class="org-rainbow-delimiters-depth-1">(</span>length p-lst<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-9">)</span>
                   <span class="org-rainbow-delimiters-depth-9">(</span>concat
                    <span class="org-rainbow-delimiters-depth-1">(</span>mapconcat <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>elm<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>zerop <span class="org-rainbow-delimiters-depth-5">(</span>length elm<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">""</span>
                                               <span class="org-rainbow-delimiters-depth-4">(</span>substring elm <span class="org-highlight-numbers-number">0</span> <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
                               <span class="org-rainbow-delimiters-depth-2">(</span>butlast p-lst <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-2">)</span>
                               <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-1">)</span>
                    <span class="org-string">"/"</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span>mapconcat <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>elm<span class="org-rainbow-delimiters-depth-3">)</span> elm<span class="org-rainbow-delimiters-depth-2">)</span>
                               <span class="org-rainbow-delimiters-depth-2">(</span>last p-lst <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-2">)</span>
                               <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                 <span class="org-rainbow-delimiters-depth-9">(</span>mapconcat <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>elm<span class="org-rainbow-delimiters-depth-2">)</span> elm<span class="org-rainbow-delimiters-depth-1">)</span>
                            p-lst
                            <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
             <span class="org-rainbow-delimiters-depth-7">(</span>split-string <span class="org-rainbow-delimiters-depth-8">(</span>my/eshell-prompt-dir <span class="org-rainbow-delimiters-depth-9">(</span>eshell/pwd<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            'face
            'font-lock-type-face<span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-6">(</span>my/eshell-prompt-git <span class="org-rainbow-delimiters-depth-7">(</span>eshell/pwd<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-string">" "</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>propertize <span class="org-string">"$"</span> 'face 'font-lock-function-name-face<span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>propertize <span class="org-string">" "</span> 'face 'default<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'eshell-exit-hook 'delete-window<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't ask, just save</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>boundp 'eshell-save-history-on-exit<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> eshell-save-history-on-exit t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">For older(?) version</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>boundp 'eshell-ask-to-save-history<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> eshell-ask-to-save-history 'always<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">em-smart</span>
  <span class="org-builtin">:after</span> eshell
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> eshell-where-to-jump 'begin
        eshell-review-quick-commands nil
        eshell-smart-space-goes-to-end t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/eshell-maybe-here</span> <span class="org-rainbow-delimiters-depth-2">(</span>prompt<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Opens up a new shell in the directory associated with the</span>
<span class="org-doc">current buffer's file. The eshell is renamed to match that</span>
<span class="org-doc">directory to make multiple eshell windows easier."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>parent <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> prompt
                     <span class="org-rainbow-delimiters-depth-6">(</span>read-directory-name <span class="org-string">"Open eshell in: "</span><span class="org-rainbow-delimiters-depth-6">)</span>
                   <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-7">)</span>
                       <span class="org-rainbow-delimiters-depth-7">(</span>file-name-directory <span class="org-rainbow-delimiters-depth-8">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                     default-directory<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>height <span class="org-rainbow-delimiters-depth-5">(</span>/ <span class="org-rainbow-delimiters-depth-6">(</span>window-total-height<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>name <span class="org-rainbow-delimiters-depth-5">(</span>car <span class="org-rainbow-delimiters-depth-6">(</span>last <span class="org-rainbow-delimiters-depth-7">(</span>split-string parent <span class="org-string">"/"</span> t<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>bufname <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"*eshell:%s*"</span> name<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>split-window-vertically <span class="org-rainbow-delimiters-depth-4">(</span>- height<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>other-window <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>eshell-banner-message
           <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"eshell in %s\n\n"</span>
                   <span class="org-rainbow-delimiters-depth-7">(</span>propertize <span class="org-rainbow-delimiters-depth-8">(</span>abbreviate-file-name parent<span class="org-rainbow-delimiters-depth-8">)</span>
                               'face
                               'font-lock-keyword-face<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>eshell <span class="org-builtin">:new</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>rename-buffer <span class="org-rainbow-delimiters-depth-4">(</span>generate-new-buffer-name bufname<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(insert "ls")</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(eshell-send-input)</span>
    <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">stolen from prot</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/eshell-narrow-output-highlight-regexp</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>regexp <span class="org-rainbow-delimiters-depth-5">(</span>read-regexp <span class="org-string">"Regexp to highlight"</span> <span class="org-string">"nothing"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>narrow-to-region <span class="org-rainbow-delimiters-depth-4">(</span>eshell-beginning-of-output<span class="org-rainbow-delimiters-depth-4">)</span>
                      <span class="org-rainbow-delimiters-depth-4">(</span>eshell-end-of-output<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-min<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>highlight-regexp regexp 'hi-black-b<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">stolen from prot</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/eshell-put-last-output-to-buffer</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Produce a buffer with output of last `</span><span class="org-doc"><span class="org-constant">eshell</span></span><span class="org-doc">' command."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>eshell-output <span class="org-rainbow-delimiters-depth-5">(</span>kill-region <span class="org-rainbow-delimiters-depth-6">(</span>eshell-beginning-of-output<span class="org-rainbow-delimiters-depth-6">)</span>
                                    <span class="org-rainbow-delimiters-depth-6">(</span>eshell-end-of-output<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-4">(</span>get-buffer-create  <span class="org-string">"*last-eshell-output*"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>erase-buffer<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>yank<span class="org-rainbow-delimiters-depth-4">)</span>           <span class="org-comment-delimiter">; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-comment"> do it with `</span><span class="org-comment"><span class="org-constant">insert</span></span><span class="org-comment">' and `</span><span class="org-comment"><span class="org-constant">delete-region</span></span><span class="org-comment">'?</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>switch-to-buffer-other-window <span class="org-rainbow-delimiters-depth-5">(</span>current-buffer<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/eshell-prompt-dir</span> <span class="org-rainbow-delimiters-depth-2">(</span>pwd<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>home <span class="org-rainbow-delimiters-depth-5">(</span>expand-file-name <span class="org-rainbow-delimiters-depth-6">(</span>getenv <span class="org-string">"HOME"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>home-len <span class="org-rainbow-delimiters-depth-5">(</span>length home<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span>
         <span class="org-rainbow-delimiters-depth-5">(</span>&gt;= <span class="org-rainbow-delimiters-depth-6">(</span>length pwd<span class="org-rainbow-delimiters-depth-6">)</span> home-len<span class="org-rainbow-delimiters-depth-5">)</span>
         <span class="org-rainbow-delimiters-depth-5">(</span>equal home <span class="org-rainbow-delimiters-depth-6">(</span>substring pwd <span class="org-highlight-numbers-number">0</span> home-len<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>concat <span class="org-string">"~"</span> <span class="org-rainbow-delimiters-depth-5">(</span>substring pwd home-len<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      pwd<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/eshell-prompt-git</span> <span class="org-rainbow-delimiters-depth-2">(</span>cwd<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Returns current git branch as a string, or the empty string if</span>
<span class="org-doc">CWD is not in a git repo (or the git command is not found)."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-4">(</span>eshell-search-path <span class="org-string">"git"</span><span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-rainbow-delimiters-depth-4">(</span>locate-dominating-file cwd <span class="org-string">".git"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>git-output
           <span class="org-rainbow-delimiters-depth-6">(</span>shell-command-to-string
            <span class="org-rainbow-delimiters-depth-7">(</span>concat <span class="org-string">"cd "</span>
                    cwd
                    <span class="org-string">" &amp;&amp; git branch | grep '\\*' | sed -e 's/^\\* //'"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>concat
       <span class="org-rainbow-delimiters-depth-5">(</span>propertize
        <span class="org-rainbow-delimiters-depth-6">(</span>concat <span class="org-string">"["</span>
                <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-8">(</span>&gt; <span class="org-rainbow-delimiters-depth-9">(</span>length git-output<span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-8">)</span>
                    <span class="org-rainbow-delimiters-depth-8">(</span>substring git-output <span class="org-highlight-numbers-number">0</span> <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-8">)</span>
                  <span class="org-string">"(no branch)"</span><span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-rainbow-delimiters-depth-6">)</span>
        'face 'font-lock-string-face<span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span>my/git-collect-status cwd<span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span>propertize <span class="org-string">"]"</span> 'face 'font-lock-string-face<span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">https://github.com/xuchunyang/eshell-git-prompt/blob/master/eshell-git-prompt.el</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/git-collect-status</span> <span class="org-rainbow-delimiters-depth-2">(</span>cwd<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-4">(</span>eshell-search-path <span class="org-string">"git"</span><span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-rainbow-delimiters-depth-4">(</span>locate-dominating-file cwd <span class="org-string">".git"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>git-output
           <span class="org-rainbow-delimiters-depth-6">(</span>split-string
            <span class="org-rainbow-delimiters-depth-7">(</span>shell-command-to-string
             <span class="org-rainbow-delimiters-depth-8">(</span>concat <span class="org-string">"cd "</span>
                     cwd
                     <span class="org-string">" &amp;&amp; git status --porcelain"</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
            <span class="org-string">"\n"</span> t<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>untracked <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>modified <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>modified-updated <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>new-added <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>deleted <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>deleted-updated <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>renamed-updated <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>commits-ahead <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span>
          <span class="org-rainbow-delimiters-depth-5">(</span>commits-behind <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span>
          <span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-5">(</span>x git-output<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">pcase</span> <span class="org-rainbow-delimiters-depth-6">(</span>substring x <span class="org-highlight-numbers-number">0</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"??"</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">cl-incf</span> untracked<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"MM"</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">progn</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">cl-incf</span> modified<span class="org-rainbow-delimiters-depth-8">)</span>
                       <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">cl-incf</span> modified-updated<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">" M"</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">cl-incf</span> modified<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"M "</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">cl-incf</span> modified-updated<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"A "</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">cl-incf</span> new-added<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">" D"</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">cl-incf</span> deleted<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"D "</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">cl-incf</span> deleted-updated<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"R "</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">cl-incf</span> renamed-updated<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>concat
       <span class="org-rainbow-delimiters-depth-5">(</span>propertize <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>&gt; <span class="org-rainbow-delimiters-depth-8">(</span>+ untracked deleted<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"&#8226;"</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-6">)</span> 'face '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"salmon3"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span>propertize <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>&gt; modified <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"&#8226;"</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-6">)</span> 'face '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"goldenrod3"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span>propertize <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>&gt; modified-updated <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"&#8226;"</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-6">)</span> 'face '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"SeaGreen4"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org336d685" class="outline-2">
<h2 id="org336d685"><span class="section-number-2">6</span> UI</h2>
<div class="outline-text-2" id="text-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">highlight numbers</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">highlight-numbers</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>prog-mode haskell-cabal-mode css-mode<span class="org-rainbow-delimiters-depth-3">)</span> . highlight-numbers-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">show column in modeline</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> column-number-mode t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">disable annoying stuff</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> ring-bell-function 'ignore
      inhibit-startup-message t
      inhibit-splash-screen t
      initial-scratch-message nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>menu-bar-mode <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>scroll-bar-mode <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>set-window-scroll-bars <span class="org-rainbow-delimiters-depth-2">(</span>minibuffer-window<span class="org-rainbow-delimiters-depth-2">)</span> nil nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>tool-bar-mode <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">linum</span>
  <span class="org-builtin">:if</span> <span class="org-rainbow-delimiters-depth-2">(</span>&lt; emacs-major-version <span class="org-highlight-numbers-number">26</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> linum-format 'dynamic<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">hl-line</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">:hook (prog-mode . hl-line-mode)</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>hl-line-mode global-hl-line-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> hl-line-sticky-flag nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">display-fill-column-indicator</span>
  <span class="org-builtin">:if</span> <span class="org-rainbow-delimiters-depth-2">(</span>&gt;= emacs-major-version <span class="org-highlight-numbers-number">27</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>display-fill-column-indicator-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>python-mode markdown-mode<span class="org-rainbow-delimiters-depth-3">)</span> . display-fill-column-indicator-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>

<div id="outline-container-orge18972a" class="outline-3">
<h3 id="orge18972a">highlight trailing whitespace</h3>
<div class="outline-text-3" id="text-orge18972a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">whitespace</span>
  <span class="org-builtin">:diminish</span> whitespace-mode
  <span class="org-builtin">:diminish</span> global-whitespace-mode
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>prog-mode . whitespace-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> whitespace-line-column <span class="org-highlight-numbers-number">80</span>
        whitespace-style '<span class="org-rainbow-delimiters-depth-3">(</span>face trailing<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc6e877c" class="outline-2">
<h2 id="orgc6e877c"><span class="section-number-2">7</span> Theme</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org6f47688" class="outline-3">
<h3 id="org6f47688">theme loading</h3>
<div class="outline-text-3" id="text-org6f47688">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-2">(</span>&gt;= emacs-major-version <span class="org-highlight-numbers-number">27</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> custom--inhibit-theme-enable nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/avail-themes</span> '<span class="org-rainbow-delimiters-depth-2">(</span>wombat<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/current-theme</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/after-set-theme-hook</span> nil
  <span class="org-doc">"Hook called after setting a theme"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/set-theme</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> theme<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>theme <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> theme <span class="org-rainbow-delimiters-depth-6">(</span>elt my/avail-themes my/current-theme<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>mapc 'disable-theme custom-enabled-themes<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>functionp theme<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>funcall theme<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>load-theme theme t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>run-hooks 'my/after-set-theme-hook<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/toggle-theme</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>next-theme <span class="org-rainbow-delimiters-depth-5">(</span>mod <span class="org-rainbow-delimiters-depth-6">(</span>1+ my/current-theme<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>length my/avail-themes<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>theme <span class="org-rainbow-delimiters-depth-5">(</span>elt my/avail-themes next-theme<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> my/current-theme next-theme<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>my/set-theme<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/refresh-theme</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/set-theme<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd2e66fe" class="outline-3">
<h3 id="orgd2e66fe">modus themes</h3>
<div class="outline-text-3" id="text-orgd2e66fe">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">color</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>color-darken-name color-lighten-name<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">modus-vivendi-theme</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> modus-vivendi-theme-visible-fringes t
        modus-vivendi-theme-distinct-org-blocks t
        modus-vivendi-theme-rainbow-headings t
        modus-vivendi-theme-scale-headings t
        modus-vivendi-theme-scale-5 <span class="org-highlight-numbers-number">1.3</span>
        modus-vivendi-theme-scale-4 <span class="org-highlight-numbers-number">1.2</span>
        modus-vivendi-theme-scale-3 <span class="org-highlight-numbers-number">1.0</span>
        modus-vivendi-theme-scale-2 <span class="org-highlight-numbers-number">1.0</span>
        modus-vivendi-theme-scale-1 <span class="org-highlight-numbers-number">1.0</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/modus-vivendi-theme-alt-colors</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/modus-vivendi-theme-haskell-distinct-constructor</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/modus-vivendi-theme</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>load-theme 'modus-vivendi t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">modus-vivendi-theme-with-color-variables</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>hl-line <span class="org-rainbow-delimiters-depth-7">(</span>color-darken-name bg-active <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span>type
              <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> my/modus-vivendi-theme-alt-colors
                  cyan-refine-fg
                magenta-alt<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span>haskell-constructor
              <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> my/modus-vivendi-theme-haskell-distinct-constructor
                  `<span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:foreground</span> ,<span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">if</span> my/modus-vivendi-theme-alt-colors cyan-refine-fg cyan-alt<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                `<span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:inherit</span> haskell-type-face<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>custom-theme-set-faces
         'modus-vivendi
         `<span class="org-rainbow-delimiters-depth-6">(</span>default <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:background</span> <span class="org-string">"#0a0a0a"</span> <span class="org-builtin">:foreground</span> <span class="org-string">"#eaeaea"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>hl-line <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:background</span> ,hl-line<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>region <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:background</span> ,cyan-subtle-bg<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>fringe <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:background</span> ,bg-inactive <span class="org-builtin">:foreground</span> ,fg-inactive<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>secondary-selection <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> modus-theme-refine-green<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>fill-column-indicator <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> ,fg-window-divider-inner<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>hi-green-b <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> modus-theme-refine-green <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>hi-blue-b<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> modus-theme-refine-blue <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>hi-red-b <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> modus-theme-refine-red <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>hi-black-b <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> modus-theme-refine-yellow <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-fringe-info <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"DeepSkyBlue2"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-fringe-warning <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"orange1"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-fringe-error <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"#fb4933"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-info <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:underline</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:color</span> <span class="org-string">"DeepSkyBlue2"</span> <span class="org-builtin">:style</span> wave<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-warning <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:underline</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:color</span> <span class="org-string">"orange1"</span> <span class="org-builtin">:style</span> wave<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-error <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:underline</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:color</span> <span class="org-string">"#fb4933"</span> <span class="org-builtin">:style</span> wave<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>

         `<span class="org-rainbow-delimiters-depth-6">(</span>org-block <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"#dadada"</span> <span class="org-builtin">:background</span> <span class="org-string">"#112024"</span> <span class="org-builtin">:extend</span> t<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>org-block-begin-line <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"#0798db"</span> <span class="org-builtin">:background</span> <span class="org-string">"#003347"</span> <span class="org-builtin">:extend</span> t<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>org-block-end-line <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> org-block-begin-line<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>org-ellipsis <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:underline</span> t<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>org-roam-link <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> modus-theme-subtle-cyan <span class="org-builtin">:foreground</span> ,cyan-nuanced <span class="org-builtin">:underline</span> t<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>font-lock-type-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> ,type<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">`(font-lock-type-face ((t (:foreground ,cyan-alt))))</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">`(font-lock-type-face ((t (:foreground ,cyan-nuanced))))</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>font-lock-string-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> ,blue<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>font-lock-preprocessor-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> ,red<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>

         <span class="org-comment-delimiter">;; </span><span class="org-comment">defaults</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">`(font-lock-variable-name-face ((t (:foreground ,cyan))))</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">`(font-lock-function-name-face ((t (:foreground ,magenta))))</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">`(font-lock-keyword-face ((t (:foreground ,magenta-alt-other))))</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">`(font-lock-constant-face ((t (:foreground ,blue-alt-other))))</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">`(font-lock-builtin-face ((t (:foreground ,magenta-alt))))</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">`(font-lock-doc-face ((t (:foreground ,fg-special-cold))))</span>

         `<span class="org-rainbow-delimiters-depth-6">(</span>highlight-numbers-number <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-string-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>

         `<span class="org-rainbow-delimiters-depth-6">(</span>haskell-pragma-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-constant-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>haskell-constructor-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t ,haskell-constructor<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>

         `<span class="org-rainbow-delimiters-depth-6">(</span>coq-solve-tactics-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> ,red<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>coq-cheat-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> hi-red-b<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>coq-button-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> hi-green-b<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>coq-button-face-pressed <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> hi-green-b <span class="org-builtin">:background</span> <span class="org-string">"grey43"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>

         `<span class="org-rainbow-delimiters-depth-6">(</span>proof-tactics-name-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> ,blue-alt-other<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>proof-error-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> hi-red-b<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>proof-locked-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:background</span> ,<span class="org-rainbow-delimiters-depth-1">(</span>color-darken-name magenta-subtle-bg <span class="org-highlight-numbers-number">10</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>proof-queue-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:background</span> ,<span class="org-rainbow-delimiters-depth-1">(</span>color-darken-name red-subtle-bg <span class="org-highlight-numbers-number">10</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>proof-warning-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:background</span> ,<span class="org-rainbow-delimiters-depth-1">(</span>color-darken-name yellow-subtle-bg <span class="org-highlight-numbers-number">5</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>proof-declaration-name-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-function-name-face <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>

         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-block <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-doc-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-definition <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-function-name-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-directive <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-function-name-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-external <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-type-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-literal <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> ,fg-special-mild<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-reference <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-variable-name-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-transition <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-preprocessor-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-adornment <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-constant-face <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-1 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-adornment<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-2 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-level-1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-3 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-level-1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-4 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-level-1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-5 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-level-1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-6 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-level-1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         <span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">modus-operandi-theme</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> modus-operandi-theme-visible-fringes t
        modus-operandi-theme-distinct-org-blocks t
        modus-operandi-theme-rainbow-headings t
        modus-operandi-theme-scale-headings t
        modus-operandi-theme-scale-5 <span class="org-highlight-numbers-number">1.3</span>
        modus-operandi-theme-scale-4 <span class="org-highlight-numbers-number">1.2</span>
        modus-operandi-theme-scale-3 <span class="org-highlight-numbers-number">1.0</span>
        modus-operandi-theme-scale-2 <span class="org-highlight-numbers-number">1.0</span>
        modus-operandi-theme-scale-1 <span class="org-highlight-numbers-number">1.0</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/modus-operandi-theme-haskell-distinct-constructor</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/modus-operandi-theme</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>load-theme 'modus-operandi t<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>modus-operandi-theme-with-color-variables
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>cyan-more-subtle-bg <span class="org-rainbow-delimiters-depth-7">(</span>color-lighten-name cyan-subtle-bg <span class="org-highlight-numbers-number">5</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>cyan-more-intense <span class="org-rainbow-delimiters-depth-7">(</span>color-darken-name cyan-intense <span class="org-highlight-numbers-number">5</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>haskell-constructor
             <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> my/modus-operandi-theme-haskell-distinct-constructor
                 'font-lock-variable-name-face
               'haskell-type-face<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>haskell-operator
             <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> my/modus-operandi-theme-haskell-distinct-constructor
                 'font-lock-constant-face
               'font-lock-variable-name-face<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>custom-theme-set-faces
         'modus-operandi
         `<span class="org-rainbow-delimiters-depth-6">(</span>region <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:background</span> ,bg-special-mild<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>secondary-selection <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> modus-theme-special-mild<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>fill-column-indicator <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> ,bg-tab-bar<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>hi-green-b <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> modus-theme-refine-green <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>hi-blue-b <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> modus-theme-refine-blue <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>hi-red-b <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> modus-theme-refine-red <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>hi-black-b <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> modus-theme-refine-yellow <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-fringe-info <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"DeepSkyBlue2"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-fringe-warning <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"orange1"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-fringe-error <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"#fb4933"</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-info <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:underline</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:color</span> <span class="org-string">"DeepSkyBlue2"</span> <span class="org-builtin">:style</span> wave<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-warning <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:underline</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:color</span> <span class="org-string">"orange1"</span> <span class="org-builtin">:style</span> wave<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>flycheck-error <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:underline</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:color</span> <span class="org-string">"#fb4933"</span> <span class="org-builtin">:style</span> wave<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>

         `<span class="org-rainbow-delimiters-depth-6">(</span>org-ellipsis <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:underline</span> t<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>org-roam-link <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:background</span> ,cyan-more-subtle-bg <span class="org-builtin">:foreground</span> ,cyan-more-intense <span class="org-builtin">:underline</span> t<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>

         `<span class="org-rainbow-delimiters-depth-6">(</span>haskell-pragma-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-variable-name-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>haskell-constructor-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> ,haskell-constructor<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>haskell-operator-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> ,haskell-operator<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>

         `<span class="org-rainbow-delimiters-depth-6">(</span>coq-cheat-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> hi-red-b<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>

         `<span class="org-rainbow-delimiters-depth-6">(</span>markdown-pre-face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-variable-name-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>

         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-block <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-doc-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-definition <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-function-name-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-directive <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-builtin-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-external <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-type-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-literal <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-variable-name-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-reference <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-keyword-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-transition <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-preprocessor-face<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-adornment <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> font-lock-constant-face <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-1 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-adornment<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-2 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-level-1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-3 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-level-1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-4 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-level-1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-5 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-level-1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         `<span class="org-rainbow-delimiters-depth-6">(</span>rst-level-6 <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>t <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-builtin">:inherit</span> rst-level-1<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
         <span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdc4b749" class="outline-2">
<h2 id="orgdc4b749"><span class="section-number-2">8</span> Font</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/avail-fonts</span> '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Monospace"</span> <span class="org-highlight-numbers-number">12</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/current-font</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/current-font-size</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/font-size-step</span> <span class="org-highlight-numbers-number">0.5</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/after-set-font-hook</span> nil
  <span class="org-doc">"Hook called after updating fonts"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/set-font</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> spec<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>spec <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>null spec<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>elt my/avail-fonts my/current-font<span class="org-rainbow-delimiters-depth-6">)</span> spec<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>name <span class="org-rainbow-delimiters-depth-5">(</span>car spec<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>size <span class="org-rainbow-delimiters-depth-5">(</span>cadr spec<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>spacing <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-6">(</span>caddr spec<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>set-face-font 'default <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"%s-%s"</span> name size<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq-default</span> line-spacing spacing<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> line-spacing spacing<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>run-hooks 'my/after-set-font-hook<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/toggle-font</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>next-font <span class="org-rainbow-delimiters-depth-5">(</span>mod <span class="org-rainbow-delimiters-depth-6">(</span>1+ my/current-font<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-rainbow-delimiters-depth-6">(</span>length my/avail-fonts<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> my/current-font-size nil<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>my/set-font <span class="org-rainbow-delimiters-depth-4">(</span>elt my/avail-fonts next-font<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> my/current-font next-font<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/refresh-font</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> my/current-font-size nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/set-font <span class="org-rainbow-delimiters-depth-3">(</span>elt my/avail-fonts my/current-font<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">NOTE</span></span><span class="org-comment">: trying this out</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/change-font-size</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> dec<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>spec <span class="org-rainbow-delimiters-depth-5">(</span>elt my/avail-fonts my/current-font<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>name <span class="org-rainbow-delimiters-depth-5">(</span>car spec<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>size <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> my/current-font-size <span class="org-rainbow-delimiters-depth-6">(</span>cadr spec<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> my/current-font-size
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> dec
              <span class="org-rainbow-delimiters-depth-5">(</span>- size my/font-size-step<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>+ size my/font-size-step<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>my/set-font <span class="org-rainbow-delimiters-depth-4">(</span>list name my/current-font-size<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-+"</span><span class="org-rainbow-delimiters-depth-2">)</span> #'<span class="org-rainbow-delimiters-depth-2">(</span>lambda <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>my/change-font-size<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C--"</span><span class="org-rainbow-delimiters-depth-2">)</span> #'<span class="org-rainbow-delimiters-depth-2">(</span>lambda <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>my/change-font-size <span class="org-builtin">:dec</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-x C-0"</span><span class="org-rainbow-delimiters-depth-2">)</span> #'my/refresh-font<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">size &amp; scaling</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(setq text-scale-mode-step 1.05)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(define-key global-map (kbd "C-+") 'text-scale-increase)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(define-key global-map (kbd "C--") 'text-scale-decrease)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga9bd889" class="outline-2">
<h2 id="orga9bd889"><span class="section-number-2">9</span> VCS</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-orge80c26f" class="outline-3">
<h3 id="orge80c26f">vc</h3>
<div class="outline-text-3" id="text-orge80c26f">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">vc</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x v p"</span> . my/vc-project<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x v d"</span> . vc-diff<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">prot</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/vc-project</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>vc-dir <span class="org-rainbow-delimiters-depth-4">(</span>vc-root-dir<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key diff-mode-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"M-o"</span><span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">vc-git</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> vc-git-print-log-follow t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">vc-annotate</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x v a"</span> . vc-annotate<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-builtin">:map</span> vc-annotate-mode-map
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"t"</span> . vc-annotate-toggle-annotation-visibility<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> vc-annotate-display-mode 'scale<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org711801c" class="outline-3">
<h3 id="org711801c">magit</h3>
<div class="outline-text-3" id="text-org711801c">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">magit</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>magit-status
             magit-dispatch-popup
             magit-blame-addition
             magit-log-buffer-file<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x g"</span> . magit-status<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x M-g"</span> . magit-dispatch-popup<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">magb</span> 'magit-blame-addition<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">gl</span>   'magit-log-buffer-file<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">magl</span> 'magit-log-buffer-file<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'magit-blame-mode-hook
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
              <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-6">(</span>not <span class="org-rainbow-delimiters-depth-7">(</span>boundp 'magit-blame-mode<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                      magit-blame-mode<span class="org-rainbow-delimiters-depth-5">)</span>
                  <span class="org-rainbow-delimiters-depth-5">(</span>evil-emacs-state<span class="org-rainbow-delimiters-depth-5">)</span>
                <span class="org-rainbow-delimiters-depth-5">(</span>evil-exit-emacs-state<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">magit-todos</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> magit
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>magit-todos-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf42710e" class="outline-3">
<h3 id="orgf42710e">git-timemachine</h3>
<div class="outline-text-3" id="text-orgf42710e">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">git-timemachine</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>git-timemachine<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook
   'git-timemachine-mode-hook
   '<span class="org-rainbow-delimiters-depth-3">(</span>lambda <span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-rainbow-delimiters-depth-4">(</span>evil-local-mode <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org55473e2" class="outline-3">
<h3 id="org55473e2">diff-hl &amp; git-gutter+</h3>
<div class="outline-text-3" id="text-org55473e2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">diff-hl</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:if</span> is-gui
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>after-init . global-diff-hl-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span>dired-mode . diff-hl-dired-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">https://github.com/dgutov/diff-hl#magit</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'magit-post-refresh-hook 'diff-hl-magit-post-refresh<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">git-gutter+</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:unless</span> is-gui
  <span class="org-builtin">:diminish</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . global-git-gutter+-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge011f9d" class="outline-3">
<h3 id="orge011f9d">Helpers</h3>
<div class="outline-text-3" id="text-orge011f9d">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/git-blame-current-line</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Runs `git blame` on the current line and</span>
<span class="org-doc">   adds the commit id to the kill ring"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>line-number <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">save-excursion</span>
                        <span class="org-rainbow-delimiters-depth-6">(</span>goto-char <span class="org-rainbow-delimiters-depth-7">(</span>point-at-bol<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                        <span class="org-rainbow-delimiters-depth-6">(</span>+ <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-7">(</span>count-lines <span class="org-highlight-numbers-number">1</span> <span class="org-rainbow-delimiters-depth-8">(</span>point<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>line-arg <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"%d,%d"</span> line-number line-number<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>commit-buf <span class="org-rainbow-delimiters-depth-5">(</span>generate-new-buffer <span class="org-string">"*git-blame-line-commit*"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>call-process <span class="org-string">"git"</span> nil commit-buf nil
                  <span class="org-string">"blame"</span> <span class="org-rainbow-delimiters-depth-4">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-string">"-L"</span> line-arg<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>commit-id <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">with-current-buffer</span> commit-buf
                        <span class="org-rainbow-delimiters-depth-7">(</span>buffer-substring <span class="org-highlight-numbers-number">1</span> <span class="org-highlight-numbers-number">9</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>log-buf <span class="org-rainbow-delimiters-depth-6">(</span>generate-new-buffer <span class="org-string">"*git-blame-line-log*"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>kill-new commit-id<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>call-process <span class="org-string">"git"</span> nil log-buf nil
                    <span class="org-string">"log"</span> <span class="org-string">"-1"</span> <span class="org-string">"--pretty=%h   %an   %s"</span> commit-id<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">with-current-buffer</span> log-buf
        <span class="org-rainbow-delimiters-depth-5">(</span>message <span class="org-string">"Line %d: %s"</span>
                 line-number
                 <span class="org-rainbow-delimiters-depth-6">(</span>replace-regexp-in-string <span class="org-string">"\n\\'"</span> <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-7">(</span>buffer-string<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>kill-buffer log-buf<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>kill-buffer commit-buf<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-L"</span><span class="org-rainbow-delimiters-depth-2">)</span> #'my/git-blame-current-line<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga053c83" class="outline-2">
<h2 id="orga053c83"><span class="section-number-2">10</span> keybindings</h2>
<div class="outline-text-2" id="text-10">
</div>
<div id="outline-container-org66231cc" class="outline-3">
<h3 id="org66231cc">keybind to command mapping</h3>
<div class="outline-text-3" id="text-org66231cc">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> my/leader-keys
      '<span class="org-rainbow-delimiters-depth-2">(</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"SPC"</span> display-fill-column-indicator-mode<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"a"</span> align-regexp<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">dired</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dn"</span> find-name-dired<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dg"</span> find-grep-dired<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dv"</span> my/git-grep-dired<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">errors</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"el"</span> my/toggle-flycheck-error-list<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">browsing/files</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"fc"</span> my/copy-file-path<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"fd"</span> pwd<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"fp"</span> my/try-open-dominating-file<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"fs"</span> my/create-scratch-buffer-with-mode<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">git/vc</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"gb"</span> my/git-blame-current-line<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"h"</span>  help<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">insert</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"iu"</span> counsel-unicode-char<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">project</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"pa"</span> counsel-projectile-ag<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"pr"</span> counsel-projectile-rg<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ps"</span> my/rg-project-or-ask<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"pt"</span> my/counsel-ag-todos-global<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">show/display</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sd"</span> pwd<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">find/search</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sa"</span> ag<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sr"</span> rg<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sca"</span> counsel-ag<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"scr"</span> counsel-rg<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sr"</span> rgrep<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">toggle</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"t8"</span> display-fill-column-indicator-mode<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"tc"</span> global-company-mode<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"tf"</span> my/toggle-font<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"tg"</span> global-diff-hl-mode<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"tl"</span> my/line-numbers<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"to"</span> symbol-overlay-mode<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"th"</span> hl-line-mode<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ts"</span> flycheck-mode<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"tt"</span> my/toggle-theme<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"tw"</span> toggle-truncate-lines<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">ui</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"uh"</span> rainbow-mode<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"um"</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">()</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>call-interactively 'tool-bar-mode<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>call-interactively 'menu-bar-mode<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"up"</span> rainbow-delimiters-mode<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">windows</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"wf"</span> my/window-fixed<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"wd"</span> my/window-dedicated<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-comment-delimiter">;; </span><span class="org-comment">theme</span>
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Ts"</span> counsel-load-theme<span class="org-rainbow-delimiters-depth-3">)</span>

        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Q"</span> evil-local-mode<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org454ada4" class="outline-3">
<h3 id="org454ada4">setup keybindings</h3>
<div class="outline-text-3" id="text-org454ada4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>define-prefix-command 'my/leader-map<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">(define-key ctl-x-map "m" 'my/leader-map)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-prefix-command 'my/leader-map<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c m"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'my/leader-map<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-2">(</span>i my/leader-keys<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>k <span class="org-rainbow-delimiters-depth-5">(</span>car i<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>f <span class="org-rainbow-delimiters-depth-5">(</span>cadr i<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key my/leader-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd k<span class="org-rainbow-delimiters-depth-4">)</span> f<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-prefix-command 'my/major-mode-map<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> is-gui
    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">progn</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">distinguish `C-m` from `RET`</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>define-key input-decode-map <span class="org-rainbow-delimiters-depth-4">[</span>?\C-m<span class="org-rainbow-delimiters-depth-4">]</span> <span class="org-rainbow-delimiters-depth-4">[</span>C-m<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">distinguish `C-i` from `TAB`</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">(define-key input-decode-map [?\C-i] [C-i])</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>global-set-key <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c &lt;C-m&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'my/leader-map<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> my/major-mode-map-key <span class="org-string">"&lt;C-m&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> my/major-mode-map-key <span class="org-string">"C-c m m"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">on hold</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(defun my/define-major-mode-keys (hook &amp;rest combinations)</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">"Bind all pairs of (key . function) under `</span><span class="org-comment"><span class="org-constant">my/major-mode-map-key</span></span><span class="org-comment">'</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">The keys are bound after `</span><span class="org-comment"><span class="org-constant">hook</span></span><span class="org-comment">'."</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">(add-hook</span>
<span class="org-comment-delimiter">;;    </span><span class="org-comment">hook</span>
<span class="org-comment-delimiter">;;    </span><span class="org-comment">`(lambda ()</span>
<span class="org-comment-delimiter">;;       </span><span class="org-comment">(let ((map (make-sparse-keymap)))</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(local-set-key (kbd ,my/major-mode-map-key) map)</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(dolist (comb (quote ,combinations))</span>
<span class="org-comment-delimiter">;;           </span><span class="org-comment">(define-key map (kbd (car comb)) (cdr comb)))))))</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/define-major-mode-key</span> <span class="org-rainbow-delimiters-depth-2">(</span>mode key func<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>map-symbol <span class="org-rainbow-delimiters-depth-5">(</span>intern <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"my/%s-map"</span> mode<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>hook <span class="org-rainbow-delimiters-depth-5">(</span>intern <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"%s-hook"</span> mode<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>map
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>boundp map-symbol<span class="org-rainbow-delimiters-depth-6">)</span>
              <span class="org-rainbow-delimiters-depth-6">(</span>symbol-value map-symbol<span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">progn</span>
              <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-9">(</span>map- <span class="org-rainbow-delimiters-depth-1">(</span>make-sparse-keymap<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-rainbow-delimiters-depth-8">(</span>add-hook
                 hook
                 `<span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-1">()</span>
                    <span class="org-rainbow-delimiters-depth-1">(</span>local-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd ,my/major-mode-map-key<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">quote</span> ,map-<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-rainbow-delimiters-depth-8">(</span>set <span class="org-rainbow-delimiters-depth-9">(</span>intern <span class="org-rainbow-delimiters-depth-1">(</span>format <span class="org-string">"my/%s-map"</span> mode<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span> map-<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>define-key map <span class="org-rainbow-delimiters-depth-4">(</span>kbd key<span class="org-rainbow-delimiters-depth-4">)</span> func<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>evil-leader/set-key-for-mode mode <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"m %s"</span> key<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> func<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> is-gui
    <span class="org-rainbow-delimiters-depth-2">(</span>global-set-key <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"&lt;C-m&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'my/major-mode-map<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>global-set-key <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-c m m"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'my/major-mode-map<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org44f1f84" class="outline-2">
<h2 id="org44f1f84"><span class="section-number-2">11</span> evil-mode</h2>
<div class="outline-text-2" id="text-11">
</div>
<div id="outline-container-orga43976d" class="outline-3">
<h3 id="orga43976d">evil-mode setup</h3>
<div class="outline-text-3" id="text-orga43976d">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">evil-leader</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>evil-local-mode . evil-leader-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(global-evil-leader-mode)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>evil-leader/set-leader <span class="org-string">"&lt;SPC&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>i my/leader-keys<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>k <span class="org-rainbow-delimiters-depth-6">(</span>car i<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>f <span class="org-rainbow-delimiters-depth-6">(</span>cadr i<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>evil-leader/set-key k f<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">evil-visualstar</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>evil-local-mode . evil-visualstar-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:ensure</span> t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">evil</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>prog-mode
          text-mode
          haskell-cabal-mode
          bibtex-mode
          coq-mode easycrypt-mode phox-mode
          conf-unix-mode
          conf-colon-mode
          conf-space-mode
          conf-windows-mode
          conf-toml-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         . evil-local-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> evil-want-C-i-jump nil
        evil-intercept-esc t
        evil-respect-visual-line-mode t
        evil-mode-line-format '<span class="org-rainbow-delimiters-depth-3">(</span>before . mode-line-front-space<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq evil-move-cursor-back nil)  ;; works better with lisp navigation</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/make-emacs-mode</span> <span class="org-rainbow-delimiters-depth-3">(</span>mode<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Make `</span><span class="org-doc"><span class="org-constant">mode</span></span><span class="org-doc">' use emacs keybindings."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>delete mode evil-insert-state-modes<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>add-to-list 'evil-emacs-state-modes mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>global-set-key <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"&lt;f5&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'evil-local-mode<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">don't need C-n, C-p</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-insert-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-n"</span><span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-insert-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-p"</span><span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">magit</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">evil-define-key</span> 'normal magit-blame-mode-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"q"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'magit-blame-quit<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">intercept ESC when running in terminal</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>evil-esc-mode<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">move search result to center of the screen</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">evil-search-next</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>after advice-for-evil-search-next activate<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>evil-scroll-line-to-center <span class="org-rainbow-delimiters-depth-4">(</span>line-number-at-pos<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">evil-search-previous</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>after advice-for-evil-search-previous activate<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>evil-scroll-line-to-center <span class="org-rainbow-delimiters-depth-4">(</span>line-number-at-pos<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">this is needed to be able to use C-h</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>global-set-key <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-h"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'help<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-normal-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-h"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'undefined<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-insert-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-h"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'undefined<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-visual-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-h"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'undefined<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-emacs-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-h"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'help<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-insert-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-k"</span><span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-normal-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"M-."</span><span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-normal-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-h"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'evil-window-left<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-normal-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-j"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'evil-window-down<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-normal-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-k"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'evil-window-up<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-normal-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-l"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'evil-window-right<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-normal-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">";"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'evil-ex<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-visual-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">";"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'evil-ex<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">evil-ex-define-cmd</span> <span class="org-string">"sv"</span> 'evil-window-split<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-normal-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-p"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'counsel-projectile-find-file<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-insert-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-M-i"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'company-complete<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-visual-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"&lt;"</span><span class="org-rainbow-delimiters-depth-3">)</span> #'<span class="org-rainbow-delimiters-depth-3">(</span>lambda <span class="org-rainbow-delimiters-depth-4">()</span>
                                                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
                                                    <span class="org-rainbow-delimiters-depth-5">(</span>call-interactively 'evil-shift-left<span class="org-rainbow-delimiters-depth-5">)</span>
                                                    <span class="org-rainbow-delimiters-depth-5">(</span>execute-kbd-macro <span class="org-string">"gv"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-visual-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"&gt;"</span><span class="org-rainbow-delimiters-depth-3">)</span> #'<span class="org-rainbow-delimiters-depth-3">(</span>lambda <span class="org-rainbow-delimiters-depth-4">()</span>
                                                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                                  <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
                                                    <span class="org-rainbow-delimiters-depth-5">(</span>call-interactively 'evil-shift-right<span class="org-rainbow-delimiters-depth-5">)</span>
                                                    <span class="org-rainbow-delimiters-depth-5">(</span>execute-kbd-macro <span class="org-string">"gv"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">redefine so that $ doesn't include the EOL char</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> my/evil-$-include-eol nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">evil-define-motion</span> <span class="org-function-name">evil-end-of-line</span> <span class="org-rainbow-delimiters-depth-3">(</span>count<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Move the cursor to the end of the current line.</span>

<span class="org-doc">If COUNT is given, move COUNT - 1 lines downward first."</span>
    <span class="org-builtin">:type</span> inclusive
    <span class="org-rainbow-delimiters-depth-3">(</span>move-end-of-line count<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> evil-track-eol
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> temporary-goal-column most-positive-fixnum
            this-command 'next-line<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-5">(</span>evil-visual-state-p<span class="org-rainbow-delimiters-depth-5">)</span> my/evil-$-include-eol<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>evil-adjust-cursor<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-5">(</span>eolp<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">prevent "c$" and "d$" from deleting blank lines</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> evil-this-type 'exclusive<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">https://github.com/emacs-evil/evil-surround/issues/141</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defmacro</span> <span class="org-function-name">my/evil-define-text-object</span> <span class="org-rainbow-delimiters-depth-3">(</span>name key start-regex end-regex<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>inner-name <span class="org-rainbow-delimiters-depth-6">(</span>make-symbol <span class="org-rainbow-delimiters-depth-7">(</span>concat <span class="org-string">"evil-inner-"</span> name<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>outer-name <span class="org-rainbow-delimiters-depth-6">(</span>make-symbol <span class="org-rainbow-delimiters-depth-7">(</span>concat <span class="org-string">"evil-a-"</span> name<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      `<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
         <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">evil-define-text-object</span> ,inner-name <span class="org-rainbow-delimiters-depth-6">(</span>count <span class="org-type">&amp;optional</span> beg end type<span class="org-rainbow-delimiters-depth-6">)</span>
           <span class="org-rainbow-delimiters-depth-6">(</span>evil-select-paren ,start-regex ,end-regex beg end type count nil<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
         <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">evil-define-text-object</span> ,outer-name <span class="org-rainbow-delimiters-depth-6">(</span>count <span class="org-type">&amp;optional</span> beg end type<span class="org-rainbow-delimiters-depth-6">)</span>
           <span class="org-rainbow-delimiters-depth-6">(</span>evil-select-paren ,start-regex ,end-regex beg end type count t<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
         <span class="org-rainbow-delimiters-depth-5">(</span>define-key evil-inner-text-objects-map ,key #',inner-name<span class="org-rainbow-delimiters-depth-5">)</span>
         <span class="org-rainbow-delimiters-depth-5">(</span>define-key evil-outer-text-objects-map ,key #',outer-name<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org960ae12" class="outline-3">
<h3 id="org960ae12">evil packages that can be used without evil-mode</h3>
<div class="outline-text-3" id="text-org960ae12">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">evil-nerd-commenter</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"M-;"</span> . evilnc-comment-or-uncomment-lines<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">evilnc toggles instead of commenting/uncommenting</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> evilnc-invert-comment-line-by-line t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">evil-surround</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . global-evil-surround-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">evil-define-key</span> 'visual evil-surround-mode-map <span class="org-string">"s"</span> 'evil-surround-region<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defconst</span> <span class="org-variable-name">my/mark-active-alist</span>
    `<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>mark-active
       ,@<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>m <span class="org-rainbow-delimiters-depth-8">(</span>make-sparse-keymap<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
           <span class="org-rainbow-delimiters-depth-6">(</span>define-key m <span class="org-rainbow-delimiters-depth-7">(</span>kbd <span class="org-string">"C-c s"</span><span class="org-rainbow-delimiters-depth-7">)</span> 'evil-surround-region<span class="org-rainbow-delimiters-depth-6">)</span>
           m<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'emulation-mode-map-alists 'my/mark-active-alist<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8bcd7c3" class="outline-2">
<h2 id="org8bcd7c3"><span class="section-number-2">12</span> Hybrid input mode</h2>
<div class="outline-text-2" id="text-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">with-eval-after-load</span> 'evil
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defcustom</span> <span class="org-variable-name">hybrid-mode-default-state</span> 'normal
    <span class="org-doc">"Value of `</span><span class="org-doc"><span class="org-constant">evil-default-state</span></span><span class="org-doc">' for hybrid-mode."</span>
    <span class="org-builtin">:group</span> 'my
    <span class="org-builtin">:type</span> 'symbol<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defcustom</span> <span class="org-variable-name">hybrid-mode-enable-evilified-state</span> t
    <span class="org-doc">"If non nil then evilified states is enabled in buffer supporting it."</span>
    <span class="org-builtin">:group</span> 'my
    <span class="org-builtin">:type</span> 'boolean<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">hybrid-mode-default-state-backup</span> evil-default-state
    <span class="org-doc">"Backup of `</span><span class="org-doc"><span class="org-constant">evil-default-state</span></span><span class="org-doc">'."</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">evil-insert-state</span> <span class="org-rainbow-delimiters-depth-3">(</span>around hybrid-insert-to-hybrid-state disable<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Forces Hybrid state."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>evil-hybrid-state<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defadvice</span> <span class="org-function-name">evil-evilified-state</span> <span class="org-rainbow-delimiters-depth-3">(</span>around hybrid-evilified-to-hybrid-state disable<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Forces Hybrid state."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>equal <span class="org-highlight-numbers-number">-1</span> <span class="org-rainbow-delimiters-depth-5">(</span>ad-get-arg <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        ad-do-it
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> hybrid-mode-enable-evilified-state
          ad-do-it
        <span class="org-comment-delimiter">;; </span><span class="org-comment">seems better to set the emacs state instead of hybrid for evilified</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">buffers</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>evil-emacs-state<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">define-minor-mode</span> <span class="org-function-name">hybrid-mode</span>
    <span class="org-doc">"Global minor mode to replace insert state by hybrid state."</span>
    <span class="org-builtin">:global</span> t
    <span class="org-builtin">:lighter</span> <span class="org-string">""</span>
    <span class="org-builtin">:group</span> 'my
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> hybrid-mode
        <span class="org-rainbow-delimiters-depth-4">(</span>enable-hybrid-editing-style<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>disable-hybrid-editing-style<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">enable-hybrid-editing-style</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Enable the hybrid editing style."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> hybrid-mode-default-state-backup evil-default-state
          evil-default-state hybrid-mode-default-state<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">replace evil states by `hybrid state'</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ad-enable-advice 'evil-insert-state
                      'around 'hybrid-insert-to-hybrid-state<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ad-enable-advice 'evil-evilified-state
                      'around 'hybrid-evilified-to-hybrid-state<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ad-activate 'evil-insert-state<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ad-activate 'evil-evilified-state<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">key bindings hooks for dynamic switching of editing styles</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>run-hook-with-args 'spacemacs-editing-style-hook 'hybrid<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">initiate `hybrid state'</span>
    <span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">disable-hybrid-editing-style</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Disable the hybrid editing style (reverting to 'vim style)."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> evil-default-state hybrid-mode-default-state-backup<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">restore evil states</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ad-disable-advice 'evil-insert-state
                       'around 'hybrid-insert-to-hybrid-state<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ad-disable-advice 'evil-evilified-state
                       'around 'hybrid-evilified-to-hybrid-state<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ad-activate 'evil-insert-state<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ad-activate 'evil-evilified-state<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">restore key bindings</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>run-hook-with-args 'spacemacs-editing-style-hook 'vim<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">restore the states</span>
    <span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">This code is from evil insert state definition, any change upstream</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">should be reflected here</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">see https://github.com/emacs-evil/evil/blob/56e92f7cb4e04e665670460093b41f58446b7a2b/evil-states.el#L108</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">evil-define-state</span> <span class="org-function-name">hybrid</span>
    <span class="org-doc">"Hybrid state for hybrid mode."</span>
    <span class="org-builtin">:tag</span> <span class="org-string">" &lt;I&gt; "</span>
    <span class="org-builtin">:cursor</span> <span class="org-rainbow-delimiters-depth-3">(</span>bar . <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-builtin">:message</span> <span class="org-string">"-- HYBRID --"</span>
    <span class="org-builtin">:entry-hook</span> <span class="org-rainbow-delimiters-depth-3">(</span>evil-start-track-last-insertion<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-builtin">:exit-hook</span> <span class="org-rainbow-delimiters-depth-3">(</span>evil-cleanup-insert-state evil-stop-track-last-insertion<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-builtin">:input-method</span> t
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">cond</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>evil-hybrid-state-p<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>add-hook 'post-command-hook #'evil-maybe-remove-spaces<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>add-hook 'pre-command-hook #'evil-insert-repeat-hook<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> evil-maybe-remove-spaces t<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-6">(</span>eq evil-want-fine-undo t<span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-rainbow-delimiters-depth-6">(</span>evil-start-undo-step<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>t
      <span class="org-rainbow-delimiters-depth-5">(</span>remove-hook 'post-command-hook #'evil-maybe-remove-spaces<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>remove-hook 'pre-command-hook #'evil-insert-repeat-hook<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>evil-maybe-remove-spaces t<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> evil-insert-repeat-info evil-repeat-info<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>evil-set-marker ?^ nil t<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-6">(</span>eq evil-want-fine-undo t<span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-rainbow-delimiters-depth-6">(</span>evil-end-undo-step<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">when</span> evil-move-cursor-back
        <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-8">(</span>evil-normal-state-p evil-next-state<span class="org-rainbow-delimiters-depth-8">)</span>
                  <span class="org-rainbow-delimiters-depth-8">(</span>evil-motion-state-p evil-next-state<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
          <span class="org-rainbow-delimiters-depth-7">(</span>evil-move-cursor-back<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-hybrid-state-map <span class="org-rainbow-delimiters-depth-3">[</span>escape<span class="org-rainbow-delimiters-depth-3">]</span> 'evil-normal-state<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Override stock evil function `</span><span class="org-comment"><span class="org-constant">evil-insert-state-p</span></span><span class="org-comment">'</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">evil-insert-state-p</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">&amp;optional</span> state<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Whether the current state is insert."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">and</span> evil-local-mode
         <span class="org-rainbow-delimiters-depth-4">(</span>memq <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> state evil-state<span class="org-rainbow-delimiters-depth-5">)</span> '<span class="org-rainbow-delimiters-depth-5">(</span>insert hybrid<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-hybrid-state-map <span class="org-rainbow-delimiters-depth-3">[</span>escape<span class="org-rainbow-delimiters-depth-3">]</span> 'evil-normal-state<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key evil-hybrid-state-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-w"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'evil-delete-backward-word<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4cbfde2" class="outline-2">
<h2 id="org4cbfde2"><span class="section-number-2">13</span> Spell checking</h2>
<div class="outline-text-2" id="text-13">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">flyspell</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>flyspell-mode flyspell-prog-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'flyspell-mode-hook
            <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-rainbow-delimiters-depth-4">(</span>add-hook 'hack-local-variables-hook 'flyspell-buffer<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f722da" class="outline-2">
<h2 id="org8f722da"><span class="section-number-2">14</span> Buffer &amp; window management</h2>
<div class="outline-text-2" id="text-14">
</div>
<div id="outline-container-orge3151f2" class="outline-3">
<h3 id="orge3151f2">ibuffer</h3>
<div class="outline-text-3" id="text-orge3151f2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ibuffer</span>
  <span class="org-builtin">:init</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">`/ R` to toggle showing these groups</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">`/ \` to disable</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq-default</span> ibuffer-saved-filter-groups
                `<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Default"</span>
                   <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"rg"</span> <span class="org-rainbow-delimiters-depth-6">(</span>name . <span class="org-string">"</span><span class="org-string"><span class="org-warning">\</span></span><span class="org-string">*rg.*</span><span class="org-string"><span class="org-warning">\</span></span><span class="org-string">*"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                   <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"Dired"</span> <span class="org-rainbow-delimiters-depth-6">(</span>mode . dired-mode<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                   <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"Scratch"</span> <span class="org-rainbow-delimiters-depth-6">(</span>name . <span class="org-string">"</span><span class="org-string"><span class="org-warning">\</span></span><span class="org-string">*scratch.*"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                   <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"Temporary"</span> <span class="org-rainbow-delimiters-depth-6">(</span>name . <span class="org-string">"</span><span class="org-string"><span class="org-warning">\</span></span><span class="org-string">*.*</span><span class="org-string"><span class="org-warning">\</span></span><span class="org-string">*"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
                   <span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> ibuffer-show-empty-filter-groups nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key ibuffer-mode-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"M-o"</span><span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>global-set-key <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-x C-b"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'ibuffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'ibuffer-mode-hook #'<span class="org-rainbow-delimiters-depth-3">(</span>lambda <span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-rainbow-delimiters-depth-4">(</span>ibuffer-auto-mode <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcbd6650" class="outline-3">
<h3 id="orgcbd6650">avy</h3>
<div class="outline-text-3" id="text-orgcbd6650">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">avy</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c i"</span> . avy-goto-char-timer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcbf5567" class="outline-3">
<h3 id="orgcbf5567">ace-window</h3>
<div class="outline-text-3" id="text-orgcbf5567">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ace-window</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"C-c o"</span> . ace-window<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> aw-dispatch-always nil
        aw-keys <span class="org-rainbow-delimiters-depth-3">(</span>string-to-list <span class="org-string">"asdfghjkl;"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>term-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>define-key term-raw-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c o"</span><span class="org-rainbow-delimiters-depth-4">)</span> #'ace-window<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0c2c3b4" class="outline-3">
<h3 id="org0c2c3b4">buffer-move</h3>
<div class="outline-text-3" id="text-org0c2c3b4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">buffer-move</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;C-S-up&gt;"</span> . buf-move-up<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;C-S-down&gt;"</span> . buf-move-down<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;C-S-left&gt;"</span> . buf-move-left<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;C-S-right&gt;"</span> . buf-move-right<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5613350" class="outline-3">
<h3 id="org5613350">zoom</h3>
<div class="outline-text-3" id="text-org5613350">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">zoom</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"M-+"</span> . zoom<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/zoom-size</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>total-w <span class="org-rainbow-delimiters-depth-6">(</span>frame-width<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>total-h <span class="org-rainbow-delimiters-depth-6">(</span>frame-height<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>focus-w <span class="org-rainbow-delimiters-depth-6">(</span>max <span class="org-highlight-numbers-number">100</span> <span class="org-rainbow-delimiters-depth-7">(</span>/ total-w <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>focus-h <span class="org-rainbow-delimiters-depth-6">(</span>max <span class="org-highlight-numbers-number">65</span> <span class="org-rainbow-delimiters-depth-7">(</span>/ total-h <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>rest-w <span class="org-highlight-numbers-number">20</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>rest-h <span class="org-highlight-numbers-number">10</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>remain-w <span class="org-rainbow-delimiters-depth-6">(</span>abs <span class="org-rainbow-delimiters-depth-7">(</span>- total-w rest-w<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>remain-h <span class="org-rainbow-delimiters-depth-6">(</span>abs <span class="org-rainbow-delimiters-depth-7">(</span>- total-h rest-h<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>final-w <span class="org-rainbow-delimiters-depth-6">(</span>min focus-w remain-w<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>final-h <span class="org-rainbow-delimiters-depth-6">(</span>min focus-h remain-h<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>cons final-w final-h<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> zoom-size 'my/zoom-size<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org99240be" class="outline-2">
<h2 id="org99240be"><span class="section-number-2">15</span> eww</h2>
<div class="outline-text-2" id="text-15">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">eww</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>eww<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> eww-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"q"</span> . my/eww-quit<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/eww-quit</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>quit-window <span class="org-builtin">:kill</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span>one-window-p<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>delete-window<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1249ddd" class="outline-2">
<h2 id="org1249ddd"><span class="section-number-2">16</span> dired</h2>
<div class="outline-text-2" id="text-16">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dired</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> dired-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"j"</span> . dired-next-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"J"</span> . dired-next-dirline<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"k"</span> . dired-previous-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"K"</span> . dired-prev-dirline<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"h"</span> . backward-char<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"l"</span> . forward-char<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n"</span> . my/dired-find-file-ace<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-j"</span> . my/dired-file-jump-from-here<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-u"</span> . dired-up-directory<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c C-q"</span> . my/dired-kill-all-buffers<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">hide files being edited &amp; flycheck files from dired</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> dired-omit-files <span class="org-string">"\\`[.]?#</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">\\`.flycheck_"</span>
        dired-omit-verbose nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> dired-hide-details-hide-symlink-targets nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'dired-mode-hook #'auto-revert-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'dired-mode-hook #'dired-omit-mode<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>define-key dired-mode-map
    <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-c v"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">my/control-function-window-split</span>
     dired-find-file-other-window
     nil <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key dired-mode-map
    <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-c s"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">my/control-function-window-split</span>
     dired-find-file-other-window
     <span class="org-highlight-numbers-number">0</span> nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dired-sidebar</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>dired-sidebar-hide-sidebar
             dired-sidebar-showing-sidebar-p
             dired-sidebar-jump-to-sidebar
             dired-sidebar-toggle-sidebar
             dired-sidebar-toggle-with-current-directory<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-\""</span> . my/dired-sidebar-smart-toggle<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-builtin">:map</span> dired-sidebar-mode-map
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-u"</span> . dired-sidebar-up-directory<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> dired-sidebar-theme 'none<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/dired-sidebar-smart-toggle</span> <span class="org-rainbow-delimiters-depth-2">(</span>curdir<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>eq major-mode 'dired-sidebar-mode<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>dired-sidebar-hide-sidebar<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>dired-sidebar-showing-sidebar-p<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>dired-sidebar-jump-to-sidebar<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> curdir
          <span class="org-rainbow-delimiters-depth-5">(</span>dired-sidebar-toggle-with-current-directory<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>dired-sidebar-toggle-sidebar<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dired-subtree</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> dired
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> dired-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;tab&gt;"</span> . dired-subtree-toggle<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"TAB"</span> . dired-subtree-toggle<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dired-filter</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> dired<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dired-git-info</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> dired
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> dired-mode-map <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">")"</span> . dired-git-info-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>dired-git-info-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">more detailed colors</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">diredfl</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>dired-mode . diredfl-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/dired-find-file-ace</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>find-file-run-dired t<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>fname <span class="org-rainbow-delimiters-depth-5">(</span>dired-get-file-for-visit<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>ace-select-window<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>find-file fname<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/dired-file-jump-from-here</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>find-file-run-dired t<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>fname <span class="org-rainbow-delimiters-depth-5">(</span>dired-get-file-for-visit<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>my/counsel-file-jump-from-here fname<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/dired-kill-all-buffers</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>mapc <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">(</span>buf<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-5">(</span>eq 'dired-mode
                    <span class="org-rainbow-delimiters-depth-6">(</span>buffer-local-value 'major-mode buf<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>kill-buffer buf<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">(</span>buffer-list<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dired-x</span>
  <span class="org-builtin">:after</span> dired
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> is-mac <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> dired-use-ls-dired nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">https://gist.github.com/surajacharya/4127526</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/git-grep-dired</span> <span class="org-rainbow-delimiters-depth-2">(</span>repo wildcards regexp<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Find Git-controlled files in DIR with a name like WILDCARDS containing a regexp REGEXP and start Dired on output."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"DGit-grep (directory): \nsGit-grep (filename wildcard(s), e.g. *.xml): \nsGit-grep (grep regexp): "</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> repo <span class="org-rainbow-delimiters-depth-3">(</span>file-name-as-directory <span class="org-rainbow-delimiters-depth-4">(</span>expand-file-name repo<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>switch-to-buffer <span class="org-rainbow-delimiters-depth-3">(</span>concat <span class="org-string">"*Git Grep "</span> repo <span class="org-string">"*"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>fundamental-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> buffer-read-only nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>erase-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> default-directory repo<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>cmd <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"git --git-dir %s/.git ls-files -z%s | xargs -0 grep -lZ -- %s | xargs -0 ls -l"</span>
                     repo
                     <span class="org-rainbow-delimiters-depth-6">(</span>apply 'concat <span class="org-rainbow-delimiters-depth-7">(</span>mapcar <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-9">(</span>s<span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-rainbow-delimiters-depth-9">(</span>concat <span class="org-string">" "</span> <span class="org-rainbow-delimiters-depth-1">(</span>shell-quote-argument s<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>split-string wildcards<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
                     <span class="org-rainbow-delimiters-depth-6">(</span>shell-quote-argument regexp<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>insert <span class="org-string">" "</span> cmd <span class="org-string">"\n "</span> repo <span class="org-string">":\n"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>call-process-shell-command <span class="org-rainbow-delimiters-depth-4">(</span>concat cmd <span class="org-string">" | sed -e 's/^/ /g'"</span><span class="org-rainbow-delimiters-depth-4">)</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>dired-mode<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">(dired-build-subdir-alist)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">From find-dired:</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Set subdir-alist so that Tree Dired will work:</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>fboundp 'dired-simple-subdir-alist<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">will work even with nested dired format (dired-nstd.el,v 1.15</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">and later)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>dired-simple-subdir-alist<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">else we have an ancient tree dired (or classic dired, where</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">this does no harm)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>set <span class="org-rainbow-delimiters-depth-4">(</span>make-local-variable 'dired-subdir-alist<span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>list <span class="org-rainbow-delimiters-depth-5">(</span>cons default-directory <span class="org-rainbow-delimiters-depth-6">(</span>point-min-marker<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>goto-line <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcbf0d25" class="outline-2">
<h2 id="orgcbf0d25"><span class="section-number-2">17</span> regex replace</h2>
<div class="outline-text-2" id="text-17">
</div>
<div id="outline-container-orgf902a6a" class="outline-3">
<h3 id="orgf902a6a">re-builder (useful for debugging)</h3>
<div class="outline-text-3" id="text-orgf902a6a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">re-builder</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>re-builder<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> reb-re-syntax 'string<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7acd4a2" class="outline-3">
<h3 id="org7acd4a2">visual-regexp-steroids</h3>
<div class="outline-text-3" id="text-org7acd4a2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">visual-regexp-steroids</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-%"</span> . vr/replace<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-S-%"</span> . vr/query-replace<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> vr/engine 'python
        vr/match-separator-use-custom-face t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb0c1ee0" class="outline-2">
<h2 id="orgb0c1ee0"><span class="section-number-2">18</span> nix</h2>
<div class="outline-text-2" id="text-18">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">nix-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.nix\\'"</span> . nix-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> nix-nixfmt-bin <span class="org-string">"nixpkgs-fmt"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span> '<span class="org-rainbow-delimiters-depth-3">(</span>nix-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>subword-mode <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'nix-mode <span class="org-string">"s"</span> 'my/nix-format-and-save<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'nix-mode <span class="org-string">"m"</span> 'my/nix-mark-multiline-string<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key nix-mode-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-c '"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'my/nix-edit-indirect-multiline-string<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/nix-format-and-save</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>nix-format-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>save-buffer<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/nix-mark-multiline-string</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>deactivate-mark<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>re-search-backward <span class="org-string">"''$"</span> nil t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>next-line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>beginning-of-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>call-interactively 'set-mark-command<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>re-search-forward <span class="org-string">"^\s*''"</span> nil t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>previous-line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>end-of-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/nix-edit-indirect-multiline-string</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/nix-mark-multiline-string<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/edit-indirect-region<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd568fe7" class="outline-2">
<h2 id="orgd568fe7"><span class="section-number-2">19</span> direnv</h2>
<div class="outline-text-2" id="text-19">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">direnv</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:if</span> <span class="org-rainbow-delimiters-depth-2">(</span>executable-find <span class="org-string">"direnv"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . direnv-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> direnv-show-paths-in-summary nil
        direnv-always-show-summary nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span>fboundp 'file-attribute-size<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">defun</span> <span class="org-function-name">file-attribute-size</span> <span class="org-rainbow-delimiters-depth-4">(</span>attrs<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>elt attrs <span class="org-highlight-numbers-number">7</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7ef031b" class="outline-2">
<h2 id="org7ef031b"><span class="section-number-2">20</span> haskell</h2>
<div class="outline-text-2" id="text-20">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">haskell-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.hs\\'"</span> . haskell-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.lhs\\'"</span> . literate-haskell-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.cabal\\'"</span> . haskell-cabal-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.c2hs\\'"</span> . haskell-c2hs-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.hcr\\'"</span> . ghc-core-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.dump-simpl\\'"</span> . ghc-core-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> haskell-align-imports-pad-after-name t
        haskell-hoogle-command <span class="org-string">"hoogle --count=100"</span>
        haskell-interactive-popup-errors nil
        <span class="org-comment-delimiter">;; </span><span class="org-comment">choices: auto, ghci, cabal-repl, cabal-new-repl, stack-ghci</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">cabal-new-repl is the one to use with nix-shell &amp; direnv</span>
        haskell-process-type 'cabal-new-repl
        <span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-eval-after-load</span> 'evil
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">my/evil-define-text-object</span> <span class="org-string">"haskell-inline-comment"</span> <span class="org-string">"#"</span> <span class="org-string">"{- "</span> <span class="org-string">" -}"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-comment">: sort out this shit</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-eval-after-load</span> 'smartparens
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-eval-after-load</span> 'haskell-mode
      <span class="org-rainbow-delimiters-depth-4">(</span>sp-local-pair 'haskell-mode <span class="org-string">"'"</span> nil <span class="org-builtin">:actions</span> nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/highlight-keyword-in-mode 'haskell-mode <span class="org-string">"error"</span> nil 'font-lock-preprocessor-face<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/highlight-keyword-in-mode 'haskell-mode <span class="org-string">"undefined"</span> nil 'font-lock-preprocessor-face<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"aa"</span> 'my/haskell-align-and-sort-everything<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"ai"</span> 'my/haskell-align-and-sort-imports<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"al"</span> 'my/haskell-align-and-sort-language-extensions<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"c"</span> 'projectile-compile-project<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"d"</span> 'my/haskell-open-haddock-documentation<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"h"</span> 'hoogle<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"i"</span> 'my/haskell-insert-import<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"l"</span> 'my/haskell-insert-language-extension<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"o"</span> 'my/haskell-insert-ghc-option<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"r"</span> 'my/haskell-insert-ghcid-repl-statement<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"s"</span> 'my/haskell-format-and-save<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"/"</span> 'engine/search-hoogle<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"?"</span> 'engine/search-stackage<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'haskell-mode <span class="org-string">"#"</span> 'engine/search-haskell-language-extensions<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>haskell-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> evil-shift-width <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">push</span> '<span class="org-rainbow-delimiters-depth-4">(</span>?# . <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"{- "</span> . <span class="org-string">" -}"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> evil-surround-pairs-alist<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>haskell-decl-scan-mode<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>subword-mode <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ormolu</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>ormolu-format
             ormolu-format-buffer
             ormolu-format-region
             ormolu-format-on-save-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> ormolu-extra-args
        '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"-o"</span> <span class="org-string">"-XTypeApplications"</span>
          <span class="org-string">"-o"</span> <span class="org-string">"-XInstanceSigs"</span>
          <span class="org-string">"-o"</span> <span class="org-string">"-XBangPatterns"</span>
          <span class="org-string">"-o"</span> <span class="org-string">"-XPatternSynonyms"</span>
          <span class="org-string">"-o"</span> <span class="org-string">"-XUnicodeSyntax"</span>
          <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/haskell-align-stuff</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/haskell-use-ormolu</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/haskell-format-brittany</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/format-and-save <span class="org-string">"brittany"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/haskell-format-and-save</span> <span class="org-rainbow-delimiters-depth-2">(</span>use-ormolu<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Formats the import statements using haskell-stylish and saves</span>
<span class="org-doc">the current file."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>save-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">or</span> use-ormolu my/haskell-use-ormolu<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>ormolu-format-buffer<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>my/haskell-align-and-sort-imports<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>my/haskell-align-and-sort-language-extensions<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>save-buffer<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/haskell-align-and-sort-imports</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>n-runs <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>max-runs <span class="org-highlight-numbers-number">10</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-6">(</span>&lt; n-runs max-runs<span class="org-rainbow-delimiters-depth-6">)</span>
                  <span class="org-rainbow-delimiters-depth-6">(</span>haskell-navigate-imports<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">progn</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">setq</span> n-runs <span class="org-rainbow-delimiters-depth-7">(</span>1+ n-runs<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">when</span> my/haskell-align-stuff <span class="org-rainbow-delimiters-depth-7">(</span>call-interactively 'haskell-align-imports<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>call-interactively 'haskell-sort-imports<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>&gt;= n-runs max-runs<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>message <span class="org-string">"Sorting/aligning imports probably timed out"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/-haskell-mark-language-extensions</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>deactivate-mark<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>goto-char <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>re-search-forward <span class="org-string">"^{-# LANGUAGE"</span> nil t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>beginning-of-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>call-interactively 'set-mark-command<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-3">(</span>re-search-forward <span class="org-string">"^{-# LANGUAGE"</span> nil t<span class="org-rainbow-delimiters-depth-3">)</span>
    nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>end-of-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/haskell-align-and-sort-language-extensions</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> my/haskell-align-stuff
      <span class="org-rainbow-delimiters-depth-4">(</span>my/-haskell-mark-language-extensions<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>align-regexp <span class="org-rainbow-delimiters-depth-5">(</span>region-beginning<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>region-end<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">\\s-*</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">#-"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>my/-haskell-mark-language-extensions<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>sort-lines nil <span class="org-rainbow-delimiters-depth-4">(</span>region-beginning<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>region-end<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/haskell-insert-language-extension</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>all-exts
          <span class="org-rainbow-delimiters-depth-5">(</span>split-string <span class="org-rainbow-delimiters-depth-6">(</span>shell-command-to-string <span class="org-string">"ghc --supported-languages"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>ext
          <span class="org-rainbow-delimiters-depth-5">(</span>completing-read <span class="org-string">"extension: "</span>
                           all-exts
                           nil nil nil nil nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>re-search-forward <span class="org-string">"^{-#"</span> nil t<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>beginning-of-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>open-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"{-# LANGUAGE %s #-}"</span> ext<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>my/haskell-align-and-sort-language-extensions<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/haskell-insert-ghc-option</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>all-opts
          <span class="org-rainbow-delimiters-depth-5">(</span>split-string <span class="org-rainbow-delimiters-depth-6">(</span>shell-command-to-string <span class="org-string">"ghc --show-options"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>ext
          <span class="org-rainbow-delimiters-depth-5">(</span>completing-read <span class="org-string">"option: "</span>
                           all-opts
                           nil nil nil nil nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>re-search-forward <span class="org-string">"^module"</span> nil t<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>beginning-of-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>open-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"{-# OPTIONS_GHC %s #-}"</span> ext<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/haskell-align-and-sort-everything</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/haskell-align-and-sort-imports<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/haskell-align-and-sort-language-extensions<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/haskell-insert-ghcid-repl-statement</span> <span class="org-rainbow-delimiters-depth-2">(</span>new-line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> current-prefix-arg nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> new-line
    <span class="org-rainbow-delimiters-depth-3">(</span>end-of-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>call-interactively 'newline<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>beginning-of-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>call-interactively 'delete-horizontal-space<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>insert <span class="org-string">"-- $&gt; "</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/haskell-open-haddock-documentation</span> <span class="org-rainbow-delimiters-depth-2">(</span>use-eww<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>url <span class="org-string">"https://haskell-haddock.readthedocs.io/en/latest/markup.html"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> use-eww
        <span class="org-rainbow-delimiters-depth-4">(</span>eww url<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>browse-url url<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/ghc-source-path</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"~/sources/ghc/"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/visit-ghc-tags-table</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>tags <span class="org-rainbow-delimiters-depth-5">(</span>expand-file-name <span class="org-string">"TAGS"</span> my/ghc-source-path<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>file-exists-p tags<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>visit-tags-table tags<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-warning">error</span> <span class="org-string">"No TAGS file found in ghc source directory"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">intero</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> haskell-mode
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>intero-mode-blacklist<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>haskell-mode . intero-mode-blacklist<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span> intero-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> intero-blacklist '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"~/.xmonad"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">pretty print (use :pretty, :prettyl, :no-pretty in ghci)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">this has to be installed in every repo until I find a solution</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq intero-extra-ghci-options '("-package" "pretty-simple"))</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">don't auto insert matching single quotes in haskell mode, since I</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">mostly use them for promoted data types</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key intero-mode-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"M-."</span><span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>sp-local-pair 'intero-repl-mode <span class="org-string">"'"</span> nil <span class="org-builtin">:actions</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>flycheck-add-next-checker 'intero '<span class="org-rainbow-delimiters-depth-3">(</span>t . haskell-hlint<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dante</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> haskell-mode
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>dante-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>haskell-mode . dante-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'dante-mode-hook
            '<span class="org-rainbow-delimiters-depth-3">(</span>lambda <span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-rainbow-delimiters-depth-4">(</span>flycheck-add-next-checker
                         'haskell-dante
                         '<span class="org-rainbow-delimiters-depth-5">(</span>warning . haskell-hlint<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgff5867b" class="outline-2">
<h2 id="orgff5867b"><span class="section-number-2">21</span> purescript</h2>
<div class="outline-text-2" id="text-21">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">purescript-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.purs\\'"</span> . purescript-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> purescript-indent-offset <span class="org-highlight-numbers-number">2</span>
        purescript-align-imports-pad-after-name t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'purescript-mode <span class="org-string">"a"</span> 'my/purescript-sort-and-align-imports<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'purescript-mode <span class="org-string">"i"</span> 'purescript-navigate-imports<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'purescript-mode <span class="org-string">"s"</span> 'my/purescript-format-and-save<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'purescript-mode <span class="org-string">"/"</span> 'engine/search-pursuit<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook
   'purescript-mode-hook
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> evil-shift-width <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>turn-on-purescript-indentation<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>turn-on-purescript-decl-scan<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">(turn-on-purescript-font-lock)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">push</span> '<span class="org-rainbow-delimiters-depth-5">(</span>?# . <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"{- "</span> . <span class="org-string">" -}"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span> evil-surround-pairs-alist<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>subword-mode <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>make-variable-buffer-local 'find-tag-default-function<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> find-tag-default-function <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-6">()</span> <span class="org-rainbow-delimiters-depth-6">(</span>current-word t t<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">xref for purescript works a bit weird with qualified identifiers</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(define-key purescript-mode-map (kbd "M-.")</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">#'(lambda () (interactive) (xref-find-definitions (current-word t t))))</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/purescript-align-stuff</span> t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/purescript-sort-and-align-imports</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">save-excursion</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-4">(</span>purescript-navigate-imports<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>purescript-sort-imports<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">when</span> my/purescript-align-stuff <span class="org-rainbow-delimiters-depth-6">(</span>purescript-align-imports<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>purescript-navigate-imports-return<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/purescript-format-and-save</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Formats the import statements using haskell-stylish and saves</span>
<span class="org-doc">the current file."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/purescript-sort-and-align-imports<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>save-buffer<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">This needs to exist in the `</span><span class="org-comment"><span class="org-constant">load-path</span></span><span class="org-comment">'</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(use-package custom-purescript-font-lock</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">:after purescript-mode)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">copy these into the purescript-mode definition</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(setq-local font-lock-defaults</span>
<span class="org-comment-delimiter">;;             </span><span class="org-comment">'((purescript-font-lock-keywords)</span>
<span class="org-comment-delimiter">;;               </span><span class="org-comment">nil nil nil nil</span>
<span class="org-comment-delimiter">;;               </span><span class="org-comment">(font-lock-syntactic-face-function</span>
<span class="org-comment-delimiter">;;                </span><span class="org-comment">. purescript-syntactic-face-function)</span>
<span class="org-comment-delimiter">;;               </span><span class="org-comment">(parse-sexp-lookup-properties . t)</span>
<span class="org-comment-delimiter">;;               </span><span class="org-comment">(font-lock-extra-managed-props . (composition purescript-type))))</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(setq-local font-lock-multiline t)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb7412d3" class="outline-2">
<h2 id="orgb7412d3"><span class="section-number-2">22</span> python</h2>
<div class="outline-text-2" id="text-22">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">python</span>
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.py\\'"</span> . python-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> python-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c C-j"</span> . counsel-imenu<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> python-shell-prompt-detect-failure-warning nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>python-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq-default</span> flycheck-disabled-checkers
                 <span class="org-rainbow-delimiters-depth-4">(</span>append flycheck-disabled-checkers
                         '<span class="org-rainbow-delimiters-depth-5">(</span>python-pycompile<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">blacken</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:if</span> <span class="org-rainbow-delimiters-depth-2">(</span>executable-find <span class="org-string">"black"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:after</span> python
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>blacken-mode blacken-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> blacken-line-length <span class="org-highlight-numbers-number">80</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/python-format-and-save</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>blacken-buffer<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>save-buffer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'python-mode <span class="org-string">"s"</span> 'my/python-format-and-save<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">anaconda-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>python-mode . anaconda-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span>python-mode . anaconda-eldoc-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span> anaconda-mode
  <span class="org-builtin">:diminish</span> anaconda-eldoc-mode<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-venv</span> <span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">pyvenv</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> python
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>pyvenv-workon<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-venv</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>string= major-mode <span class="org-string">"python-mode"</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>venv <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-8">(</span>null pyvenv-virtual-env-name<span class="org-rainbow-delimiters-depth-8">)</span>
                        <span class="org-string">"-"</span>
                      pyvenv-virtual-env-name<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>concat
           <span class="org-string">"["</span>
           <span class="org-rainbow-delimiters-depth-6">(</span>propertize venv 'face '<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:underline</span> t<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
           <span class="org-string">"] "</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">eshell/workon</span> <span class="org-rainbow-delimiters-depth-2">(</span>arg<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span>pyvenv-workon arg<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">eshell/deactivate</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">(</span>pyvenv-deactivate<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga22aa39" class="outline-2">
<h2 id="orga22aa39"><span class="section-number-2">23</span> js/ts/html/css</h2>
<div class="outline-text-2" id="text-23">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">rjsx-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.jsx?\\'"</span> . rjsx-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> js2-mode-show-strict-warnings nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'rjsx-mode <span class="org-string">"s"</span> 'my/prettier-and-save<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>rjsx-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> evil-shift-width <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>define-key js2-mode-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"C-c C-f"</span><span class="org-rainbow-delimiters-depth-4">)</span> nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">typescript-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.ts\\'"</span> . typescript-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> typescript-indent-level <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'typescript-mode <span class="org-string">"s"</span> 'my/prettier-and-save<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>typescript-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>subword-mode <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> evil-shift-width <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">web-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.html\\'"</span> . web-html-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.tsx\\'"</span> . web-tsx-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> web-mode-markup-indent-offset <span class="org-highlight-numbers-number">2</span>
        web-mode-css-indent-offset <span class="org-highlight-numbers-number">2</span>
        web-mode-code-indent-offset <span class="org-highlight-numbers-number">2</span>
        web-mode-attr-indent-offset <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">define-derived-mode</span> <span class="org-function-name">web-tsx-mode</span> web-mode <span class="org-string">"web-tsx"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">define-derived-mode</span> <span class="org-function-name">web-html-mode</span> web-mode <span class="org-string">"web-html"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">web-tsx-mode</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'web-tsx-mode <span class="org-string">"s"</span> 'my/prettier-and-save<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span> '<span class="org-rainbow-delimiters-depth-3">(</span>web-tsx-mode<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>subword-mode <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">css-mode</span>
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.css\\'"</span> . css-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> css-indent-offset <span class="org-highlight-numbers-number">2</span>
        css-fontify-colors nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">js</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>js-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> js-indent-level <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">(use-package prettier-js</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">:ensure t</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">:commands (prettier-js prettier-js-mode my/prettier-and-save)</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">:init</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">(setq prettier-js-args '("--trailing-comma" "es5"</span>
<span class="org-comment-delimiter">;;                            </span><span class="org-comment">"--tab-width" "2"</span>
<span class="org-comment-delimiter">;;                            </span><span class="org-comment">"--semi" "false"</span>
<span class="org-comment-delimiter">;;                            </span><span class="org-comment">"--single-quote" "false")))</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/prettier-and-save</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span>executable-find <span class="org-string">"prettier"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-warning">user-error</span> <span class="org-string">"`</span><span class="org-string"><span class="org-constant">prettier</span></span><span class="org-string">' executable not found"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>fn <span class="org-rainbow-delimiters-depth-5">(</span>file-name-nondirectory buffer-file-name<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>my/format-and-save <span class="org-string">"prettier"</span> <span class="org-string">"--stdin"</span> <span class="org-string">"--stdin-filepath"</span> fn<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>save-buffer<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">emmet-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>emmet-expand-line<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> web-html-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;C-return&gt;"</span> . emmet-expand-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-builtin">:map</span> html-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;C-return&gt;"</span> . emmet-expand-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-builtin">:map</span> css-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;C-return&gt;"</span> . emmet-expand-line<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>web-html-mode html-mode css-mode<span class="org-rainbow-delimiters-depth-3">)</span> . emmet-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcd04245" class="outline-2">
<h2 id="orgcd04245"><span class="section-number-2">24</span> Lisps</h2>
<div class="outline-text-2" id="text-24">
</div>
<div id="outline-container-org09c73d7" class="outline-3">
<h3 id="org09c73d7">all lisps</h3>
<div class="outline-text-3" id="text-org09c73d7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">expand macros in another window</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key
  lisp-mode-map
  <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-c C-m"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  #'<span class="org-rainbow-delimiters-depth-2">(</span>lambda <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>macrostep-expand t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">my/add-hooks</span>
 '<span class="org-rainbow-delimiters-depth-2">(</span>lisp-mode-hook emacs-lisp-mode-hook lisp-interaction-mode-hook<span class="org-rainbow-delimiters-depth-2">)</span>
 <span class="org-rainbow-delimiters-depth-2">(</span>eldoc-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2911652" class="outline-3">
<h3 id="org2911652">emacs lisp</h3>
<div class="outline-text-3" id="text-org2911652">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">elisp-mode</span>
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.el\\'"</span> . emacs-lisp-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.elc\\'"</span> . elisp-byte-code-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/emacs-lisp-format-and-save</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>my/indent-region-or-buffer<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>save-buffer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'emacs-lisp-mode <span class="org-string">"s"</span> #'my/emacs-lisp-format-and-save<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0e32b46" class="outline-2">
<h2 id="org0e32b46"><span class="section-number-2">25</span> coq (proof-general)</h2>
<div class="outline-text-2" id="text-25">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">proof-general</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> proof-splash-enable nil
        proof-script-fly-past-comments t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">holes</span>
  <span class="org-builtin">:ensure</span> proof-general
  <span class="org-builtin">:after</span> proof-general coq-mode
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>holes-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">coq-mode</span>
  <span class="org-builtin">:ensure</span> proof-general
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.v\\'"</span> . coq-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> coq-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c ."</span> . proof-electric-terminator-toggle<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> coq-one-command-per-line nil
        coq-compile-before-require t<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>my/after-set-theme-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>fboundp 'coq-highlight-selected-hyps<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>coq-highlight-selected-hyps<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'coq-mode <span class="org-string">"t"</span> 'engine/search-coq-tactics<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>coq-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> evil-shift-width <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">push</span> '<span class="org-rainbow-delimiters-depth-4">(</span>?# . <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"(* "</span> . <span class="org-string">" *)"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> evil-surround-pairs-alist<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>undo-tree-mode <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>whitespace-mode <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb77cd53" class="outline-2">
<h2 id="orgb77cd53"><span class="section-number-2">26</span> agda</h2>
<div class="outline-text-2" id="text-26">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">currently managed by nixos (emacsPackages.agda2-mode)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">agda2-mode</span>
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.l?agda\\'"</span> . agda2-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>agda2-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>activate-input-method <span class="org-string">"Agda"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgca1ed75" class="outline-2">
<h2 id="orgca1ed75"><span class="section-number-2">27</span> markdown</h2>
<div class="outline-text-2" id="text-27">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">markdown-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>markdown-mode gfm-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> markdown-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-a"</span> . beginning-of-defun<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-e"</span> . end-of-defun<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"TAB"</span> . my/markdown-toggle-heading<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;tab&gt;"</span> . my/markdown-toggle-heading<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"README\\.md\\'"</span> . gfm-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.md\\'"</span> . markdown-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.markdown\\'"</span> . markdown-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.page\\'"</span> . gfm-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> markdown-asymmetric-header t
        markdown-gfm-use-electric-backquote nil
        markdown-css-paths
        <span class="org-rainbow-delimiters-depth-3">(</span>list <span class="org-rainbow-delimiters-depth-4">(</span>expand-file-name <span class="org-rainbow-delimiters-depth-5">(</span>expand-file-name <span class="org-string">"static/github.css"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>executable-find <span class="org-string">"marked"</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> markdown-command <span class="org-string">"marked"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>markdown-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>auto-fill-mode <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>whitespace-mode <span class="org-highlight-numbers-number">+1</span><span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">push</span> '<span class="org-rainbow-delimiters-depth-4">(</span>?# . <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"&lt;!-- "</span> . <span class="org-string">" --&gt;"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> evil-surround-pairs-alist<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/markdown-toggle-heading</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>markdown-heading-at-point<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>outline-toggle-children<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">markdown-toc</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> markdown-mode
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>markdown-toc-refresh-toc
             markdown-toc-generate-toc
             markdown-toc-generate-or-refresh-toc<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">mtoc</span> 'markdown-toc-generate-or-refresh-toc<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c93cbd" class="outline-2">
<h2 id="org7c93cbd"><span class="section-number-2">28</span> LaTeX</h2>
<div class="outline-text-2" id="text-28">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">tex-mode</span>
  <span class="org-builtin">:ensure</span> auctex
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.tex\\'"</span> . latex-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">latex-preview-pane</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> tex-mode
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>latex-preview-pane-mode
             latex-preview-pane-enable<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8383392" class="outline-2">
<h2 id="org8383392"><span class="section-number-2">29</span> Other prog modes</h2>
<div class="outline-text-2" id="text-29">
</div>
<div id="outline-container-org49fd772" class="outline-3">
<h3 id="org49fd772">idris</h3>
<div class="outline-text-3" id="text-org49fd772">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">idris-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.idr\\'"</span> . idris-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org399a361" class="outline-3">
<h3 id="org399a361">c/c++</h3>
<div class="outline-text-3" id="text-org399a361">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> c-default-style <span class="org-string">"linux"</span>
      c-basic-offset <span class="org-highlight-numbers-number">4</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org75c1fea" class="outline-3">
<h3 id="org75c1fea">dhall</h3>
<div class="outline-text-3" id="text-org75c1fea">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dhall-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.dhall\\'"</span> . dhall-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> dhall-format-at-save nil
        dhall-format-arguments '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"--ascii"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-eval-after-load</span> 'smartparens
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-eval-after-load</span> 'dhall-mode
      <span class="org-rainbow-delimiters-depth-4">(</span>sp-local-pair 'dhall-mode <span class="org-string">"</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">"</span> <span class="org-string">")"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/dhall-format-and-save</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>dhall-format-buffer<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>save-buffer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>dhall-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> indent-tabs-mode nil
         evil-shift-width <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'dhall-mode <span class="org-string">"s"</span> #'my/dhall-format-and-save<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org275ddde" class="outline-3">
<h3 id="org275ddde">bazel</h3>
<div class="outline-text-3" id="text-org275ddde">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">bazel-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.bazel\\'"</span> . bazel-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.bzl\\'"</span> . bazel-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/bazel-format-and-save</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>fn <span class="org-rainbow-delimiters-depth-6">(</span>file-name-nondirectory buffer-file-name<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>ext <span class="org-rainbow-delimiters-depth-6">(</span>file-name-extension fn<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>tp <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">cond</span>
                <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>string= fn <span class="org-string">"BUILD.bazel"</span><span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"build"</span><span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>string= ext <span class="org-string">"bzl"</span><span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">"bzl"</span><span class="org-rainbow-delimiters-depth-7">)</span>
                <span class="org-rainbow-delimiters-depth-7">(</span>t <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-warning">user-error</span> <span class="org-rainbow-delimiters-depth-9">(</span>format <span class="org-string">"Not a bazel file extension: %s"</span> ext<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>my/format-and-save <span class="org-string">"buildifier"</span> <span class="org-string">"--type"</span> tp<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>save-buffer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'bazel-mode <span class="org-string">"s"</span> #'my/bazel-format-and-save<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5ec479b" class="outline-3">
<h3 id="org5ec479b">nginx</h3>
<div class="outline-text-3" id="text-org5ec479b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">nginx-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"nginx\\.conf\\'"</span> . nginx-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"nginx\\.conf\\.template\\'"</span> . nginx-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1370765" class="outline-3">
<h3 id="org1370765">terraform</h3>
<div class="outline-text-3" id="text-org1370765">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">terraform-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.tf\\'"</span> . terraform-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/terraform-format-and-save</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>terraform-format-buffer<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>save-buffer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'terraform-mode <span class="org-string">"s"</span> #'my/terraform-format-and-save<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd7fc31b" class="outline-3">
<h3 id="orgd7fc31b">docker</h3>
<div class="outline-text-3" id="text-orgd7fc31b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">dockerfile-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Dockerfile.*"</span> . dockerfile-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd7df377" class="outline-3">
<h3 id="orgd7df377">elasticsearch</h3>
<div class="outline-text-3" id="text-orgd7df377">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'auto-mode-alist '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">".es\\'"</span> . js-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org12c3cff" class="outline-3">
<h3 id="org12c3cff">json</h3>
<div class="outline-text-3" id="text-org12c3cff">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">json-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.json\\'"</span> . json-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.json.tmpl\\'"</span> . json-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/json-format-and-save</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>json-mode-beautify<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>save-buffer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'json-mode <span class="org-string">"s"</span> #'my/json-format-and-save<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf65235b" class="outline-3">
<h3 id="orgf65235b">yaml</h3>
<div class="outline-text-3" id="text-orgf65235b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">yaml-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.ya?ml\\'"</span> . yaml-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.ya?ml.template\\'"</span> . yaml-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">flycheck-yamllint</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> <span class="org-rainbow-delimiters-depth-2">(</span>flycheck yaml-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>flycheck-yamllint-setup<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>yaml-mode . flycheck-yamllint-setup<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1294968" class="outline-3">
<h3 id="org1294968">conf</h3>
<div class="outline-text-3" id="text-org1294968">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">add env files to conf-mode alist</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'auto-mode-alist '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">".env\\'"</span> . conf-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'auto-mode-alist '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">".env.local\\'"</span> . conf-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-to-list 'auto-mode-alist '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"env\\.example\\'"</span> . conf-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3160c57" class="outline-3">
<h3 id="org3160c57">reStructuredText</h3>
<div class="outline-text-3" id="text-org3160c57">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">rst</span>
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.rst\\'"</span> . rst-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> rst-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-a"</span> . rst-backward-section<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-e"</span> . rst-forward-section<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> rst-indent-width <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>rst-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> evil-shift-width rst-indent-width<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0fa73ab" class="outline-3">
<h3 id="org0fa73ab">asciidoc</h3>
<div class="outline-text-3" id="text-org0fa73ab">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">adoc-mode</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.adoc\\'"</span> . adoc-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfce3d00" class="outline-2">
<h2 id="orgfce3d00"><span class="section-number-2">30</span> Other major modes</h2>
<div class="outline-text-2" id="text-30">
</div>
<div id="outline-container-orgad3482a" class="outline-3">
<h3 id="orgad3482a">elfeed</h3>
<div class="outline-text-3" id="text-orgad3482a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">elfeed-web</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>elfeed-web-start<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:after</span> elfeed<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">elfeed</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>elfeed<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> elfeed-search-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"U"</span> . elfeed-update<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"o"</span> . my/elfeed-search-other-window<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"q"</span> . my/elfeed-kill-buffer-close-window-dwim<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"e"</span> . my/elfeed-show-eww<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"h"</span> . backward-char<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"j"</span> . next-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"k"</span> . previous-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"l"</span> . forward-char<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-builtin">:map</span> elfeed-show-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"i"</span> . my/elfeed-hide-images<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"e"</span> . my/elfeed-show-eww<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"q"</span> . my/elfeed-kill-buffer-close-window-dwim<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"h"</span> . backward-char<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"j"</span> . next-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"k"</span> . previous-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"l"</span> . forward-char<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"w"</span> . forward-word<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"b"</span> . backward-word<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> elfeed-db-directory <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-string">"elfeed"</span> my/dropbox-emacs-dir<span class="org-rainbow-delimiters-depth-3">)</span>
        elfeed-use-curl t
        elfeed-curl-max-connections <span class="org-highlight-numbers-number">10</span>
        elfeed-search-clipboard-type 'CLIPBOARD
        elfeed-search-filter <span class="org-string">"@10-days-ago +unread"</span>
        elfeed-search-title-max-width <span class="org-highlight-numbers-number">100</span>
        elfeed-search-title-min-width <span class="org-highlight-numbers-number">30</span>
        elfeed-search-trailing-width <span class="org-highlight-numbers-number">30</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/elfeed-hide-images</span> <span class="org-rainbow-delimiters-depth-3">(</span>tog<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>shr-inhibit-images <span class="org-rainbow-delimiters-depth-6">(</span>not tog<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>elfeed-show-refresh<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">prot</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/elfeed-search-other-window</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">&amp;optional</span> arg<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>entry <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>eq major-mode 'elfeed-show-mode<span class="org-rainbow-delimiters-depth-7">)</span>
                      elfeed-show-entry
                    <span class="org-rainbow-delimiters-depth-7">(</span>elfeed-search-selected <span class="org-builtin">:ignore-region</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>link <span class="org-rainbow-delimiters-depth-6">(</span>elfeed-entry-link entry<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>win <span class="org-rainbow-delimiters-depth-6">(</span>selected-window<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-5">(</span>get-buffer <span class="org-string">"*elfeed-search*"</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-6">(</span>one-window-p<span class="org-rainbow-delimiters-depth-6">)</span>              <span class="org-comment-delimiter">; </span><span class="org-comment">experimental</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>delete-other-windows win<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>split-window win <span class="org-rainbow-delimiters-depth-6">(</span>/ <span class="org-rainbow-delimiters-depth-7">(</span>frame-height<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-6">)</span> 'below<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>other-window <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> arg
            <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">progn</span>
              <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-8">(</span>eq major-mode 'elfeed-search-mode<span class="org-rainbow-delimiters-depth-8">)</span>
                <span class="org-rainbow-delimiters-depth-8">(</span>elfeed-search-untag-all-unread<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
              <span class="org-rainbow-delimiters-depth-7">(</span>my/elfeed-show-eww link<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>elfeed-search-show-entry entry<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/elfeed-show-eww</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">&amp;optional</span> link<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>entry <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>eq major-mode 'elfeed-show-mode<span class="org-rainbow-delimiters-depth-7">)</span>
                      elfeed-show-entry
                    <span class="org-rainbow-delimiters-depth-7">(</span>elfeed-search-selected <span class="org-builtin">:ignore-region</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>link <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> link link <span class="org-rainbow-delimiters-depth-7">(</span>elfeed-entry-link entry<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>eww link<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>add-hook 'eww-after-render-hook 'eww-readable nil t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/elfeed-kill-buffer-close-window-dwim</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>win <span class="org-rainbow-delimiters-depth-6">(</span>selected-window<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">cond</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>eq major-mode 'elfeed-show-mode<span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span>elfeed-kill-buffer<span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-7">(</span>one-window-p<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>delete-window win<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span>switch-to-buffer <span class="org-string">"*elfeed-search*"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>eq major-mode 'elfeed-search-mode<span class="org-rainbow-delimiters-depth-6">)</span>
             <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>one-window-p<span class="org-rainbow-delimiters-depth-7">)</span>
                 <span class="org-rainbow-delimiters-depth-7">(</span>elfeed-search-quit-window<span class="org-rainbow-delimiters-depth-7">)</span>
               <span class="org-rainbow-delimiters-depth-7">(</span>delete-other-windows win<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'elfeed-show-mode-hook #'<span class="org-rainbow-delimiters-depth-3">(</span>lambda <span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq-local</span> shr-width <span class="org-highlight-numbers-number">100</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'elfeed-new-entry-hook
            <span class="org-rainbow-delimiters-depth-3">(</span>elfeed-make-tagger <span class="org-builtin">:before</span> <span class="org-string">"2 weeks ago"</span>
                                <span class="org-builtin">:remove</span> 'unread<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'elfeed-search-update-hook #'elfeed-db-save)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'elfeed-update-init-hooks #'elfeed-db-save<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">my/elfeed-important</span>
    '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>t <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"salmon"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Elfeed unread"</span>
    <span class="org-builtin">:group</span> 'my/faces<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span> '<span class="org-rainbow-delimiters-depth-3">(</span>important my/elfeed-important<span class="org-rainbow-delimiters-depth-3">)</span> elfeed-search-face-alist<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">get feeds from personal dir</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>load-file <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-string">"lisp/elfeed-feeds.el"</span> my/dropbox-emacs-dir<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org22f0332" class="outline-3">
<h3 id="org22f0332">pdf tools</h3>
<div class="outline-text-3" id="text-org22f0332">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">pdf-tools</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:magic</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"%PDF"</span> . pdf-view-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> pdf-view-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"j"</span> . pdf-view-next-line-or-next-page<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"k"</span> . pdf-view-previous-line-or-previous-page<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"h"</span> . image-backward-hscroll<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"l"</span> . image-forward-hscroll<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-s"</span> . isearch-forward<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ss"</span> . my/pdf-view-remove-margins-mode<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"cc"</span> . pdf-cache-clear-data<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> pdf-view-display-size 'fit-page
        pdf-view-midnight-colors '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"#b3dfdd"</span> . <span class="org-string">"#0a3749"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">cache stuff, testing</span>
        pdf-cache-image-limit <span class="org-highlight-numbers-number">15</span>
        pdf-cache-prefetch-delay <span class="org-highlight-numbers-number">2</span>
        <span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">remove cached images after x seconds</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> image-cache-eviction-delay <span class="org-highlight-numbers-number">15</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>pdf-tools-install <span class="org-builtin">:no-query</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-extra-pdf-view-mode</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>cur <span class="org-rainbow-delimiters-depth-6">(</span>number-to-string <span class="org-rainbow-delimiters-depth-7">(</span>pdf-view-current-page<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>tot <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">ignore-errors</span> <span class="org-rainbow-delimiters-depth-8">(</span>number-to-string <span class="org-rainbow-delimiters-depth-9">(</span>pdf-cache-number-of-pages<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                   <span class="org-string">"???"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"(%s/%s)"</span> cur tot<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">define-minor-mode</span> <span class="org-function-name">my/pdf-view-remove-margins-mode</span>
    <span class="org-doc">"Minor mode for removing margins from every pdf page."</span>
    <span class="org-builtin">:lighter</span> <span class="org-string">" pdf-margins"</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>not <span class="org-rainbow-delimiters-depth-5">(</span>eq major-mode 'pdf-view-mode<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-warning">user-error</span> <span class="org-string">"Not in a pdf-view-mode buffer"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> my/pdf-view-remove-margins-mode
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">progn</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>pdf-view-set-slice-from-bounding-box<span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>add-hook 'pdf-view-after-change-page-hook #'pdf-view-set-slice-from-bounding-box<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">progn</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>pdf-view-reset-slice<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>remove-hook 'pdf-view-after-change-page-hook #'pdf-view-set-slice-from-bounding-box<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">pdf-outline</span>
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> pdf-outline-buffer-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;backtab&gt;"</span> . outline-hide-sublevels<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org12e1dfb" class="outline-3">
<h3 id="org12e1dfb">erc</h3>
<div class="outline-text-3" id="text-org12e1dfb">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">erc</span>
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>erc my/erc-freenode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> erc-rename-buffers t
        erc-prompt-for-nickserv-password nil
        erc-autojoin-timing 'ident
        erc-fill-function 'erc-fill-static
        erc-fill-static-center <span class="org-highlight-numbers-number">22</span>
        erc-server-reconnect-attempts <span class="org-highlight-numbers-number">5</span>
        erc-server-reconnect-timeout <span class="org-highlight-numbers-number">3</span>
        erc-interpret-mirc-color t
        erc-lurker-hide-list '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"JOIN"</span> <span class="org-string">"PART"</span> <span class="org-string">"QUIT"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        erc-autojoin-channels-alist '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"freenode.net"</span> <span class="org-string">"#haskell"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        erc-fill-column <span class="org-highlight-numbers-number">80</span>
        my/erc-default-nick <span class="org-string">"runforestrun"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/erc-freenode</span> <span class="org-rainbow-delimiters-depth-3">(</span>select-nick<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>nick
           <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> select-nick
               <span class="org-rainbow-delimiters-depth-7">(</span>read-string <span class="org-string">"Nick: "</span><span class="org-rainbow-delimiters-depth-7">)</span>
             my/erc-default-nick<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>erc <span class="org-builtin">:server</span> <span class="org-string">"irc.freenode.net"</span> <span class="org-builtin">:port</span> <span class="org-highlight-numbers-number">6667</span> <span class="org-builtin">:nick</span> nick<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/erc-preprocess</span> <span class="org-rainbow-delimiters-depth-3">(</span>string<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Avoids channel flooding."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>string-trim <span class="org-rainbow-delimiters-depth-4">(</span>replace-regexp-in-string <span class="org-string">"\n+"</span> <span class="org-string">" "</span> str<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/erc-switch-to-buffer</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>read-buffer-function nil<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>call-interactively 'erc-switch-to-buffer<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key erc-mode-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"C-c C-b"</span><span class="org-rainbow-delimiters-depth-3">)</span> 'my/erc-switch-to-buffer<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">https://www.reddit.com/r/emacs/comments/8ml6na/tip_how_to_make_erc_fun_to_use/</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">erc-hl-nicks</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> erc
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> erc-hl-nicks-skip-nicks '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"so"</span> <span class="org-string">"So"</span> <span class="org-string">"bind"</span> <span class="org-string">"hackage"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba2c446" class="outline-3">
<h3 id="orgba2c446">lilypond</h3>
<div class="outline-text-3" id="text-orgba2c446">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">on NixOS this is available when lilypond is installed</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-comment">: make it work outside NixOs</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">lilypond-mode</span>
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.ly\\'"</span> . LilyPond-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">lilypond-mode</span> 'LilyPond-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2c95195" class="outline-2">
<h2 id="org2c95195"><span class="section-number-2">31</span> Searching &amp; jumping</h2>
<div class="outline-text-2" id="text-31">
</div>
<div id="outline-container-org151ab10" class="outline-3">
<h3 id="org151ab10">isearch</h3>
<div class="outline-text-3" id="text-org151ab10">
<p>
<code>C-h k C-s</code> to get a help menu for isearch
</p>

<p>
Some useful isearch keys (before starting the search):
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">key</th>
<th scope="col" class="org-left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">M-s .</td>
<td class="org-left">isearch for thing at point</td>
</tr>
</tbody>
</table>

<p>
And while inside a search:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">key</th>
<th scope="col" class="org-left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">C-w</td>
<td class="org-left">add next word to search</td>
</tr>

<tr>
<td class="org-left">C-e</td>
<td class="org-left">add until EOL to search</td>
</tr>

<tr>
<td class="org-left">M-e</td>
<td class="org-left">edit search in minibuffer (commit with <code>RET</code>)</td>
</tr>

<tr>
<td class="org-left">M-s o</td>
<td class="org-left">run <code>occur</code></td>
</tr>

<tr>
<td class="org-left">M-s r</td>
<td class="org-left">toggle regexp search</td>
</tr>

<tr>
<td class="org-left">M-s .</td>
<td class="org-left">mark whole thing for search</td>
</tr>

<tr>
<td class="org-left">M-s h r</td>
<td class="org-left">highlight current search (<code>hi-lock</code>)</td>
</tr>

<tr>
<td class="org-left">M-%</td>
<td class="org-left">run <code>query-replace</code> on search term</td>
</tr>

<tr>
<td class="org-left">C-M-%</td>
<td class="org-left">run <code>query-replace-regexp</code> on search term</td>
</tr>

<tr>
<td class="org-left">C-l</td>
<td class="org-left"><code>recenter</code></td>
</tr>
</tbody>
</table>

<p>
And some custom additions (mostly stolen from Protesilaos):
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">where</th>
<th scope="col" class="org-left">key</th>
<th scope="col" class="org-left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">in search</td>
<td class="org-left">C-SPC</td>
<td class="org-left">mark search and exit</td>
</tr>

<tr>
<td class="org-left">in search</td>
<td class="org-left">C-RET</td>
<td class="org-left">exit search, but move point to the other side</td>
</tr>

<tr>
<td class="org-left">in search</td>
<td class="org-left">&lt;backspace&gt;</td>
<td class="org-left">delete failing part, one char or exit</td>
</tr>
</tbody>
</table>

<p>
Other useful stuff:
</p>

<ul class="org-ul">
<li>When exiting a search (with <code>RET</code>), <code>C-x C-x</code> will mark from where the search started to where
it finished.</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">isearch</span>
  <span class="org-builtin">:diminish</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> isearch-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-l"</span> . recenter<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-SPC"</span> . my/isearch-mark-and-exit<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;C-return&gt;"</span> . my/isearch-other-end<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;backspace&gt;"</span> . my/isearch-abort-dwim<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> search-whitespace-regexp <span class="org-string">".*?"</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">spaces match anything</span>
        isearch-lax-whitespace t  <span class="org-comment-delimiter">;; </span><span class="org-comment">the default</span>
        isearch-regex-lax-whitespace nil
        isearch-yank-on-move 'shift
        isearch-allow-scroll 'unlimited
        isearch-lazy-count t  <span class="org-comment-delimiter">;; </span><span class="org-comment">show match count and current match index</span>
        lazy-count-prefix-format nil
        lazy-count-suffix-format <span class="org-string">" (%s/%s)"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">prot</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/isearch-mark-and-exit</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>push-mark isearch-other-end t 'activate<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> deactivate-mark nil<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>isearch-done<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/isearch-other-end</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>isearch-done<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> isearch-other-end
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char isearch-other-end<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/isearch-abort-dwim</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Delete failed `</span><span class="org-doc"><span class="org-constant">isearch</span></span><span class="org-doc">' input, single char, or cancel search.</span>

<span class="org-doc">This is a modified variant of `</span><span class="org-doc"><span class="org-constant">isearch-abort</span></span><span class="org-doc">' that allows us to</span>
<span class="org-doc">perform the following, based on the specifics of the case: (i)</span>
<span class="org-doc">delete the entirety of a non-matching part, when present; (ii)</span>
<span class="org-doc">delete a single character, when possible; (iii) exit current</span>
<span class="org-doc">search if no character is present and go back to point where the</span>
<span class="org-doc">search started."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>eq <span class="org-rainbow-delimiters-depth-5">(</span>length isearch-string<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>isearch-cancel<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>isearch-del-char<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-6">(</span>not isearch-success<span class="org-rainbow-delimiters-depth-6">)</span> isearch-error<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>isearch-pop-state<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>isearch-update<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">https://www.reddit.com/r/emacs/comments/b7yjje/isearch_region_search/</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/isearch-region</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">&amp;optional</span> not-regexp no-recursive-edit<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"If a region is active, make this the isearch default search pattern."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P\np"</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>use-region-p<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>search <span class="org-rainbow-delimiters-depth-7">(</span>buffer-substring-no-properties
                     <span class="org-rainbow-delimiters-depth-8">(</span>region-beginning<span class="org-rainbow-delimiters-depth-8">)</span>
                     <span class="org-rainbow-delimiters-depth-8">(</span>region-end<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>deactivate-mark<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>isearch-yank-string search<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>advice-add 'isearch-forward <span class="org-builtin">:after</span> 'my/isearch-region<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>advice-add 'isearch-forward-regexp <span class="org-builtin">:after</span> 'my/isearch-region<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>advice-add 'isearch-backward <span class="org-builtin">:after</span> 'my/isearch-region<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>advice-add 'isearch-backward-regexp <span class="org-builtin">:after</span> 'my/isearch-region<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9c6fad7" class="outline-3">
<h3 id="org9c6fad7">rg</h3>
<div class="outline-text-3" id="text-org9c6fad7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">rg</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>rg my/rg-project-or-ask<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> rg-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"m"</span> . rg-menu<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"s"</span> . my/rg-save-search-as-name<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"N"</span> . my/rg-open-ace-window<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-n"</span> . next-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-p"</span> . previous-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"j"</span> . next-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"k"</span> . previous-line<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-n"</span> . rg-next-file<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-p"</span> . rg-prev-file<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> rg-group-result t
        rg-ignore-case 'smart<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> rg-custom-type-aliases
        '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"coq"</span> . <span class="org-string">"*.v"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">rgp</span> 'my/rg-project-or-ask<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">rg-define-toggle</span> <span class="org-string">"--multiline --multiline-dotall"</span> <span class="org-string">"u"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">rg-define-toggle</span> <span class="org-string">"--word-regexp"</span> <span class="org-string">"w"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">rg-define-toggle</span> <span class="org-string">"--files-with-matches"</span> <span class="org-string">"L"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">rg-define-search</span> <span class="org-function-name">my/rg-project-or-ask</span>
    <span class="org-builtin">:query</span> ask
    <span class="org-builtin">:format</span> regexp
    <span class="org-builtin">:files</span> <span class="org-string">"all"</span>
    <span class="org-builtin">:dir</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-4">(</span>projectile-project-root<span class="org-rainbow-delimiters-depth-4">)</span>
             <span class="org-rainbow-delimiters-depth-4">(</span>read-directory-name <span class="org-string">"rg in: "</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-builtin">:confirm</span> prefix<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">rg-define-search</span> <span class="org-function-name">my/rg-org-directory</span>
    <span class="org-builtin">:query</span> ask
    <span class="org-builtin">:format</span> regexp
    <span class="org-builtin">:files</span> <span class="org-string">"org"</span>
    <span class="org-builtin">:dir</span> my/org-directory
    <span class="org-builtin">:confirm</span> prefix<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">https://protesilaos.com/dotemacs/#h:31622bf2-526b-4426-9fda-c0fc59ac8f4b</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/rg-save-search-as-name</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Save `</span><span class="org-doc"><span class="org-constant">rg</span></span><span class="org-doc">' buffer, naming it after the current search query."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>pattern <span class="org-rainbow-delimiters-depth-6">(</span>rg-search-pattern rg-cur-search<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>rg-save-search-as-name <span class="org-rainbow-delimiters-depth-5">(</span>concat <span class="org-string">"&#171;"</span> pattern <span class="org-string">"&#187;"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/rg-open-ace-window</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">&amp;optional</span> event<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">flet</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>pop-to-buffer <span class="org-rainbow-delimiters-depth-6">(</span>buf <span class="org-type">&amp;rest</span> args<span class="org-rainbow-delimiters-depth-6">)</span>
                          <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>pop-up-windows nil<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                            <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-8">(</span>get-buffer-window buf<span class="org-rainbow-delimiters-depth-8">)</span>
                                <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-9">(</span>not <span class="org-rainbow-delimiters-depth-1">(</span>equal buf <span class="org-rainbow-delimiters-depth-2">(</span>current-buffer<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                                  <span class="org-rainbow-delimiters-depth-9">(</span>other-window <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                              <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">progn</span>
                                <span class="org-rainbow-delimiters-depth-9">(</span>ace-window nil<span class="org-rainbow-delimiters-depth-9">)</span>
                                <span class="org-rainbow-delimiters-depth-9">(</span>switch-to-buffer buf<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>compile-goto-error event<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-orgd67fed4" class="outline-3">
<h3 id="orgd67fed4">imenu-list</h3>
<div class="outline-text-3" id="text-orgd67fed4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">imenu-list</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"C-|"</span> . my/imenu-list-smart-toggle<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/imenu-list-jump-to-window</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Jump to imenu-list window if visible, otherwise create it and jump."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>get-buffer-window imenu-list-buffer-name<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>select-window <span class="org-rainbow-delimiters-depth-5">(</span>get-buffer-window imenu-list-buffer-name<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>imenu-list-minor-mode<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>select-window <span class="org-rainbow-delimiters-depth-6">(</span>get-buffer-window imenu-list-buffer-name<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/imenu-list-smart-toggle</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"If imenu-list window doesn't exist, create it and jump. If if does but</span>
<span class="org-doc">it is not the current buffer, jump there. If it exists and it's the current</span>
<span class="org-doc">buffer, close it."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>eq <span class="org-rainbow-delimiters-depth-5">(</span>current-buffer<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>get-buffer imenu-list-buffer-name<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>imenu-list-quit-window<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>my/imenu-list-jump-to-window<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> imenu-list-size <span class="org-highlight-numbers-number">40</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org35321e0" class="outline-3">
<h3 id="org35321e0">mark</h3>
<div class="outline-text-3" id="text-org35321e0">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/goto-line-show</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Show line numbers temporarily, while prompting for the line number input."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>cur display-line-numbers<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unwind-protect</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">progn</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> display-line-numbers t<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>call-interactively #'goto-line<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> display-line-numbers cur<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-g M-g"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'my/goto-line-show<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>define-key prog-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-a"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'beginning-of-defun<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>define-key prog-mode-map <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-e"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'end-of-defun<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/push-mark-no-activate</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Pushes `</span><span class="org-doc"><span class="org-constant">point</span></span><span class="org-doc">' to `</span><span class="org-doc"><span class="org-constant">mark-ring</span></span><span class="org-doc">' and does not activate the region</span>
<span class="org-doc">   Equivalent to \\[</span><span class="org-doc"><span class="org-constant">set-mark-command</span></span><span class="org-doc">] when \\[</span><span class="org-doc"><span class="org-constant">transient-mark-mode</span></span><span class="org-doc">] is disabled"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>push-mark <span class="org-rainbow-delimiters-depth-3">(</span>point<span class="org-rainbow-delimiters-depth-3">)</span> t nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>message <span class="org-string">"Pushed mark to ring"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"C-`"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'my/push-mark-no-activate<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/jump-to-mark</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-doc">"Jumps to the local mark, respecting the `</span><span class="org-doc"><span class="org-constant">mark-ring</span></span><span class="org-doc">' order.</span>
<span class="org-doc">  This is the same as using \\[</span><span class="org-doc"><span class="org-constant">set-mark-command</span></span><span class="org-doc">] with the prefix argument."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>set-mark-command <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>global-set-key <span class="org-rainbow-delimiters-depth-2">(</span>kbd <span class="org-string">"M-`"</span><span class="org-rainbow-delimiters-depth-2">)</span> 'my/jump-to-mark<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcade917" class="outline-3">
<h3 id="orgcade917">anzu</h3>
<div class="outline-text-3" id="text-orgcade917">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">anzu</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . global-anzu-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> anzu-mode-lighter <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">evil-anzu</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> <span class="org-rainbow-delimiters-depth-2">(</span>evil anzu<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf4b7152" class="outline-2">
<h2 id="orgf4b7152"><span class="section-number-2">32</span> company</h2>
<div class="outline-text-2" id="text-32">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">company</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:diminish</span> company-mode
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-M-i"</span> . company-complete<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-builtin">:map</span> company-active-map
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-p"</span> . company-select-previous<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-n"</span> . company-select-next<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-f"</span> . company-show-location<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"TAB"</span> . company-complete-common-or-cycle<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;tab&gt;"</span> . company-complete-common-or-cycle<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;escape&gt;"</span> . company-abort<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>after-init . global-company-mode<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span>global-company-mode . company-quickhelp-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> company-dabbrev-downcase nil
        company-minimum-prefix-length <span class="org-highlight-numbers-number">3</span>
        company-idle-delay <span class="org-highlight-numbers-number">0.4</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> company-backends <span class="org-rainbow-delimiters-depth-3">(</span>delete 'company-dabbrev company-backends<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> company-backends <span class="org-rainbow-delimiters-depth-3">(</span>delete 'company-capf company-backends<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'company-backends 'company-elisp<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'company-backends 'company-anaconda<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'company-backends 'company-files<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">company-quickhelp</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> company<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">company-anaconda</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> <span class="org-rainbow-delimiters-depth-2">(</span>company anaconda-mode<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org210e6f6" class="outline-2">
<h2 id="org210e6f6"><span class="section-number-2">33</span> flycheck</h2>
<div class="outline-text-2" id="text-33">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-flycheck</span> <span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">flycheck</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:diminish</span> flycheck-mode
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c ! t"</span> . flycheck-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . global-flycheck-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> flycheck-temp-prefix <span class="org-string">".flycheck"</span>
        flycheck-emacs-lisp-load-path 'inherit
        flycheck-check-syntax-automatically '<span class="org-rainbow-delimiters-depth-3">(</span>save mode-enabled<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">to check while typing:</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">flycheck-check-syntax-automatically '(save idle-change new-line mode-enabled)</span>
        <span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/toggle-flycheck-error-list</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">-if-let</span> <span class="org-rainbow-delimiters-depth-4">(</span>window <span class="org-rainbow-delimiters-depth-5">(</span>flycheck-get-error-list-window<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>quit-window nil window<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>flycheck-list-errors<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'display-buffer-alist
               `<span class="org-rainbow-delimiters-depth-3">(</span>,<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">rx</span> bos <span class="org-string">"*Flycheck errors*"</span> eos<span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span>display-buffer-reuse-window
                  display-buffer-in-side-window<span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span>side            . bottom<span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span>reusable-frames . visible<span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span>window-height   . <span class="org-highlight-numbers-number">0.33</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq-default</span> flycheck-disabled-checkers
                <span class="org-rainbow-delimiters-depth-3">(</span>append flycheck-disabled-checkers
                        '<span class="org-rainbow-delimiters-depth-4">(</span>javascript-jshint haskell-ghc haskell-stack-ghc<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>flycheck-add-mode 'javascript-eslint 'web-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>flycheck-add-mode 'javascript-eslint 'js2-mode<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">modeline stuff</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">modeline-flycheck-error</span>
    '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>t <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"#e05e5e"</span> <span class="org-builtin">:distant-foreground</span> <span class="org-string">"#e05e5e"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Face for flycheck error feedback in the modeline."</span>
    <span class="org-builtin">:group</span> 'modeline-flycheck<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">modeline-flycheck-warning</span>
    '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>t <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"#bfb03d"</span> <span class="org-builtin">:distant-foreground</span> <span class="org-string">"#bfb03d"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Face for flycheck warning feedback in the modeline."</span>
    <span class="org-builtin">:group</span> 'modeline-flycheck<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">modeline-flycheck-info</span>
    '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>t <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"DeepSkyBlue3"</span> <span class="org-builtin">:distant-foreground</span> <span class="org-string">"DeepSkyBlue3"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Face for flycheck info feedback in the modeline."</span>
    <span class="org-builtin">:group</span> 'modeline-flycheck<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defface</span> <span class="org-variable-name">modeline-flycheck-ok</span>
    '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>t <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"SeaGreen3"</span> <span class="org-builtin">:distant-foreground</span> <span class="org-string">"SeaGreen3"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-doc">"Face for flycheck ok feedback in the modeline."</span>
    <span class="org-builtin">:group</span> 'modeline-flycheck<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">modeline-flycheck-bullet</span> <span class="org-string">"&#8226;%s"</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-flycheck-state</span> <span class="org-rainbow-delimiters-depth-3">(</span>state<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>counts <span class="org-rainbow-delimiters-depth-6">(</span>flycheck-count-errors flycheck-current-errors<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>errorp <span class="org-rainbow-delimiters-depth-6">(</span>flycheck-has-current-errors-p state<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>err <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-7">(</span>cdr <span class="org-rainbow-delimiters-depth-8">(</span>assq state counts<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"?"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>running <span class="org-rainbow-delimiters-depth-6">(</span>eq 'running flycheck-last-status-change<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>face <span class="org-rainbow-delimiters-depth-6">(</span>intern <span class="org-rainbow-delimiters-depth-7">(</span>format <span class="org-string">"modeline-flycheck-%S"</span> state<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> errorp running<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>propertize <span class="org-rainbow-delimiters-depth-6">(</span>format modeline-flycheck-bullet err<span class="org-rainbow-delimiters-depth-6">)</span> 'face face<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-flycheck</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>ml-error <span class="org-rainbow-delimiters-depth-6">(</span>my/mode-line-flycheck-state 'error<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>ml-warning <span class="org-rainbow-delimiters-depth-6">(</span>my/mode-line-flycheck-state 'warning<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>ml-info <span class="org-rainbow-delimiters-depth-6">(</span>my/mode-line-flycheck-state 'info<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>ml-status <span class="org-rainbow-delimiters-depth-6">(</span>concat ml-error ml-warning ml-info<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>null ml-status<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-5">(</span>concat <span class="org-string">" "</span> ml-status <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org51c94c0" class="outline-2">
<h2 id="org51c94c0"><span class="section-number-2">34</span> projectile</h2>
<div class="outline-text-2" id="text-34">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">projectile</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . projectile-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind-keymap</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"C-c p"</span> . projectile-command-map<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span> projectile-mode
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> projectile-completion-system 'ivy
        projectile-mode-line-function
        '<span class="org-rainbow-delimiters-depth-3">(</span>lambda <span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">" P[%s]"</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-6">(</span>projectile-project-name<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">"-"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">perspective</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . persp-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-N"</span> . persp-next<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-P"</span> . persp-prev<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-J"</span> . persp-switch<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>advice-add 'persp-switch
              <span class="org-builtin">:after</span>
              #'<span class="org-rainbow-delimiters-depth-3">(</span>lambda <span class="org-rainbow-delimiters-depth-4">(</span>n <span class="org-type">&amp;optional</span> r<span class="org-rainbow-delimiters-depth-4">)</span>
                  <span class="org-rainbow-delimiters-depth-4">(</span>message <span class="org-rainbow-delimiters-depth-5">(</span>persp-name <span class="org-rainbow-delimiters-depth-6">(</span>persp-curr<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">emacs window title</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> frame-title-format
        '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span> invocation-name <span class="org-string">"@"</span> system-name
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">when</span> persp-mode <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"[%s]"</span> <span class="org-rainbow-delimiters-depth-7">(</span>persp-name <span class="org-rainbow-delimiters-depth-8">(</span>persp-curr<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">persp-projectile</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> <span class="org-rainbow-delimiters-depth-2">(</span>perspective projectile<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">override chosen project names</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/projectile-project-name-overrides</span> '<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/projectile-add-to-project-name-overrides</span> <span class="org-rainbow-delimiters-depth-2">(</span>proj name<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list
   'my/projectile-project-name-overrides
   `<span class="org-rainbow-delimiters-depth-3">(</span>,<span class="org-rainbow-delimiters-depth-4">(</span>file-name-as-directory <span class="org-rainbow-delimiters-depth-5">(</span>expand-file-name proj<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> . ,name<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/projectile-override-project-name</span> <span class="org-rainbow-delimiters-depth-2">(</span>orig <span class="org-type">&amp;rest</span> args<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>dir <span class="org-rainbow-delimiters-depth-5">(</span>file-name-as-directory <span class="org-rainbow-delimiters-depth-6">(</span>expand-file-name <span class="org-rainbow-delimiters-depth-7">(</span>car args<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>match <span class="org-rainbow-delimiters-depth-5">(</span>assoc dir my/projectile-project-name-overrides<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>name <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>null match<span class="org-rainbow-delimiters-depth-6">)</span> nil <span class="org-rainbow-delimiters-depth-6">(</span>cdr match<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>null name<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>apply orig args<span class="org-rainbow-delimiters-depth-4">)</span>
      name<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>advice-add 'projectile-default-project-name <span class="org-builtin">:around</span> #'my/projectile-override-project-name<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">usage:</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(dolist (override '(</span>
<span class="org-comment-delimiter">;;                     </span><span class="org-comment">("/path/to/my/project" . "some-name")</span>
<span class="org-comment-delimiter">;;                     </span><span class="org-comment">("/other/project" . "some-other-name")</span>
<span class="org-comment-delimiter">;;                     </span><span class="org-comment">))</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">(let ((proj (car override))</span>
<span class="org-comment-delimiter">;;         </span><span class="org-comment">(name (cdr override)))</span>
<span class="org-comment-delimiter">;;     </span><span class="org-comment">(my/projectile-add-to-project-name-overrides proj name)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc7dc75d" class="outline-2">
<h2 id="orgc7dc75d"><span class="section-number-2">35</span> ivy/counsel/swiper</h2>
<div class="outline-text-2" id="text-35">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">counsel-projectile</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> projectile
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> projectile-command-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"f"</span> . counsel-projectile-find-file<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"s"</span> . counsel-projectile-rg<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"b"</span> . counsel-projectile-switch-to-buffer<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> projectile-switch-project-action 'counsel-projectile-find-file<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/swiper</span> <span class="org-rainbow-delimiters-depth-2">(</span>fuzzy<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> fuzzy
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>temp-builders
              <span class="org-rainbow-delimiters-depth-6">(</span>copy-alist ivy-re-builders-alist<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span>ivy-re-builders-alist
              <span class="org-rainbow-delimiters-depth-6">(</span>add-to-list 'temp-builders
                           '<span class="org-rainbow-delimiters-depth-7">(</span>swiper . ivy--regex-fuzzy<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>swiper<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>swiper<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/swiper-fuzzy-or-all</span> <span class="org-rainbow-delimiters-depth-2">(</span>all<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> all
      <span class="org-rainbow-delimiters-depth-3">(</span>swiper-all<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>my/swiper <span class="org-builtin">:fuzzy</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/swiper-isearch</span> <span class="org-rainbow-delimiters-depth-2">(</span>fuzzy<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> fuzzy
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>temp-builders
              <span class="org-rainbow-delimiters-depth-6">(</span>copy-alist ivy-re-builders-alist<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span>ivy-re-builders-alist
              <span class="org-rainbow-delimiters-depth-6">(</span>add-to-list 'temp-builders
                           '<span class="org-rainbow-delimiters-depth-7">(</span>swiper-isearch . ivy--regex-fuzzy<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>swiper-isearch<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>swiper-isearch<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">swiper</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c f"</span> . my/swiper-fuzzy-or-all<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>swiper swiper-isearch swiper-all swiper-multi<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">use regular isearch when in minibuffer</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(define-key minibuffer-local-map (kbd "C-s") #'isearch-forward)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">better fuzzy matching</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">flx</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> ivy<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">mostly to bring recently used M-x targets at the top</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">smex</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> ivy
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> smex-history-length <span class="org-highlight-numbers-number">12</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/ivy-reset-builders</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> ivy-re-builders-alist
        '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>swiper               . ivy--regex-plus<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>swiper-isearch       . ivy--regex-plus<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>ivy-bibtex           . ivy--regex-ignore-order<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>counsel-unicode-char . ivy--regex-ignore-order<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>insert-char          . ivy--regex-ignore-order<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>ucs-insert           . ivy--regex-ignore-order<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>counsel-unicode-char . ivy--regex-ignore-order<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>counsel-ag           . ivy--regex-ignore-order<span class="org-rainbow-delimiters-depth-4">)</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">NOTE</span></span><span class="org-comment">: testing</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>counsel-rg           . ivy--regex-ignore-order<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>t                    . ivy--regex-fuzzy<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/counsel-rg-in</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>counsel-rg nil <span class="org-rainbow-delimiters-depth-3">(</span>read-directory-name <span class="org-string">"rg in: "</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/counsel-file-jump-temp-root</span> <span class="org-rainbow-delimiters-depth-2">(</span>reset<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/get-or-set-temp-root reset<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>current-prefix-arg nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>counsel-file-jump nil my/temp-project-root<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/counsel-rg-temp-root</span> <span class="org-rainbow-delimiters-depth-2">(</span>reset<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/get-or-set-temp-root reset<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>current-prefix-arg nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>counsel-rg <span class="org-string">""</span> my/temp-project-root<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/set-temp-root-and-jump</span> <span class="org-rainbow-delimiters-depth-2">(</span>dir<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> my/temp-project-root dir<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/counsel-file-jump-temp-root nil<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/counsel-file-jump-from-here</span> <span class="org-rainbow-delimiters-depth-2">(</span>path<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>dir <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>file-directory-p path<span class="org-rainbow-delimiters-depth-6">)</span>
                 path
               <span class="org-rainbow-delimiters-depth-6">(</span>file-name-directory path<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>counsel-file-jump <span class="org-string">""</span> dir<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">counsel</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-x"</span> . counsel-M-x<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-i"</span> . counsel-imenu<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x C-f"</span> . counsel-find-file<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x f"</span> . counsel-file-jump<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x r b"</span> . counsel-bookmark<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x C-a"</span> . counsel-recentf<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c s"</span> . my/counsel-rg-in<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-S-p"</span> . my/counsel-file-jump-temp-root<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-S-s"</span> . my/counsel-rg-temp-root<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-builtin">:map</span> org-mode-map
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-i"</span> . counsel-outline<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:after</span> ivy
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> counsel-rg-base-command <span class="org-string">"rg --with-filename --no-heading --line-number --color never -S %s"</span>
        counsel-ag-base-command <span class="org-string">"ag --vimgrep --nocolor --nogroup %s"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/ivy-reset-builders<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> ivy-initial-inputs-alist nil<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">no ^ initially</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">counsel-ag</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">S-SPC doesn't work properly in counsel-ag anyway</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">NOTE</span></span><span class="org-comment">: this also applies to rg</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>define-key counsel-ag-map <span class="org-rainbow-delimiters-depth-3">(</span>kbd <span class="org-string">"S-SPC"</span><span class="org-rainbow-delimiters-depth-3">)</span> nil<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>action '<span class="org-rainbow-delimiters-depth-4">(</span>counsel-find-file counsel-file-jump counsel-recentf<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ivy-set-actions
     action
     `<span class="org-rainbow-delimiters-depth-4">(</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"s"</span>
        ,<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">my/control-function-window-split</span>
          find-file-other-window
          <span class="org-highlight-numbers-number">0</span> nil<span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"split horizontally"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"v"</span>
        ,<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">my/control-function-window-split</span>
          find-file-other-window
          nil <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"split vertically"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"n"</span>
        ,<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">my/execute-f-with-hook</span>
          find-file
          ace-select-window<span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"select window"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"e"</span>
        my/eshell-in-dir
        <span class="org-string">"eshell"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"j"</span>
        my/counsel-file-jump-from-here
        <span class="org-string">"jump"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"J"</span>
        my/set-temp-root-and-jump
        <span class="org-string">"set temp root and jump"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"r"</span>
        <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>dir<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>counsel-rg nil dir<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"counsel-rg"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>action '<span class="org-rainbow-delimiters-depth-4">(</span>counsel-projectile-find-file projectile-recentf<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ivy-set-actions
     action
     `<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"s"</span>
        ,<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">my/control-function-window-split</span>
          counsel-projectile-find-file-action-other-window
          <span class="org-highlight-numbers-number">0</span> nil<span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"split horizontally"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"v"</span>
        ,<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">my/control-function-window-split</span>
          counsel-projectile-find-file-action-other-window
          nil <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"split vertically"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"n"</span>
        ,<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">my/execute-f-with-hook</span>
          counsel-projectile-find-file-action
          ace-select-window<span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"select window"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"R"</span>
        <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>f<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>projectile-recentf<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"recent files"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"e"</span>
        <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>f<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>my/eshell-in-dir <span class="org-rainbow-delimiters-depth-8">(</span>projectile-expand-root f<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"eshell"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">also applies to counsel-projectile-ag</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-3">(</span>action '<span class="org-rainbow-delimiters-depth-4">(</span>counsel-ag counsel-rg<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>ivy-set-actions
     action
     '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"v"</span>
        <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>split-window-right<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>windmove-right<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>counsel-git-grep-action x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"split vertically"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"s"</span>
        <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>split-window-below<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>windmove-down<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>counsel-git-grep-action x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"split horizontally"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-string">"n"</span>
        <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>x<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>ace-select-window<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>counsel-git-grep-action x<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
        <span class="org-string">"select window"</span><span class="org-rainbow-delimiters-depth-5">)</span>
       <span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/ivy-yank-current-region-or-word</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> qual<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Insert current region, if it's active, otherwise the current word,into</span>
<span class="org-doc">the minibuffer."</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span>text<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>with-ivy-window
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">unwind-protect</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> text
                <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-7">(</span>region-active-p<span class="org-rainbow-delimiters-depth-7">)</span>
                    <span class="org-rainbow-delimiters-depth-7">(</span>buffer-substring-no-properties <span class="org-rainbow-delimiters-depth-8">(</span>region-beginning<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-rainbow-delimiters-depth-8">(</span>region-end<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
                  <span class="org-rainbow-delimiters-depth-7">(</span>current-word t <span class="org-rainbow-delimiters-depth-8">(</span>not qual<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> text <span class="org-rainbow-delimiters-depth-4">(</span>insert text<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ivy</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:diminish</span> ivy-mode
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . ivy-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c r"</span> . ivy-resume<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x b"</span> . ivy-switch-buffer<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-builtin">:map</span> ivy-minibuffer-map
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-j"</span> . my/ivy-yank-current-region-or-word<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"M-r"</span> . ivy-rotate-preferred-builders<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-l"</span> . ivy-call-and-recenter<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-o"</span> . ivy-minibuffer-grow<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-S-o"</span> . ivy-minibuffer-shrink<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> ivy-use-virtual-buffers nil
        ivy-count-format <span class="org-string">"(%d/%d) "</span>
        ivy-magic-tilde nil
        ivy-initial-inputs-alist nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/ivy-reset-builders<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">minibuffer actions for specific commands</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>ivy-set-actions
   'ivy-switch-buffer
   `<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"s"</span>
      ,<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">my/control-function-window-split</span>
        ivy--switch-buffer-other-window-action
        <span class="org-highlight-numbers-number">0</span> nil<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-string">"split horizontally"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"v"</span>
      ,<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">my/control-function-window-split</span>
        ivy--switch-buffer-other-window-action
        nil <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-string">"split vertically"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"n"</span>
      ,<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">my/execute-f-with-hook</span>
        <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-7">(</span>b<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>switch-to-buffer b nil 'force-same-window<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
        ace-select-window<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-string">"select window"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"k"</span> kill-buffer <span class="org-string">"kill buffer"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>ivy-set-actions
   'projectile-switch-project
   '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"d"</span>
      dired
      <span class="org-string">"Open Dired in project's directory"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"v"</span>
      projectile-vc
      <span class="org-string">"Open project root in vc-dir or magit"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"r"</span>
      projectile-remove-known-project
      <span class="org-string">"Remove project(s)"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ivy-xref</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">currently in lisp/ because of patches</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>ivy-xref-show-xrefs<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> xref-show-xrefs-function 'ivy-xref-show-xrefs<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:after</span> ivy<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2e6df1e" class="outline-2">
<h2 id="org2e6df1e"><span class="section-number-2">36</span> yasnippet</h2>
<div class="outline-text-2" id="text-36">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">yasnippet-snippets</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> yasnippet
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>yas-reload-all<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">yasnippet</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c y"</span> . yas-expand<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;C-return&gt;"</span> . yas-expand<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span> <span class="org-rainbow-delimiters-depth-2">(</span>yas-global-mode yas-minor-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">NOTE</span></span><span class="org-comment">: the reason for not putting it in `</span><span class="org-comment"><span class="org-constant">after-init-hook</span></span><span class="org-comment">' is to defer</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">loading until it `</span><span class="org-comment"><span class="org-constant">yas-expand</span></span><span class="org-comment">' has been run the first time</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>yas-global-mode <span class="org-highlight-numbers-number">+1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org19cd964" class="outline-2">
<h2 id="org19cd964"><span class="section-number-2">37</span> org-mode</h2>
<div class="outline-text-2" id="text-37">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">this is the same as doing org-babel-load-languages</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ob-python</span> <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-babel-execute:python<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ob-sql</span> <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-babel-execute:sql<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ob-lilypond</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-babel-execute:lilypond<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:custom</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-babel-lilypond-commands '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"lilypond -daux-files=#f"</span> <span class="org-string">"xdg-open"</span> <span class="org-string">"xdg-open"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-lilypond-preprocess-block</span> <span class="org-rainbow-delimiters-depth-3">(</span>args<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>defaults <span class="org-rainbow-delimiters-depth-6">(</span>string-join
                      '<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">"\\layout{"</span>
                        <span class="org-string">"#(layout-set-staff-size 25)"</span>
                        <span class="org-string">"}"</span>
                        <span class="org-string">"\\paper{"</span>
                        <span class="org-string">"indent=0\\mm"</span>
                        <span class="org-string">"line-width=200\\mm"</span>
                        <span class="org-string">"oddFooterMarkup=##f"</span>
                        <span class="org-string">"oddHeaderMarkup=##f"</span>
                        <span class="org-string">"bookTitleMarkup=##f"</span>
                        <span class="org-string">"scoreTitleMarkup=##f"</span>
                        <span class="org-string">"}"</span>
                        <span class="org-rainbow-delimiters-depth-7">)</span>
                      <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>body <span class="org-rainbow-delimiters-depth-6">(</span>car args<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>newbody <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"%s\n%s"</span> defaults body<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>params <span class="org-rainbow-delimiters-depth-6">(</span>cadr args<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>list newbody params<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>advice-add 'org-babel-execute:lilypond
              <span class="org-builtin">:filter-args</span>
              'my/org-lilypond-preprocess-block<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">use this bookmark:</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">javascript:location.href='org-protocol://capture?template=r'+</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">'&amp;url='+encodeURIComponent(location.href)+</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">'&amp;title='+encodeURIComponent(document.title)+</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">'&amp;body='+encodeURIComponent(window.getSelection())</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">require</span> '<span class="org-constant">org-protocol</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Without this, quitting an org-protocol capture results in re-opening</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">the link with another mimeapp (firefox), and might result in an</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">infinite loop. This still deletes the client, but it does so cleanly.</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-comment">: think of a better way</span>
<span class="org-rainbow-delimiters-depth-1">(</span>advice-add 'server-return-error
            <span class="org-builtin">:override</span>
            '<span class="org-rainbow-delimiters-depth-2">(</span>lambda <span class="org-rainbow-delimiters-depth-3">(</span>proc err<span class="org-rainbow-delimiters-depth-3">)</span>
               <span class="org-rainbow-delimiters-depth-3">(</span>message <span class="org-string">"exiting client"</span><span class="org-rainbow-delimiters-depth-3">)</span>
               <span class="org-rainbow-delimiters-depth-3">(</span>server-delete-client proc<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-capture</span>
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-capture<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c c"</span> . org-capture<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-capture-templates
        '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"r"</span>
           <span class="org-string">"Web link (roam)"</span>
           entry
           <span class="org-rainbow-delimiters-depth-5">(</span>file my/org-roam-find-filename<span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-string">"* %^{Title|%:description} %U\nSource: %a \n\n%i"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"i"</span>
           <span class="org-string">"Immediate note"</span>
           entry
           <span class="org-rainbow-delimiters-depth-5">(</span>file my/org-roam-find-filename<span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-string">"* %U %:description\n%i"</span>
           <span class="org-builtin">:immediate-finish</span> t<span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"l"</span>
           <span class="org-string">"Link to file"</span>
           entry
           <span class="org-rainbow-delimiters-depth-5">(</span>file my/org-roam-find-filename<span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-string">"* </span><span class="org-string"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-string"> %?\n%a\n\n%i"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"c"</span>
           <span class="org-string">"Code comment"</span>
           entry
           <span class="org-rainbow-delimiters-depth-5">(</span>file my/org-roam-find-filename<span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-string">"* </span><span class="org-string"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-string"> %?\n%a\n\n#+begin_src %^{Language}\n%i#+end_src\n\n"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-indent</span>
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-mode . org-indent-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-indent-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-agenda</span>
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c a"</span> . org-agenda<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-agenda-custom-commands
        '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"c"</span> <span class="org-string">"Simple agenda view"</span>
           <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>tags <span class="org-string">"PRIORITY=\"A\""</span>
                  <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-rainbow-delimiters-depth-8">(</span>org-agenda-skip-function '<span class="org-rainbow-delimiters-depth-9">(</span>org-agenda-skip-entry-if 'todo 'done<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                   <span class="org-rainbow-delimiters-depth-8">(</span>org-agenda-overriding-header <span class="org-string">"High-priority unfinished tasks:"</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>agenda <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>alltodo <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-agenda-files <span class="org-rainbow-delimiters-depth-3">(</span>list my/org-directory
                               <span class="org-rainbow-delimiters-depth-4">(</span>expand-file-name <span class="org-string">"papers"</span> my/org-directory<span class="org-rainbow-delimiters-depth-4">)</span>
                               <span class="org-rainbow-delimiters-depth-4">(</span>expand-file-name <span class="org-string">"orgzly"</span> my/org-directory<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-src</span>
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-src-fontify-natively t
        org-src-tab-acts-natively t
        org-src-window-setup 'other-window
        org-src-preserve-indentation t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">ox</span>
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-export-with-toc nil
        org-export-with-section-numbers <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org</span>
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\\.org\\'"</span> . org-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c b"</span> . org-iswitchb<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c l"</span> . org-store-link<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c &amp;"</span> . org-mark-ring-goto<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-directory my/org-directory
        org-default-notes-file <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-string">"notes.org"</span> org-directory<span class="org-rainbow-delimiters-depth-3">)</span>
        org-log-done 'time
        org-confirm-babel-evaluate nil
        org-clock-into-drawer nil
        org-keep-stored-link-after-insertion t
        org-edit-src-content-indentation <span class="org-highlight-numbers-number">0</span>
        org-src-window-setup 'other-window
        org-adapt-indentation nil
        org-ellipsis <span class="org-string">"&#8230;"</span>
        org-tags-column <span class="org-highlight-numbers-number">-80</span>
        org-image-actual-width nil
        org-startup-with-inline-images t
        org-blank-before-new-entry '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>heading . nil<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>plain-list-item . nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        org-todo-keywords '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>sequence <span class="org-string">"</span><span class="org-string"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-string">"</span> <span class="org-string">"IN PROGRESS"</span> <span class="org-string">"|"</span> <span class="org-string">"</span><span class="org-string"><span class="org-myXspecial-comment-keyword">DONE</span></span><span class="org-string">"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        org-todo-keyword-faces '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"IN PROGRESS"</span> . <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"DarkOrange3"</span> <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        org-link-frame-setup '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>file . find-file<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">templates</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-structure-template-alist
        '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"s"</span> . <span class="org-string">"src"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"e"</span> . <span class="org-string">"example"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"q"</span> . <span class="org-string">"quote"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"v"</span> . <span class="org-string">"verse"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"ht"</span> . <span class="org-string">"export html"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"la"</span> . <span class="org-string">"export latex"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"b"</span> . <span class="org-string">"src bash"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"el"</span> . <span class="org-string">"src emacs-lisp"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"h"</span> . <span class="org-string">"src haskell"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"p"</span> . <span class="org-string">"src python"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-tempo-keywords-alist
        '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"I"</span> . <span class="org-string">"INDEX"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"L"</span> . <span class="org-string">"LATEX"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"T"</span> . <span class="org-string">"TITLE"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"H"</span> . <span class="org-string">"HTML"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">refile</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-refile-targets '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>nil . <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:maxlevel</span> . <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        org-refile-use-outline-path 'file
        org-outline-path-complete-in-steps nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">format string used when creating CLOCKSUM lines and when generating a</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">time duration (avoid showing days)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-time-clocksum-format
        '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:hours</span> <span class="org-string">"%d"</span> <span class="org-builtin">:require-hours</span> t <span class="org-builtin">:minutes</span> <span class="org-string">":%02d"</span> <span class="org-builtin">:require-minutes</span> t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">require</span> '<span class="org-constant">org-tempo</span> nil <span class="org-builtin">:noerror</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'org-mode <span class="org-string">"c"</span> 'org-cliplink<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'org-mode <span class="org-string">"it"</span> 'my/org-insert-date-today<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'org-mode <span class="org-string">"tl"</span> 'org-toggle-link-display<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>my/define-major-mode-key 'org-mode <span class="org-string">"tm"</span> 'my/org-toggle-markup<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'org-babel-after-execute-hook 'org-display-inline-images 'append<span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-rainbow-delimiters-depth-2">(</span>my/set-mode-fill-width 'org-mode-hook <span class="org-highlight-numbers-number">100</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>org-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>define-key org-mode-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"TAB"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'org-cycle<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span>define-key org-mode-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"&lt;tab&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'org-cycle<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">evil-define-key</span> 'normal org-mode-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"TAB"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'org-cycle<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">evil-define-key</span> 'normal org-mode-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"&lt;tab&gt;"</span><span class="org-rainbow-delimiters-depth-4">)</span> 'org-cycle<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">kill any "unsaved" fontification buffer that might cause a save prompt when quitting emacs</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>advice-add 'save-buffers-kill-terminal
              <span class="org-builtin">:before</span>
              #'my/org-kill-fontification-buffers<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-insert-date-today</span> <span class="org-rainbow-delimiters-depth-2">(</span>active<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"P"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-insert-time-stamp <span class="org-rainbow-delimiters-depth-3">(</span>current-time<span class="org-rainbow-delimiters-depth-3">)</span> nil <span class="org-rainbow-delimiters-depth-3">(</span>not active<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-toggle-markup</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-hide-emphasis-markers <span class="org-rainbow-delimiters-depth-3">(</span>not org-hide-emphasis-markers<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>font-lock-fontify-buffer <span class="org-builtin">:interactively</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-export-conf</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-export-with-toc t<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>org-export-with-section-numbers <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>org-html-htmlize-output-type 'css<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>org-html-head-extra
         <span class="org-rainbow-delimiters-depth-5">(</span>string-join
          '<span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"&lt;link href=\"/htmlize.css\" rel=\"stylesheet\"&gt;"</span>
            <span class="org-string">"&lt;link href=\"/readtheorg.css\" rel=\"stylesheet\"&gt;"</span>
            <span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-temp-buffer</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert-file <span class="org-rainbow-delimiters-depth-5">(</span>expand-file-name <span class="org-string">"configuration.org"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-export-to-file 'html <span class="org-rainbow-delimiters-depth-5">(</span>expand-file-name <span class="org-string">"docs/index.html"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-kill-fontification-buffers</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> silent<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>mapc
   #'kill-buffer
   <span class="org-rainbow-delimiters-depth-3">(</span>seq-filter
    <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>buf<span class="org-rainbow-delimiters-depth-5">)</span>
      <span class="org-rainbow-delimiters-depth-5">(</span>string-match <span class="org-string">"^\\ \\*org-src-fontification:.*\\*$"</span> <span class="org-rainbow-delimiters-depth-6">(</span>buffer-name buf<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
    <span class="org-rainbow-delimiters-depth-4">(</span>buffer-list<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-cliplink</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> org-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c C-S-l"</span> . org-cliplink<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-cliplink-max-length <span class="org-highlight-numbers-number">80</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-bullets</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:if</span> is-gui
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-mode . org-bullets-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-bullets-bullet-list <span class="org-rainbow-delimiters-depth-3">(</span>append '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"&#9673;"</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>make-list <span class="org-highlight-numbers-number">7</span> <span class="org-string">"&#9675;"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        org-hide-leading-stars t<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">htmlize</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-html-htmlize-output-type 'inline-css<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbcdc09a" class="outline-2">
<h2 id="orgbcdc09a"><span class="section-number-2">38</span> org-roam</h2>
<div class="outline-text-2" id="text-38">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-roam</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>after-init . org-roam-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:diminish</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> org-roam-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n b"</span> . org-roam-switch-to-buffer<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n f"</span> . org-roam-find-file<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n g"</span> . org-roam-graph<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n j"</span> . org-roam-dailies-today<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n J"</span> . org-roam-dailies-date<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n l"</span> . org-roam<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n s"</span> . my/org-roam-rg<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n S"</span> . my/rg-org-directory<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n u"</span> . org-roam-unlinked-references<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n x"</span> . org-roam-jump-to-index<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n !"</span> . my/org-roam-refresh<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-builtin">:map</span> org-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n I"</span> . org-roam-insert<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n i"</span> . my/org-roam-insert-no-capture<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n h"</span> . my/org-roam-insert-link-to-heading<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-roam-directory my/org-directory
        org-roam-db-location <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-string">"org-roam.db"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-3">)</span>
        org-roam-index-file <span class="org-string">"home.org"</span>
        org-roam-link-title-format <span class="org-string">"%s"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-roam-graph-viewer
        <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-4">(</span>executable-find <span class="org-string">"google-chrome-stable"</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span>executable-find <span class="org-string">"google-chrome"</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span>executable-find <span class="org-string">"firefox"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        org-roam-graph-exclude-matcher '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"index.org"</span> <span class="org-string">"theindex.org"</span> <span class="org-string">"home.org"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-roam-dailies-capture-templates
        '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"d"</span> <span class="org-string">"daily"</span> plain <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">function</span> org-roam-capture--get-point<span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-string">""</span>
           <span class="org-builtin">:immediate-finish</span> t
           <span class="org-builtin">:file-name</span> <span class="org-string">"daily-%&lt;%Y-%m-%d&gt;"</span>
           <span class="org-builtin">:head</span> <span class="org-string">"#+TITLE: %&lt;%A, %d %b %Y&gt;\n\n- tags :: [[file:daily.org][daily notes]]\n"</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'org-refile-targets '<span class="org-rainbow-delimiters-depth-3">(</span>org-roam--list-all-files . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:maxlevel</span> . <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'org-roam-backlinks-mode-hook 'org-indent-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">my/add-hooks</span>
   '<span class="org-rainbow-delimiters-depth-3">(</span>org-mode-hook<span class="org-rainbow-delimiters-depth-3">)</span>
   <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-5">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-5">)</span>
              <span class="org-rainbow-delimiters-depth-5">(</span>org-roam--org-roam-file-p <span class="org-rainbow-delimiters-depth-6">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-rainbow-delimiters-depth-4">(</span>add-hook 'before-save-hook #'my/org-roam-add-roam-tags-property nil t<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">with-eval-after-load</span> 'evil
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">evil-define-key</span> 'visual org-mode-map <span class="org-rainbow-delimiters-depth-4">(</span>kbd <span class="org-string">"[["</span><span class="org-rainbow-delimiters-depth-4">)</span> 'my/org-roam-insert-no-capture<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'org-tempo-keywords-alist '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ra"</span> . <span class="org-string">"ROAM_ALIAS"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'org-tempo-keywords-alist '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"rt"</span> . <span class="org-string">"ROAM_TAGS"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-roam-protocol</span>
  <span class="org-builtin">:after</span> org-roam<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">company-org-roam</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> company org-roam
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">push</span> 'company-org-roam company-backends<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-roam-server</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-roam-server-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-roam-server-port <span class="org-highlight-numbers-number">25002</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">this is in lisp/ for now</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">my-org-roam-publish</span>
  <span class="org-builtin">:after</span> org-roam
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>my/org-roam-publish<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> org-roam-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n p"</span> . my/org-roam-publish<span class="org-rainbow-delimiters-depth-3">)</span>
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n P"</span> . my/org-roam-publish-current-file<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-roam-refresh</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-roam-db-build-cache <span class="org-builtin">:force</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>org-roam-buffer--update-maybe <span class="org-builtin">:redisplay</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-roam-rg-transformer</span> <span class="org-rainbow-delimiters-depth-2">(</span>str<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>string-match <span class="org-string">"\\`</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">:]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">:]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:"</span> str<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>parts <span class="org-rainbow-delimiters-depth-6">(</span>split-string str <span class="org-string">":"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span>path <span class="org-rainbow-delimiters-depth-6">(</span>elt parts <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span>line <span class="org-rainbow-delimiters-depth-6">(</span>elt parts <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span>match <span class="org-rainbow-delimiters-depth-6">(</span>string-join <span class="org-rainbow-delimiters-depth-7">(</span>cddr parts<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">":"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span>abspath <span class="org-rainbow-delimiters-depth-6">(</span>concat org-roam-directory path<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
             <span class="org-rainbow-delimiters-depth-5">(</span>roam-title <span class="org-rainbow-delimiters-depth-6">(</span>org-roam--get-title-or-slug abspath<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>format <span class="org-string">"%s:%s:%s"</span>
                <span class="org-rainbow-delimiters-depth-5">(</span>propertize roam-title 'face 'ivy-grep-info<span class="org-rainbow-delimiters-depth-5">)</span>
                <span class="org-rainbow-delimiters-depth-5">(</span>propertize line 'face 'ivy-grep-line-number<span class="org-rainbow-delimiters-depth-5">)</span>
                match<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    str<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-roam-rg</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-comment">: find a better way</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>ivy--display-transformers-list '<span class="org-rainbow-delimiters-depth-5">(</span>counsel-rg my/org-roam-rg-transformer<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>counsel-rg <span class="org-string">""</span> org-roam-directory <span class="org-string">"-g '*.org'"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-roam-filename-from-title</span> <span class="org-rainbow-delimiters-depth-2">(</span>title<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>tmpl <span class="org-rainbow-delimiters-depth-5">(</span>concat org-roam-capture--file-name-default <span class="org-string">"-${slug}"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>slug <span class="org-rainbow-delimiters-depth-5">(</span>org-roam--title-to-slug title<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>string-trim <span class="org-rainbow-delimiters-depth-4">(</span>org-roam-capture--fill-template tmpl `<span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>slug . ,slug<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-roam-find-filename</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>completions <span class="org-rainbow-delimiters-depth-5">(</span>org-roam--get-title-path-completions<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>title <span class="org-rainbow-delimiters-depth-5">(</span>org-roam-completion--completing-read <span class="org-string">"File: "</span> completions<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>filename <span class="org-rainbow-delimiters-depth-5">(</span>plist-get <span class="org-rainbow-delimiters-depth-6">(</span>cdr <span class="org-rainbow-delimiters-depth-7">(</span>assoc title completions<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-builtin">:path</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>null filename<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>create-fn <span class="org-rainbow-delimiters-depth-7">(</span>concat <span class="org-rainbow-delimiters-depth-8">(</span>my/org-roam-filename-from-title title<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-string">".org"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
               <span class="org-rainbow-delimiters-depth-6">(</span>key <span class="org-rainbow-delimiters-depth-7">(</span>format <span class="org-string">"#+TITLE: %s\n\n"</span> title<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> filename <span class="org-rainbow-delimiters-depth-6">(</span>expand-file-name create-fn org-roam-directory<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>write-region key nil filename<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>org-roam-db-build-cache <span class="org-builtin">:force</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    filename<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-roam-insert-no-capture</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>org-roam-capture-templates
         <span class="org-rainbow-delimiters-depth-5">(</span>mapcar
          #'<span class="org-rainbow-delimiters-depth-6">(</span>lambda <span class="org-rainbow-delimiters-depth-7">(</span>tmpl<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span>append tmpl '<span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:immediate-finish</span> t<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          org-roam-capture-templates<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>funcall-interactively 'org-roam-insert<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-roam-extract-tags</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>tags nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>org-element-map <span class="org-rainbow-delimiters-depth-4">(</span>org-element-parse-buffer<span class="org-rainbow-delimiters-depth-4">)</span> 'plain-list
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>lst<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-6">(</span>eq <span class="org-rainbow-delimiters-depth-7">(</span>org-element-property <span class="org-builtin">:type</span> lst<span class="org-rainbow-delimiters-depth-7">)</span> 'descriptive<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>org-element-map lst 'item
            <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-8">(</span>item<span class="org-rainbow-delimiters-depth-8">)</span>
              <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-rainbow-delimiters-depth-1">(</span>maybe-tag <span class="org-rainbow-delimiters-depth-2">(</span>elt <span class="org-rainbow-delimiters-depth-3">(</span>org-element-property <span class="org-builtin">:tag</span> item<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                     <span class="org-rainbow-delimiters-depth-1">(</span>tag <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-3">(</span>stringp maybe-tag<span class="org-rainbow-delimiters-depth-3">)</span>
                               <span class="org-rainbow-delimiters-depth-3">(</span>substring-no-properties <span class="org-rainbow-delimiters-depth-4">(</span>elt <span class="org-rainbow-delimiters-depth-5">(</span>org-element-property <span class="org-builtin">:tag</span> item<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span>
                <span class="org-rainbow-delimiters-depth-9">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">and</span> tag
                           <span class="org-rainbow-delimiters-depth-2">(</span>string-equal tag <span class="org-string">"tags"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
                  <span class="org-rainbow-delimiters-depth-1">(</span>org-element-map item 'paragraph
                    <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>par<span class="org-rainbow-delimiters-depth-3">)</span>
                      <span class="org-rainbow-delimiters-depth-3">(</span>org-element-map par 'link
                        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-5">(</span>link<span class="org-rainbow-delimiters-depth-5">)</span>
                          <span class="org-rainbow-delimiters-depth-5">(</span>add-to-list 'tags <span class="org-rainbow-delimiters-depth-6">(</span>substring-no-properties <span class="org-rainbow-delimiters-depth-7">(</span>elt link <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      nil <span class="org-builtin">:first-only</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>reverse tags<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-roam-add-roam-tags-property</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>tags <span class="org-rainbow-delimiters-depth-5">(</span>my/org-roam-extract-tags<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>tags-str <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-4">(</span>tag tags<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> tags-str
            <span class="org-rainbow-delimiters-depth-5">(</span>concat tags-str
                    <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">" \"%s\""</span> tag<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">save-excursion</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward <span class="org-string">"^#\\+ROAM_TAGS"</span> nil t<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">progn</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>beginning-of-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>kill-line<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>goto-char <span class="org-rainbow-delimiters-depth-6">(</span>point-min<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>re-search-forward <span class="org-string">"^$"</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>newline<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>previous-line<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> tags
          <span class="org-rainbow-delimiters-depth-5">(</span>insert <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"#+ROAM_TAGS:%s"</span> tags-str<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>kill-line<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Insert link to heading</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-mode-select-heading</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">&amp;optional</span> filename<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>null filename<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>my/-org-mode-select-heading<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-temp-buffer</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert-file-contents filename<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>org-mode<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>my/-org-mode-select-heading<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/-org-mode-select-heading</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>settings <span class="org-rainbow-delimiters-depth-5">(</span>cdr <span class="org-rainbow-delimiters-depth-6">(</span>assq 'org-mode counsel-outline-settings<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>res <span class="org-rainbow-delimiters-depth-5">(</span>substring-no-properties
               <span class="org-rainbow-delimiters-depth-6">(</span>ivy-read <span class="org-string">"Heading: "</span> <span class="org-rainbow-delimiters-depth-7">(</span>counsel-outline-candidates settings<span class="org-rainbow-delimiters-depth-7">)</span>
                         <span class="org-builtin">:history</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-8">(</span>plist-get settings <span class="org-builtin">:history</span><span class="org-rainbow-delimiters-depth-8">)</span>
                                      'counsel-outline-history<span class="org-rainbow-delimiters-depth-7">)</span>
                         <span class="org-builtin">:preselect</span> <span class="org-rainbow-delimiters-depth-7">(</span>max <span class="org-rainbow-delimiters-depth-8">(</span>1- counsel-outline--preselect<span class="org-rainbow-delimiters-depth-8">)</span> <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-7">)</span>
                         <span class="org-builtin">:caller</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-8">(</span>plist-get settings <span class="org-builtin">:caller</span><span class="org-rainbow-delimiters-depth-8">)</span>
                                     'counsel-outline<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>car <span class="org-rainbow-delimiters-depth-4">(</span>last <span class="org-rainbow-delimiters-depth-5">(</span>split-string res <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-link-make-string-with-heading</span> <span class="org-rainbow-delimiters-depth-2">(</span>params<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>link <span class="org-rainbow-delimiters-depth-5">(</span>car params<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>description <span class="org-rainbow-delimiters-depth-5">(</span>cadr params<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>fname <span class="org-rainbow-delimiters-depth-5">(</span>string-trim-left link <span class="org-string">"file:"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>heading <span class="org-rainbow-delimiters-depth-5">(</span>my/org-mode-select-heading fname<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>newlink <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"%s::%s"</span> link heading<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>newdescription <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>null description<span class="org-rainbow-delimiters-depth-6">)</span>
                             nil
                           <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"%s::%s"</span> description heading<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>list newlink newdescription<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-roam-insert-link-to-heading</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>advice-add 'org-link-make-string <span class="org-builtin">:filter-args</span> 'my/org-link-make-string-with-heading<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>funcall-interactively 'org-roam-insert<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>advice-remove 'org-link-make-string 'my/org-link-make-string-with-heading<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org50e300d" class="outline-2">
<h2 id="org50e300d"><span class="section-number-2">39</span> org-download</h2>
<div class="outline-text-2" id="text-39">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-download</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:hook</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-mode . org-download-enable<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-download-method 'directory
        org-download-screenshot-method <span class="org-string">"scrot -s %s"</span>
        org-download-image-dir <span class="org-string">"~/Pictures/Screenshots/"</span>
        org-download-heading-lvl nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defalias</span> '<span class="org-function-name">scrot</span> 'org-download-screenshot<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb839e61" class="outline-2">
<h2 id="orgb839e61"><span class="section-number-2">40</span> org-ref, org-noter &amp; bibtex</h2>
<div class="outline-text-2" id="text-40">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/dropbox-papers-dir</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"papers/"</span> my/dropbox-dir<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Dropbox papers directory"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/dropbox-papers-bibtex</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"papers.bib"</span> my/dropbox-papers-dir<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Dropbox bibtex bibliography file"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">bibtex</span>
  <span class="org-builtin">:mode</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\.bib\\'"</span> . bibtex-mode<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> bibtex-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c C-c"</span> . my/bibtex-format-and-clean-entry<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> bibtex-autokey-year-length <span class="org-highlight-numbers-number">4</span>
        bibtex-autokey-name-year-separator <span class="org-string">"-"</span>
        bibtex-autokey-year-title-separator <span class="org-string">"-"</span>
        bibtex-autokey-titleword-separator <span class="org-string">"-"</span>
        bibtex-autokey-titlewords <span class="org-highlight-numbers-number">2</span>
        bibtex-autokey-titlewords-stretch <span class="org-highlight-numbers-number">1</span>
        bibtex-autokey-titleword-length <span class="org-highlight-numbers-number">5</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/bibtex-format-and-clean-entry</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>call-interactively 'bibtex-fill-entry<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>call-interactively 'bibtex-clean-entry<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>call-interactively 'org-ref-clean-bibtex-entry<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">bibtex-completion</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> helm-bibtex
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> bibtex-completion-library-path <span class="org-rainbow-delimiters-depth-3">(</span>list my/dropbox-papers-dir<span class="org-rainbow-delimiters-depth-3">)</span>
        bibtex-completion-pdf-field <span class="org-string">"file"</span>
        bibtex-completion-bibliography <span class="org-rainbow-delimiters-depth-3">(</span>list my/dropbox-papers-bibtex<span class="org-rainbow-delimiters-depth-3">)</span>
        bibtex-completion-notes-path <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-string">"papers/"</span> my/org-directory<span class="org-rainbow-delimiters-depth-3">)</span>
        bibtex-completion-notes-template-multiple-files <span class="org-rainbow-delimiters-depth-3">(</span>string-join '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"#+TITLE: [Paper] ${author-or-editor} (${year}): ${title}"</span>
                                                                       <span class="org-string">"#+ROAM_KEY: cite:${=key=}\n\n"</span>
                                                                       <span class="org-rainbow-delimiters-depth-4">)</span>
                                                                     <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">biblio-core</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> biblio-selection-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"a"</span> . my/biblio-append-bibtex-to-papers<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/-biblio-append-bibtex-to-papers</span> <span class="org-rainbow-delimiters-depth-3">(</span>bibtex entry<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>find-file-other-window my/dropbox-papers-bibtex<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>goto-char <span class="org-rainbow-delimiters-depth-4">(</span>point-max<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>newline<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>newline<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>insert bibtex<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/biblio-append-bibtex-to-papers</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>biblio--selection-forward-bibtex #'my/-biblio-append-bibtex-to-papers<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">helm</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:defer</span> t
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> helm-display-function #'display-buffer<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'display-buffer-alist
               '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\\`\\*helm"</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span>display-buffer-in-side-window<span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span>inhibit-same-window . t<span class="org-rainbow-delimiters-depth-4">)</span>
                 <span class="org-rainbow-delimiters-depth-4">(</span>window-height . <span class="org-highlight-numbers-number">0.4</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">helm-bibtex</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n r"</span> . helm-bibtex<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-ref</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-builtin">:map</span> org-mode-map
              <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c ]"</span> . org-ref-helm-insert-cite-link<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-ref-default-bibliography <span class="org-rainbow-delimiters-depth-3">(</span>list my/dropbox-papers-bibtex<span class="org-rainbow-delimiters-depth-3">)</span>
        org-ref-pdf-directory my/dropbox-papers-dir
        org-ref-notes-function 'org-ref-notes-function-many-files
        org-ref-cite-completion-function 'org-ref-ivy-cite<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">org-noter</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>org-noter<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> org-noter-always-create-frame nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> my/org-roam-noter-heading-name <span class="org-string">"Interleaved notes"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/org-roam-noter</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Start org-noter for current notes file, creating the headline if not found."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>pos <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">save-excursion</span>
                 <span class="org-rainbow-delimiters-depth-7">(</span>goto-char <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-7">)</span>
                 <span class="org-rainbow-delimiters-depth-7">(</span>re-search-forward
                  <span class="org-rainbow-delimiters-depth-8">(</span>format <span class="org-string">"^* %s"</span> my/org-roam-noter-heading-name<span class="org-rainbow-delimiters-depth-8">)</span>
                  nil
                  t<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> pos
          <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">progn</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>goto-char pos<span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>beginning-of-line <span class="org-highlight-numbers-number">1</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>org-noter<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span>ref <span class="org-rainbow-delimiters-depth-8">(</span>cdr <span class="org-rainbow-delimiters-depth-9">(</span>org-roam--extract-ref<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
               <span class="org-rainbow-delimiters-depth-7">(</span>pdf-name <span class="org-rainbow-delimiters-depth-8">(</span>format <span class="org-string">"%s.pdf"</span> ref<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
               <span class="org-rainbow-delimiters-depth-7">(</span>pdf-path <span class="org-rainbow-delimiters-depth-8">(</span>expand-file-name pdf-name my/dropbox-papers-dir<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
               <span class="org-rainbow-delimiters-depth-7">(</span>pdf-path-rel <span class="org-rainbow-delimiters-depth-8">(</span>file-relative-name pdf-path<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
               <span class="org-rainbow-delimiters-depth-7">(</span>props
                <span class="org-rainbow-delimiters-depth-8">(</span>string-join `<span class="org-rainbow-delimiters-depth-9">(</span><span class="org-string">":PROPERTIES:"</span>
                               ,<span class="org-rainbow-delimiters-depth-1">(</span>format <span class="org-string">":NOTER_DOCUMENT: %s"</span> pdf-path-rel<span class="org-rainbow-delimiters-depth-1">)</span>
                               <span class="org-string">":END:"</span><span class="org-rainbow-delimiters-depth-9">)</span> <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>insert <span class="org-rainbow-delimiters-depth-7">(</span>format <span class="org-string">"* %s"</span> my/org-roam-noter-heading-name<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>org-set-tags '<span class="org-rainbow-delimiters-depth-7">(</span><span class="org-string">"org_noter"</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>org-return<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>insert props<span class="org-rainbow-delimiters-depth-6">)</span>
          <span class="org-rainbow-delimiters-depth-6">(</span>org-noter<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7b3e7f6" class="outline-2">
<h2 id="org7b3e7f6"><span class="section-number-2">41</span> deft</h2>
<div class="outline-text-2" id="text-41">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">deft</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> org-roam
  <span class="org-builtin">:bind</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c n d"</span> . deft<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"&lt;f8&gt;"</span> . deft<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-x &lt;f8&gt;"</span> . deft-find-file<span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-builtin">:map</span> deft-mode-map
         <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"C-c C-g"</span> . my/deft-refresh<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> deft-directory my/org-directory
        deft-recursive t
        deft-file-limit <span class="org-highlight-numbers-number">50</span>
        deft-extensions '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"org"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        deft-ignore-file-regexp <span class="org-string">"index.org</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">theindex.org"</span>
        deft-use-filter-string-for-filename t
        deft-file-naming-rules '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>noslash . <span class="org-string">"_"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                 <span class="org-rainbow-delimiters-depth-4">(</span>nospace . <span class="org-string">"_"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                                 <span class="org-rainbow-delimiters-depth-4">(</span>case-fn . downcase<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/deft-refresh</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">interactive</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>my/org-roam-refresh<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>deft-refresh<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>advice-add 'deft-new-file-named <span class="org-builtin">:filter-args</span> '<span class="org-rainbow-delimiters-depth-3">(</span>lambda <span class="org-rainbow-delimiters-depth-4">(</span>n<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>mapcar 'my/org-roam-filename-from-title n<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-orgf19ffb0" class="outline-2">
<h2 id="orgf19ffb0"><span class="section-number-2">42</span> modeline</h2>
<div class="outline-text-2" id="text-42">
</div>
<div id="outline-container-org586a3c4" class="outline-3">
<h3 id="org586a3c4">Selected window &amp; focused frame</h3>
<div class="outline-text-3" id="text-org586a3c4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">is window selected?</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/-selected-window</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'post-command-hook '(lambda () (setq my/-selected-window (selected-window))))</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'post-command-hook
          '<span class="org-rainbow-delimiters-depth-2">(</span>lambda <span class="org-rainbow-delimiters-depth-3">()</span>
             <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>not <span class="org-rainbow-delimiters-depth-5">(</span>minibuffer-window-active-p <span class="org-rainbow-delimiters-depth-6">(</span>selected-window<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> my/-selected-window <span class="org-rainbow-delimiters-depth-5">(</span>selected-window<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'buffer-list-update-hook '<span class="org-rainbow-delimiters-depth-2">(</span>lambda <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">(</span>force-mode-line-update t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">is emacs focused?</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/-focused-in</span> t<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'focus-in-hook '<span class="org-rainbow-delimiters-depth-2">(</span>lambda <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> my/-focused-in t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'focus-out-hook '<span class="org-rainbow-delimiters-depth-2">(</span>lambda <span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">setq</span> my/-focused-in nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/current-window-active-p</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">and</span> my/-focused-in
       <span class="org-rainbow-delimiters-depth-3">(</span>eq my/-selected-window <span class="org-rainbow-delimiters-depth-4">(</span>selected-window<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org43ae287" class="outline-3">
<h3 id="org43ae287">Regular modeline</h3>
<div class="outline-text-3" id="text-org43ae287">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span> mode-line-format
              '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"%e"</span>
                mode-line-front-space
                <span class="org-comment-delimiter">;; </span><span class="org-comment">evil-mode-line-tag</span>
                mode-line-mule-info
                mode-line-client mode-line-modified mode-line-remote
                mode-line-frame-identification mode-line-buffer-identification <span class="org-string">" "</span>
                mode-line-position
                <span class="org-rainbow-delimiters-depth-3">(</span>vc-mode vc-mode<span class="org-rainbow-delimiters-depth-3">)</span>
                <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-4">(</span>my/mode-line-flycheck<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-4">(</span>my/mode-line-venv<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                mode-line-modes mode-line-misc-info mode-line-end-spaces<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-window-info</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>dedicated <span class="org-rainbow-delimiters-depth-5">(</span>window-dedicated-p<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>fixed window-size-fixed<span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>pad <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">or</span> dedicated fixed<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">" "</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>format <span class="org-string">"%s%s%s%s"</span>
            pad
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> dedicated <span class="org-string">"&#215;"</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> fixed <span class="org-string">"+"</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span>
            pad<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> mode-line-misc-info
      <span class="org-rainbow-delimiters-depth-2">(</span>cons '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-4">(</span>my/mode-line-window-info<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> mode-line-misc-info<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2914cb2" class="outline-3">
<h3 id="org2914cb2">Experimental new modeline</h3>
<div class="outline-text-3" id="text-org2914cb2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">for the position hud</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">powerline</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>pl/render powerline-hud<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment"><span class="org-myXspecial-comment-keyword">TODO</span></span><span class="org-comment">: make it better</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/split-mode-line-render</span> <span class="org-rainbow-delimiters-depth-2">(</span>left right-wide right-narrow right-super-narrow<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>fmt-left <span class="org-rainbow-delimiters-depth-5">(</span>format-mode-line left<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>available-width <span class="org-rainbow-delimiters-depth-5">(</span>- <span class="org-rainbow-delimiters-depth-6">(</span>window-total-width<span class="org-rainbow-delimiters-depth-6">)</span>
                             <span class="org-rainbow-delimiters-depth-6">(</span>+ <span class="org-rainbow-delimiters-depth-7">(</span>length fmt-left<span class="org-rainbow-delimiters-depth-7">)</span>
                                <span class="org-rainbow-delimiters-depth-7">(</span>length <span class="org-rainbow-delimiters-depth-8">(</span>format-mode-line right-wide<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>right right-wide<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>&lt; available-width <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">narrow</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> right right-narrow<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> available-width <span class="org-rainbow-delimiters-depth-5">(</span>- <span class="org-rainbow-delimiters-depth-6">(</span>window-total-width<span class="org-rainbow-delimiters-depth-6">)</span>
                               <span class="org-rainbow-delimiters-depth-6">(</span>+ <span class="org-rainbow-delimiters-depth-7">(</span>length fmt-left<span class="org-rainbow-delimiters-depth-7">)</span>
                                  <span class="org-rainbow-delimiters-depth-7">(</span>length <span class="org-rainbow-delimiters-depth-8">(</span>format-mode-line right-narrow<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>&lt; available-width <span class="org-highlight-numbers-number">0</span><span class="org-rainbow-delimiters-depth-4">)</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">super narrow</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> right right-super-narrow<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> available-width <span class="org-rainbow-delimiters-depth-5">(</span>- <span class="org-rainbow-delimiters-depth-6">(</span>window-total-width<span class="org-rainbow-delimiters-depth-6">)</span>
                               <span class="org-rainbow-delimiters-depth-6">(</span>+ <span class="org-rainbow-delimiters-depth-7">(</span>length fmt-left<span class="org-rainbow-delimiters-depth-7">)</span>
                                  <span class="org-rainbow-delimiters-depth-7">(</span>length <span class="org-rainbow-delimiters-depth-8">(</span>format-mode-line right-super-narrow<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>append left
            <span class="org-rainbow-delimiters-depth-4">(</span>list <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"%%%ds"</span> available-width<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
            right<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-hud</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>active <span class="org-rainbow-delimiters-depth-5">(</span>eq my/-selected-window <span class="org-rainbow-delimiters-depth-6">(</span>selected-window<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>face0 <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> active 'powerline-active0 'powerline-inactive0<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>face2 <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> active 'powerline-active2 'powerline-inactive2<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>pl/render <span class="org-rainbow-delimiters-depth-4">(</span>powerline-hud face0 face2<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-vc</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>fname <span class="org-rainbow-delimiters-depth-5">(</span>buffer-file-name<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-5">(</span>null fname<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-5">(</span>null vc-mode<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        nil
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>br <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-8">(</span><span class="org-rainbow-delimiters-depth-9">(</span>backend <span class="org-rainbow-delimiters-depth-1">(</span>vc-backend fname<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                  <span class="org-rainbow-delimiters-depth-8">(</span>substring vc-mode <span class="org-rainbow-delimiters-depth-9">(</span>+ <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>eq backend 'Hg<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-highlight-numbers-number">2</span> <span class="org-highlight-numbers-number">3</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-highlight-numbers-number">2</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span>
            <span class="org-rainbow-delimiters-depth-6">(</span>st <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">pcase</span> <span class="org-rainbow-delimiters-depth-8">(</span>vc-state fname<span class="org-rainbow-delimiters-depth-8">)</span>
                  <span class="org-rainbow-delimiters-depth-8">(</span>'up-to-date <span class="org-rainbow-delimiters-depth-9">(</span>propertize <span class="org-string">"&#10003;"</span> 'face '<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:inherit</span> compilation-info <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                  <span class="org-rainbow-delimiters-depth-8">(</span>'edited <span class="org-rainbow-delimiters-depth-9">(</span>propertize <span class="org-string">"&#8226;"</span> 'face 'compilation-warning<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                  <span class="org-rainbow-delimiters-depth-8">(</span>'added <span class="org-rainbow-delimiters-depth-9">(</span>propertize <span class="org-string">"+"</span> 'face '<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:inherit</span> compilation-info <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                  <span class="org-rainbow-delimiters-depth-8">(</span>'removed <span class="org-rainbow-delimiters-depth-9">(</span>propertize <span class="org-string">"&#10007;"</span> 'face '<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:inherit</span> compilation-error <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                  <span class="org-rainbow-delimiters-depth-8">(</span>'missing <span class="org-rainbow-delimiters-depth-9">(</span>propertize <span class="org-string">"?"</span> 'face '<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-builtin">:inherit</span> compilation-error <span class="org-builtin">:weight</span> bold<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                  <span class="org-rainbow-delimiters-depth-8">(</span>_ <span class="org-string">"?"</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"%s %s "</span>
                <span class="org-rainbow-delimiters-depth-6">(</span>truncate-string-to-width br <span class="org-highlight-numbers-number">21</span> nil nil <span class="org-string">"&#8230;"</span><span class="org-rainbow-delimiters-depth-6">)</span>
                st<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-region-info</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> mark-active
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>evilp <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">and</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">featurep</span> '<span class="org-constant">evil</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">or</span> evil-local-mode evil-mode<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>beg <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> evilp evil-visual-beginning <span class="org-rainbow-delimiters-depth-7">(</span>region-beginning<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>end <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-keyword">if</span> evilp evil-visual-end <span class="org-rainbow-delimiters-depth-7">(</span>region-end<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>lines <span class="org-rainbow-delimiters-depth-6">(</span>count-lines beg end<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>words <span class="org-rainbow-delimiters-depth-6">(</span>count-words beg end<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>chars <span class="org-rainbow-delimiters-depth-6">(</span>abs <span class="org-rainbow-delimiters-depth-7">(</span>- beg end<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>l <span class="org-rainbow-delimiters-depth-6">(</span>propertize <span class="org-string">"l"</span> 'face 'compilation-info<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>w <span class="org-rainbow-delimiters-depth-6">(</span>propertize <span class="org-string">"w"</span> 'face 'compilation-warning<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>c <span class="org-rainbow-delimiters-depth-6">(</span>propertize <span class="org-string">"c"</span> 'face 'compilation-error<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>propertize <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"%s:%s %s:%s %s:%s"</span> l lines w words c chars<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-position</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>ln <span class="org-string">"%l"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>col-tmpl <span class="org-string">"%2c"</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>cur-col <span class="org-rainbow-delimiters-depth-5">(</span>current-column<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>col <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>&gt;= cur-col fill-column<span class="org-rainbow-delimiters-depth-6">)</span>
                  <span class="org-rainbow-delimiters-depth-6">(</span>propertize col-tmpl 'face 'compilation-warning<span class="org-rainbow-delimiters-depth-6">)</span>
                col-tmpl<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>format <span class="org-string">"(%s,%s) "</span> ln col<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-server</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">when</span> server-mode
    <span class="org-rainbow-delimiters-depth-3">(</span>propertize <span class="org-string">" srv "</span> 'face 'compilation-info<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/input-method-color-mappings</span>
  '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"greek"</span> . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"black"</span> <span class="org-builtin">:background</span> <span class="org-string">"DeepSkyBlue2"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"TeX"</span> . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"black"</span> <span class="org-builtin">:background</span> <span class="org-string">"MediumOrchid"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Agda"</span> . <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"black"</span> <span class="org-builtin">:background</span> <span class="org-string">"SpringGreen4"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-input-method</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>input-method current-input-method<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-4">(</span>null input-method<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>face <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">or</span> <span class="org-rainbow-delimiters-depth-8">(</span>cdr <span class="org-rainbow-delimiters-depth-9">(</span>assoc input-method my/input-method-color-mappings<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span>
                      '<span class="org-rainbow-delimiters-depth-8">(</span><span class="org-builtin">:foreground</span> <span class="org-string">"black"</span> <span class="org-builtin">:background</span> <span class="org-string">"red3"</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>concat <span class="org-string">" "</span>
                <span class="org-rainbow-delimiters-depth-6">(</span>propertize input-method 'face face<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/mode-line-major-mode-extra</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>func <span class="org-rainbow-delimiters-depth-5">(</span>intern <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"my/mode-line-extra-%s"</span> major-mode<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-4">(</span>fboundp func<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>funcall func<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> global-mode-string <span class="org-rainbow-delimiters-depth-2">(</span>delete '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-4">(</span>persp-mode-line<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> global-mode-string<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setcar mode-line-position <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq-default</span>
 mode-line-format
 '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:eval</span>
    <span class="org-rainbow-delimiters-depth-4">(</span>my/split-mode-line-render
     <span class="org-comment-delimiter">;; </span><span class="org-comment">left</span>
     <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">quote</span>
      <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-string">"%e"</span> <span class="org-string">" "</span>
       <span class="org-comment-delimiter">;; </span><span class="org-comment">mode-line-mule-info</span>
       mode-line-modified <span class="org-string">"  "</span>
       mode-line-buffer-identification <span class="org-string">" "</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>string-remove-suffix <span class="org-string">"-mode"</span> <span class="org-rainbow-delimiters-depth-9">(</span>format <span class="org-string">"%s"</span> major-mode<span class="org-rainbow-delimiters-depth-9">)</span><span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-input-method<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> mode-line-process<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">" "</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-major-mode-extra<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-window-info<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-flycheck<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">" "</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-region-info<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
       <span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">right</span>
     <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">quote</span>
      <span class="org-rainbow-delimiters-depth-6">(</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-vc<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> minor-mode-alist<span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">" "</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-server<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>frame-parameter nil 'persp--modestring<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"  "</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-position<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-hud<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"  "</span>
       <span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">right if too narrow</span>
     <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">quote</span>
      <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-vc<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>frame-parameter nil 'persp--modestring<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"  "</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-position<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-hud<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"  "</span>
       <span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">right if super narrow</span>
     <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">quote</span>
      <span class="org-rainbow-delimiters-depth-6">(</span><span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>frame-parameter nil 'persp--modestring<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"  "</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-position<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span>
       <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-8">(</span>my/mode-line-hud<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span> <span class="org-string">"  "</span>
       <span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
     <span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">evil-mode-line-tag</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">mode-line-mule-info</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">mode-line-client</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">mode-line-remote</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(vc-mode vc-mode)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">mode-line-modes</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">mode-line-misc-info</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(:eval minor-mode-alist)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(:eval (my/mode-line-venv))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7d269be" class="outline-3">
<h3 id="org7d269be">Powerline</h3>
<div class="outline-text-3" id="text-org7d269be">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">local for now</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">powerline-default-evil-theme</span>
  <span class="org-builtin">:commands</span> <span class="org-rainbow-delimiters-depth-2">(</span>powerline-default-evil-theme<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list
   'powerline-default-evil-theme-state-faces
   '<span class="org-rainbow-delimiters-depth-3">(</span>hybrid . powerline-active0-evil-insert<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">use-package</span> <span class="org-constant">powerline</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:after</span> flycheck
  <span class="org-builtin">:if</span> is-gui
  <span class="org-builtin">:init</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> powerline-display-buffer-size nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> powerline-display-mule-info nil<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> flycheck-mode-line '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-4">(</span>my/mode-line-flycheck<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> global-mode-string
        <span class="org-rainbow-delimiters-depth-3">(</span>append global-mode-string '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-6">(</span>my/mode-line-venv<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> global-mode-string
        <span class="org-rainbow-delimiters-depth-3">(</span>cons '<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-builtin">:eval</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-6">(</span>window-dedicated-p<span class="org-rainbow-delimiters-depth-6">)</span> <span class="org-string">"&#215; "</span> <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> global-mode-string<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-builtin">:config</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>powerline-default-evil-theme<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(powerline-default-theme)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>diminish-undo 'flycheck-mode<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'my/after-set-theme-hook 'powerline-reset<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-hook 'my/after-set-font-hook 'powerline-reset<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Try this to see if it fixes powerline hiccups</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">defun</span> <span class="org-function-name">powerline-selected-window-active</span> <span class="org-rainbow-delimiters-depth-3">()</span>
    <span class="org-doc">"Return whether the current window is active."</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>my/current-window-active-p<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7f17255" class="outline-2">
<h2 id="org7f17255"><span class="section-number-2">43</span> Setup</h2>
<div class="outline-text-2" id="text-43">
</div>
<div id="outline-container-orgc3af7cb" class="outline-3">
<h3 id="orgc3af7cb">Per-workstation setup</h3>
<div class="outline-text-3" id="text-orgc3af7cb">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/after-init-hook</span> nil <span class="org-doc">"Hook called after initialization"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">these have to be paths to projects that projectile recognizes (e.g. git)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/start-up-projects</span> '<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/open-start-up-projects</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">unless</span> <span class="org-rainbow-delimiters-depth-3">(</span>null my/start-up-projects<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>projectile-switch-project-action 'projectile-dired<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-5">(</span>proj my/start-up-projects<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>projectile-persp-switch-project proj<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>persp-switch <span class="org-string">"main"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'my/after-init-hook 'my/open-start-up-projects<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">usage:</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(add-to-list 'my/start-up-projects "/path/to/some/project")</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">https://nicolas.petton.fr/blog/per-computer-emacs-settings.html</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/hosts-dir</span> <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-rainbow-delimiters-depth-3">(</span>expand-file-name <span class="org-string">"hosts/"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defvar</span> <span class="org-variable-name">my/hostname</span> <span class="org-rainbow-delimiters-depth-2">(</span>substring <span class="org-rainbow-delimiters-depth-3">(</span>shell-command-to-string <span class="org-string">"hostname"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-highlight-numbers-number">0</span> <span class="org-highlight-numbers-number">-1</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>host-file <span class="org-rainbow-delimiters-depth-4">(</span>concat my/hosts-dir <span class="org-string">"init-"</span> my/hostname <span class="org-string">".el"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>load-file host-file<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb40f7b1" class="outline-3">
<h3 id="orgb40f7b1">Performance</h3>
<div class="outline-text-3" id="text-orgb40f7b1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">stolen from doom</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/defer-garbage-collection-h</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">setq</span> gc-cons-threshold <span class="org-highlight-numbers-number">100000000</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">my/restore-garbage-collection-h</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Defer it so that commands launched immediately after will enjoy the</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">benefits.</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>run-at-time
   <span class="org-highlight-numbers-number">1</span> nil <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-4">()</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">setq</span> gc-cons-threshold <span class="org-highlight-numbers-number">800000</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'minibuffer-setup-hook #'my/defer-garbage-collection-h<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>add-hook 'minibuffer-exit-hook #'my/restore-garbage-collection-h<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc39d758" class="outline-3">
<h3 id="orgc39d758">Global setup</h3>
<div class="outline-text-3" id="text-orgc39d758">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> custom-file <span class="org-rainbow-delimiters-depth-2">(</span>expand-file-name <span class="org-string">"custom.el"</span> user-emacs-directory<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(load custom-file 'noerror)</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">make underlines show under mode-line (cleaner)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> x-underline-at-descent-line t<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>my/set-theme<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>my/set-font<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> linum-format 'dynamic<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> default-input-method <span class="org-string">"greek"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>hybrid-mode<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>winner-mode<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span>run-hooks 'my/after-init-hook<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org86933b2" class="outline-3">
<h3 id="org86933b2">custom</h3>
<div class="outline-text-3" id="text-org86933b2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>custom-set-faces
 <span class="org-comment-delimiter">;; </span><span class="org-comment">'(anzu-mode-line ((t (:inherit mode-line :foreground "magenta" :weight bold))))</span>
 <span class="org-comment-delimiter">;; </span><span class="org-comment">'(anzu-mode-line-no-match ((t (:inherit mode-line :foreground "red" :weight bold))))</span>
 '<span class="org-rainbow-delimiters-depth-2">(</span>fixed-pitch <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>t nil<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
 <span class="org-comment-delimiter">;; </span><span class="org-comment">'(flycheck-info ((t (:underline (:color "DeepSkyBlue2" :style wave)))))</span>
 <span class="org-comment-delimiter">;; </span><span class="org-comment">'(flycheck-fringe-info ((t (:foreground "DeepSkyBlue2"))))</span>
 <span class="org-comment-delimiter">;; </span><span class="org-comment">'(flycheck-warning ((t (:underline (:color "orange1" :style wave)))))</span>
 <span class="org-comment-delimiter">;; </span><span class="org-comment">'(flycheck-fringe-warning ((t (:foreground "orange1"))))</span>
 <span class="org-comment-delimiter">;; </span><span class="org-comment">'(flycheck-error ((t (:underline (:color "red1" :style wave)))))</span>
 <span class="org-comment-delimiter">;; </span><span class="org-comment">'(flycheck-fringe-error ((t (:foreground "#FB4933"))))</span>
 <span class="org-comment-delimiter">;; </span><span class="org-comment">'(whitespace-trailing ((t (:background "#602020"))))</span>
 <span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-2">(</span>val '<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>eval . <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">setq</span> flycheck-disabled-checkers
                             <span class="org-rainbow-delimiters-depth-6">(</span>append flycheck-disabled-checkers
                                     <span class="org-rainbow-delimiters-depth-7">(</span><span class="org-keyword">quote</span>
                                      <span class="org-rainbow-delimiters-depth-8">(</span>intero<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span>haskell-hoogle-command . <span class="org-string">"stack hoogle -- --count=100"</span><span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span>projectile-tags-command . <span class="org-string">"npm run etags"</span><span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span>projectile-tags-command . <span class="org-string">"fast-tags -e -R ."</span><span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span>projectile-tags-command . <span class="org-string">"fast-tags -e -R -o %s --exclude=\"%s\" \"%s\""</span><span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span>psc-ide-output-directory . <span class="org-string">"build/"</span><span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span>my/use-intero . t<span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span>my/haskell-align-stuff . nil<span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span>my/haskell-use-ormolu . t<span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span>my/purescript-align-stuff . nil<span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-4">(</span>org-download-image-dir . <span class="org-string">"~/Dropbox/emacs/org-roam/static/images"</span><span class="org-rainbow-delimiters-depth-4">)</span>
               <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>add-to-list 'safe-local-variable-values val<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Alex Peitsinis</p>
<p class="date">Created: 2020-06-13 Sat 21:31</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
